import{r as x,b as Nt,a as Fe}from"./react-vendor-CP2YnuCL.js";import{B as At,R as St,a as ye,N as Et}from"./router-BIsLND5u.js";import{L as It,a as Tt,_ as Ct,C as _t,r as ve,E as Pt,v as kt,b as Lt,i as Ot,g as Rt,c as Mt,d as Dt,e as Ut,f as Bt,h as Ge,j as Ft,k as Gt,s as je,T as O,l as K,m as Vt,n as we,G as $t,o as Kt,p as zt,q as qt,t as Ht,u as Xt,w as Wt}from"./firebase-2GOGjCin.js";import{m as c,M as Yt,L as Jt,E as de,a as ue,A as Ve,C as X,S as Qt,z as S,K as $e,b as ne,Z as G,c as Ke,d as Zt,e as ze,f as qe,T as V,g as He,P as es,B as Xe,h as W,R as ts,i as me,V as We,X as Ne,j as ss,k as as,l as rs,n as is,U as ns,o as os,p as ls,G as cs,q as ds,r as us,s as ms,F as ps}from"./ui-CoeQhY6M.js";import{G as hs}from"./ai-BR_vQUHy.js";import{R as Ae,L as xs,C as Se,X as Ee,Y as Ie,T as Te,a as Ce,B as gs,b as fs}from"./charts-CGzOYZ6J.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();var Ye={exports:{}},Q={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bs=x,ys=Symbol.for("react.element"),vs=Symbol.for("react.fragment"),js=Object.prototype.hasOwnProperty,ws=bs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ns={key:!0,ref:!0,__self:!0,__source:!0};function Je(a,t,s){var r,i={},o=null,n=null;s!==void 0&&(o=""+s),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(n=t.ref);for(r in t)js.call(t,r)&&!Ns.hasOwnProperty(r)&&(i[r]=t[r]);if(a&&a.defaultProps)for(r in t=a.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:ys,type:a,key:o,ref:n,props:i,_owner:ws.current}}Q.Fragment=vs;Q.jsx=Je;Q.jsxs=Je;Ye.exports=Q;var e=Ye.exports,oe={},_e=Nt;oe.createRoot=_e.createRoot,oe.hydrateRoot=_e.hydrateRoot;const Pe="@firebase/performance",le="0.6.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qe=le,As="FB-PERF-TRACE-START",Ss="FB-PERF-TRACE-STOP",ce="FB-PERF-TRACE-MEASURE",Ze="_wt_",et="_fp",tt="_fcp",st="_fid",at="@firebase/performance/config",rt="@firebase/performance/configexpire",Es="performance",it="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},E=new Pt(Es,it,Is);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k=new It(it);k.logLevel=Tt.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let te,nt;class N{constructor(t){if(this.window=t,!t)throw E.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(t){!this.performance||!this.performance.mark||this.performance.mark(t)}measure(t,s,r){!this.performance||!this.performance.measure||this.performance.measure(t,s,r)}getEntriesByType(t){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(t)}getEntriesByName(t){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(t)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!Lt()?(k.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):Ot()?!0:(k.info("IndexedDB is not supported by current browser"),!1)}setupObserver(t,s){if(!this.PerformanceObserver)return;new this.PerformanceObserver(i=>{for(const o of i.getEntries())s(o)}).observe({entryTypes:[t]})}static getInstance(){return te===void 0&&(te=new N(nt)),te}}function Ts(a){nt=a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ot;function Cs(a){const t=a.getId();return t.then(s=>{ot=s}),t}function pe(){return ot}function _s(a){const t=a.getToken();return t.then(s=>{}),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(a,t){const s=a.length-t.length;if(s<0||s>1)throw E.create("invalid String merger input");const r=[];for(let i=0;i<a.length;i++)r.push(a.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let se;class _{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=ke("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=ke("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return se===void 0&&(se=new _),se}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var B;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.VISIBLE=1]="VISIBLE",a[a.HIDDEN=2]="HIDDEN"})(B||(B={}));const Ps=["firebase_","google_","ga_"],ks=new RegExp("^[a-zA-Z]\\w*$"),Ls=40,Os=100;function Rs(){const a=N.getInstance().navigator;return a?.serviceWorker?a.serviceWorker.controller?2:3:1}function lt(){switch(N.getInstance().document.visibilityState){case"visible":return B.VISIBLE;case"hidden":return B.HIDDEN;default:return B.UNKNOWN}}function Ms(){const t=N.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function Ds(a){return a.length===0||a.length>Ls?!1:!Ps.some(s=>a.startsWith(s))&&!!a.match(ks)}function Us(a){return a.length!==0&&a.length<=Os}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(a){var t;const s=(t=a.options)===null||t===void 0?void 0:t.appId;if(!s)throw E.create("no app id");return s}function Bs(a){var t;const s=(t=a.options)===null||t===void 0?void 0:t.projectId;if(!s)throw E.create("no project id");return s}function Fs(a){var t;const s=(t=a.options)===null||t===void 0?void 0:t.apiKey;if(!s)throw E.create("no api key");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="0.0.1",P={loggingEnabled:!0},Vs="FIREBASE_INSTALLATIONS_AUTH";function $s(a,t){const s=Ks();return s?(Le(s),Promise.resolve()):Hs(a,t).then(Le).then(r=>zs(r),()=>{})}function Ks(){const a=N.getInstance().localStorage;if(!a)return;const t=a.getItem(rt);if(!t||!Xs(t))return;const s=a.getItem(at);if(s)try{return JSON.parse(s)}catch{return}}function zs(a){const t=N.getInstance().localStorage;!a||!t||(t.setItem(at,JSON.stringify(a)),t.setItem(rt,String(Date.now()+_.getInstance().configTimeToLive*60*60*1e3)))}const qs="Could not fetch config, will use default configs";function Hs(a,t){return _s(a.installations).then(s=>{const r=Bs(a.app),i=Fs(a.app),o=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,n=new Request(o,{method:"POST",headers:{Authorization:`${Vs} ${s}`},body:JSON.stringify({app_instance_id:t,app_instance_id_token:s,app_id:ct(a.app),app_version:Qe,sdk_version:Gs})});return fetch(n).then(u=>{if(u.ok)return u.json();throw E.create("RC response not ok")})}).catch(()=>{k.info(qs)})}function Le(a){if(!a)return a;const t=_.getInstance(),s=a.entries||{};return s.fpr_enabled!==void 0?t.loggingEnabled=String(s.fpr_enabled)==="true":t.loggingEnabled=P.loggingEnabled,s.fpr_log_source?t.logSource=Number(s.fpr_log_source):P.logSource&&(t.logSource=P.logSource),s.fpr_log_endpoint_url?t.logEndPointUrl=s.fpr_log_endpoint_url:P.logEndPointUrl&&(t.logEndPointUrl=P.logEndPointUrl),s.fpr_log_transport_key?t.transportKey=s.fpr_log_transport_key:P.transportKey&&(t.transportKey=P.transportKey),s.fpr_vc_network_request_sampling_rate!==void 0?t.networkRequestsSamplingRate=Number(s.fpr_vc_network_request_sampling_rate):P.networkRequestsSamplingRate!==void 0&&(t.networkRequestsSamplingRate=P.networkRequestsSamplingRate),s.fpr_vc_trace_sampling_rate!==void 0?t.tracesSamplingRate=Number(s.fpr_vc_trace_sampling_rate):P.tracesSamplingRate!==void 0&&(t.tracesSamplingRate=P.tracesSamplingRate),t.logTraceAfterSampling=Oe(t.tracesSamplingRate),t.logNetworkAfterSampling=Oe(t.networkRequestsSamplingRate),a}function Xs(a){return Number(a)>Date.now()}function Oe(a){return Math.random()<=a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let he=1,ae;function dt(a){return he=2,ae=ae||Ys(a),ae}function Ws(){return he===3}function Ys(a){return Js().then(()=>Cs(a.installations)).then(t=>$s(a,t)).then(()=>Re(),()=>Re())}function Js(){const a=N.getInstance().document;return new Promise(t=>{if(a&&a.readyState!=="complete"){const s=()=>{a.readyState==="complete"&&(a.removeEventListener("readystatechange",s),t())};a.addEventListener("readystatechange",s)}else t()})}function Re(){he=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xe=10*1e3,Qs=5.5*1e3,ut=3,Zs=1e3;let Y=ut,R=[],Me=!1;function ea(){Me||(Z(Qs),Me=!0)}function Z(a){setTimeout(()=>{if(Y!==0){if(!R.length)return Z(xe);ta()}},a)}function ta(){const a=R.splice(0,Zs),t=a.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),s={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:_.getInstance().logSource,log_event:t};sa(s,a).catch(()=>{R=[...a,...R],Y--,k.info(`Tries left: ${Y}.`),Z(xe)})}function sa(a,t){return aa(a).then(s=>(s.ok||k.info("Call to Firebase backend failed."),s.json())).then(s=>{const r=Number(s.nextRequestWaitMillis);let i=xe;isNaN(r)||(i=Math.max(r,i));const o=s.logResponseDetails;Array.isArray(o)&&o.length>0&&o[0].responseAction==="RETRY_REQUEST_LATER"&&(R=[...t,...R],k.info("Retry transport request later.")),Y=ut,Z(i)})}function aa(a){const t=_.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(a)})}function ra(a){if(!a.eventTime||!a.message)throw E.create("invalid cc log");R=[...R,a]}function ia(a){return(...t)=>{const s=a(...t);ra({message:s,eventTime:Date.now()})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let re;function mt(a,t){re||(re=ia(oa)),re(a,t)}function z(a){const t=_.getInstance();!t.instrumentationEnabled&&a.isAuto||!t.dataCollectionEnabled&&!a.isAuto||N.getInstance().requiredApisAvailable()&&(a.isAuto&&lt()!==B.VISIBLE||(Ws()?ie(a):dt(a.performanceController).then(()=>ie(a),()=>ie(a))))}function ie(a){if(!pe())return;const t=_.getInstance();!t.loggingEnabled||!t.logTraceAfterSampling||setTimeout(()=>mt(a,1),0)}function na(a){const t=_.getInstance();if(!t.instrumentationEnabled)return;const s=a.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];s===r||s===i||!t.loggingEnabled||!t.logNetworkAfterSampling||setTimeout(()=>mt(a,0),0)}function oa(a,t){return t===0?la(a):ca(a)}function la(a){const t={url:a.url,http_method:a.httpMethod||0,http_response_code:200,response_payload_bytes:a.responsePayloadBytes,client_start_time_us:a.startTimeUs,time_to_response_initiated_us:a.timeToResponseInitiatedUs,time_to_response_completed_us:a.timeToResponseCompletedUs},s={application_info:pt(a.performanceController.app),network_request_metric:t};return JSON.stringify(s)}function ca(a){const t={name:a.name,is_auto:a.isAuto,client_start_time_us:a.startTimeUs,duration_us:a.durationUs};Object.keys(a.counters).length!==0&&(t.counters=a.counters);const s=a.getAttributes();Object.keys(s).length!==0&&(t.custom_attributes=s);const r={application_info:pt(a.performanceController.app),trace_metric:t};return JSON.stringify(r)}function pt(a){return{google_app_id:ct(a),app_instance_id:pe(),web_app_info:{sdk_version:Qe,page_url:N.getInstance().getUrl(),service_worker_status:Rs(),visibility_state:lt(),effective_connection_type:Ms()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=100,ua="_",ma=[et,tt,st];function pa(a,t){return a.length===0||a.length>da?!1:t&&t.startsWith(Ze)&&ma.indexOf(a)>-1||!a.startsWith(ua)}function ha(a){const t=Math.floor(a);return t<a&&k.info(`Metric value should be an Integer, setting the value as : ${t}.`),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(t,s,r=!1,i){this.performanceController=t,this.name=s,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=N.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${As}-${this.randomId}-${this.name}`,this.traceStopMark=`${Ss}-${this.randomId}-${this.name}`,this.traceMeasure=i||`${ce}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw E.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw E.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),z(this)}record(t,s,r){if(t<=0)throw E.create("nonpositive trace startTime",{traceName:this.name});if(s<=0)throw E.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(s*1e3),this.startTimeUs=Math.floor(t*1e3),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Math.floor(Number(r.metrics[i])));z(this)}incrementMetric(t,s=1){this.counters[t]===void 0?this.putMetric(t,s):this.putMetric(t,this.counters[t]+s)}putMetric(t,s){if(pa(t,this.name))this.counters[t]=ha(s??0);else throw E.create("invalid custom metric name",{customMetricName:t})}getMetric(t){return this.counters[t]||0}putAttribute(t,s){const r=Ds(t),i=Us(s);if(r&&i){this.customAttributes[t]=s;return}if(!r)throw E.create("invalid attribute name",{attributeName:t});if(!i)throw E.create("invalid attribute value",{attributeValue:s})}getAttribute(t){return this.customAttributes[t]}removeAttribute(t){this.customAttributes[t]!==void 0&&delete this.customAttributes[t]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(t){this.startTimeUs=t}setDuration(t){this.durationUs=t}calculateTraceMetrics(){const t=this.api.getEntriesByName(this.traceMeasure),s=t&&t[0];s&&(this.durationUs=Math.floor(s.duration*1e3),this.startTimeUs=Math.floor((s.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(t,s,r,i){const o=N.getInstance().getUrl();if(!o)return;const n=new D(t,Ze+o,!0),u=Math.floor(N.getInstance().getTimeOrigin()*1e3);n.setStartTime(u),s&&s[0]&&(n.setDuration(Math.floor(s[0].duration*1e3)),n.putMetric("domInteractive",Math.floor(s[0].domInteractive*1e3)),n.putMetric("domContentLoadedEventEnd",Math.floor(s[0].domContentLoadedEventEnd*1e3)),n.putMetric("loadEventEnd",Math.floor(s[0].loadEventEnd*1e3)));const m="first-paint",p="first-contentful-paint";if(r){const d=r.find(g=>g.name===m);d&&d.startTime&&n.putMetric(et,Math.floor(d.startTime*1e3));const l=r.find(g=>g.name===p);l&&l.startTime&&n.putMetric(tt,Math.floor(l.startTime*1e3)),i&&n.putMetric(st,Math.floor(i*1e3))}z(n)}static createUserTimingTrace(t,s){const r=new D(t,s,!1,s);z(r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(a,t){const s=t;if(!s||s.responseStart===void 0)return;const r=N.getInstance().getTimeOrigin(),i=Math.floor((s.startTime+r)*1e3),o=s.responseStart?Math.floor((s.responseStart-s.startTime)*1e3):void 0,n=Math.floor((s.responseEnd-s.startTime)*1e3),u=s.name&&s.name.split("?")[0],m={performanceController:a,url:u,responsePayloadBytes:s.transferSize,startTimeUs:i,timeToResponseInitiatedUs:o,timeToResponseCompletedUs:n};na(m)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=5e3;function Ue(a){pe()&&(setTimeout(()=>fa(a),0),setTimeout(()=>ga(a),0),setTimeout(()=>ba(a),0))}function ga(a){const t=N.getInstance(),s=t.getEntriesByType("resource");for(const r of s)De(a,r);t.setupObserver("resource",r=>De(a,r))}function fa(a){const t=N.getInstance(),s=t.getEntriesByType("navigation"),r=t.getEntriesByType("paint");if(t.onFirstInputDelay){let i=setTimeout(()=>{D.createOobTrace(a,s,r),i=void 0},xa);t.onFirstInputDelay(o=>{i&&(clearTimeout(i),D.createOobTrace(a,s,r,o))})}else D.createOobTrace(a,s,r)}function ba(a){const t=N.getInstance(),s=t.getEntriesByType("measure");for(const r of s)Be(a,r);t.setupObserver("measure",r=>Be(a,r))}function Be(a,t){const s=t.name;s.substring(0,ce.length)!==ce&&D.createUserTimingTrace(a,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(t,s){this.app=t,this.installations=s,this.initialized=!1}_init(t){this.initialized||(t?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=t.dataCollectionEnabled),t?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=t.instrumentationEnabled),N.getInstance().requiredApisAvailable()?kt().then(s=>{s&&(ea(),dt(this).then(()=>Ue(this),()=>Ue(this)),this.initialized=!0)}).catch(s=>{k.info(`Environment doesn't support IndexedDB: ${s}`)}):k.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(t){_.getInstance().instrumentationEnabled=t}get instrumentationEnabled(){return _.getInstance().instrumentationEnabled}set dataCollectionEnabled(t){_.getInstance().dataCollectionEnabled=t}get dataCollectionEnabled(){return _.getInstance().dataCollectionEnabled}}const va="[DEFAULT]";function ja(a=Rt()){return a=Mt(a),Dt(a,"performance").getImmediate()}const wa=(a,{options:t})=>{const s=a.getProvider("app").getImmediate(),r=a.getProvider("installations-internal").getImmediate();if(s.name!==va)throw E.create("FB not default");if(typeof window>"u")throw E.create("no window");Ts(window);const i=new ya(s,r);return i._init(t),i};function Na(){Ct(new _t("performance",wa,"PUBLIC")),ve(Pe,le),ve(Pe,le,"esm2017")}Na();const ht={apiKey:"tu-api-key-aqui",authDomain:"english-master-app.firebaseapp.com",projectId:"english-master-app",storageBucket:"english-master-app.appspot.com",messagingSenderId:"123456789012",appId:"1:123456789012:web:abcdef123456",measurementId:"G-XXXXXXXXXX"},J=Ut(ht),M=Bt(J);Ge(J);typeof window<"u"&&(Ft().then(a=>{a&&(Gt(J),console.log("üìä Firebase Analytics initialized"))}),ja(J),console.log("‚ö° Firebase Performance initialized"));M.useDeviceLanguage();console.log("üî• Firebase initialized successfully");console.log("üèóÔ∏è Environment:","production");console.log("üì± Project ID:",ht.projectId);class ee{db=Ge();static LEVEL_REQUIREMENTS={A1:{minExercises:40,minAccuracy:.7,minSessions:5,minTimeSpent:60,skillsRequired:["social_greetings","basic_needs","courtesy","personal_info"],description:"Supervivencia b√°sica en ingl√©s"},A2:{minExercises:80,minAccuracy:.75,minSessions:10,minTimeSpent:120,skillsRequired:["daily_routines","past_experiences","future_plans","preferences"],description:"Comunicaci√≥n cotidiana"},B1:{minExercises:120,minAccuracy:.8,minSessions:15,minTimeSpent:180,skillsRequired:["work_situations","problem_solving","opinions","hypotheticals"],description:"Independencia comunicativa"},B2:{minExercises:160,minAccuracy:.85,minSessions:20,minTimeSpent:240,skillsRequired:["professional_communication","analysis","complex_grammar","nuanced_vocabulary"],description:"Fluidez profesional"}};async initializeUserProgress(t,s,r){const i={userId:t,email:s,currentLevel:"A1",totalExercises:0,totalCorrectAnswers:0,overallAccuracy:0,totalXP:0,totalTimeSpent:0,currentStreak:0,longestStreak:0,levelProgress:{A1:this.createInitialLevelStats(!0),A2:this.createInitialLevelStats(!1),B1:this.createInitialLevelStats(!1),B2:this.createInitialLevelStats(!1)},apiKey:this.encryptAPIKey(r),preferences:{dailyGoal:20,soundEnabled:!0,animationsEnabled:!0,explanationLanguage:"es",difficultyPreference:"adaptive"},unlockedAchievements:[],createdAt:new Date,lastActive:new Date};return await je(K(this.db,"userProgress",t),{...i,createdAt:O.fromDate(i.createdAt),lastActive:O.fromDate(i.lastActive)}),i}async updateProgress(t,s){return await Vt(this.db,async r=>{const i=K(this.db,"userProgress",t),o=await r.get(i);if(!o.exists())throw new Error("User progress not found");const n=this.convertFirestoreToProgress(o.data()),u=n.totalExercises+s.totalAnswers,m=n.totalCorrectAnswers+s.correctAnswers,p=m/u,d=n.currentLevel,l=n.levelProgress[d],g={...l,exercisesCompleted:l.exercisesCompleted+s.totalAnswers,correctAnswers:l.correctAnswers+s.correctAnswers,accuracy:(l.correctAnswers+s.correctAnswers)/(l.exercisesCompleted+s.totalAnswers),xpEarned:l.xpEarned+s.xpEarned,timeSpent:l.timeSpent+s.timeSpent,sessionsCompleted:l.sessionsCompleted+1,lastSession:new Date,averageTime:(l.averageTime*l.exercisesCompleted+s.timeSpent*60/s.totalAnswers)/(l.exercisesCompleted+s.totalAnswers),weakAreas:this.updateWeakAreas(l.weakAreas,s.weakAreasIdentified),strongAreas:this.updateStrongAreas(l.strongAreas,s.skillsFocused,s.accuracy)},v=this.calculateProgress(d,g);let h=d,y={...n.levelProgress};v.canLevelUp&&d!=="B2"&&(h=this.getNextLevel(d),g.isCompleted=!0,g.completedAt=new Date,y[h].isUnlocked=!0,console.log(`üéâ LEVEL UP: ${d} ‚Üí ${h}`)),y[d]=g;const b=new Date().toISOString().split("T")[0],A=new Date(Date.now()-864e5).toISOString().split("T")[0],C=n.lastActive.toISOString().split("T")[0];let f=n.currentStreak;C===A?f+=1:C!==b&&(f=1);const j={...n,currentLevel:h,totalExercises:u,totalCorrectAnswers:m,overallAccuracy:p,totalXP:n.totalXP+s.xpEarned,totalTimeSpent:n.totalTimeSpent+s.timeSpent,currentStreak:f,longestStreak:Math.max(n.longestStreak,f),levelProgress:y,lastActive:new Date,...v.canLevelUp&&{lastLevelUp:new Date}};return r.update(i,{...j,lastActive:O.fromDate(j.lastActive),...j.lastLevelUp&&{lastLevelUp:O.fromDate(j.lastLevelUp)},"levelProgress.A1.lastSession":j.levelProgress.A1.lastSession?O.fromDate(j.levelProgress.A1.lastSession):null,"levelProgress.A2.lastSession":j.levelProgress.A2.lastSession?O.fromDate(j.levelProgress.A2.lastSession):null,"levelProgress.B1.lastSession":j.levelProgress.B1.lastSession?O.fromDate(j.levelProgress.B1.lastSession):null,"levelProgress.B2.lastSession":j.levelProgress.B2.lastSession?O.fromDate(j.levelProgress.B2.lastSession):null}),await this.saveDailyProgress(t,s,j),j})}async getUserProgress(t){const s=await we(K(this.db,"userProgress",t));return s.exists()?this.convertFirestoreToProgress(s.data()):null}calculateProgress(t,s){const r=ee.LEVEL_REQUIREMENTS[t],i=Math.min(1,s.exercisesCompleted/r.minExercises),o=Math.min(1,s.accuracy/r.minAccuracy),n=Math.min(1,s.sessionsCompleted/r.minSessions),u=Math.min(1,s.timeSpent/r.minTimeSpent),m=Math.round((i*.4+o*.3+n*.2+u*.1)*100),p=s.exercisesCompleted>=r.minExercises&&s.accuracy>=r.minAccuracy&&s.sessionsCompleted>=r.minSessions&&s.timeSpent>=r.minTimeSpent,d=[];return s.exercisesCompleted<r.minExercises&&d.push(`Ejercicios: ${s.exercisesCompleted}/${r.minExercises}`),s.accuracy<r.minAccuracy&&d.push(`Precisi√≥n: ${Math.round(s.accuracy*100)}%/${Math.round(r.minAccuracy*100)}%`),s.sessionsCompleted<r.minSessions&&d.push(`Sesiones: ${s.sessionsCompleted}/${r.minSessions}`),s.timeSpent<r.minTimeSpent&&d.push(`Tiempo: ${s.timeSpent}/${r.minTimeSpent} min`),{canLevelUp:p,progressPercentage:m,nextLevel:this.getNextLevel(t),requirements:r,currentStats:s,blockedBy:d,estimatedTimeToLevelUp:this.calculateEstimatedTime(s,r)}}async saveDailyProgress(t,s,r){const i=new Date().toISOString().split("T")[0],o=K(this.db,"dailyProgress",`${t}_${i}`),n=await we(o),u={userId:t,date:i,exercisesCompleted:(n.exists()?n.data().exercisesCompleted:0)+s.totalAnswers,correctAnswers:(n.exists()?n.data().correctAnswers:0)+s.correctAnswers,accuracy:0,xpEarned:(n.exists()?n.data().xpEarned:0)+s.xpEarned,timeSpent:(n.exists()?n.data().timeSpent:0)+s.timeSpent,sessionsCompleted:(n.exists()?n.data().sessionsCompleted:0)+1,goalMet:!1,streak:r.currentStreak,level:r.currentLevel};u.accuracy=u.correctAnswers/u.exercisesCompleted,u.goalMet=u.exercisesCompleted>=r.preferences.dailyGoal,await je(o,u,{merge:!0})}createInitialLevelStats(t){return{exercisesCompleted:0,correctAnswers:0,accuracy:0,xpEarned:0,timeSpent:0,sessionsCompleted:0,isUnlocked:t,isCompleted:!1,weakAreas:[],strongAreas:[],averageTime:0}}getNextLevel(t){const s=["A1","A2","B1","B2"],r=s.indexOf(t);return s[Math.min(r+1,s.length-1)]}updateWeakAreas(t,s){const i=[...t,...s].reduce((o,n)=>(o[n]=(o[n]||0)+1,o),{});return Object.entries(i).filter(([o,n])=>n>=2).map(([o,n])=>o).slice(0,5)}updateStrongAreas(t,s,r){if(r>=.85){const i=[...t,...s];return Array.from(new Set(i)).slice(0,5)}return t}calculateEstimatedTime(t,s){const r=Math.max(0,s.minExercises-t.exercisesCompleted),i=t.averageTime||60;return r*i/60}encryptAPIKey(t){return btoa(t)}decryptAPIKey(t){return atob(t)}convertFirestoreToProgress(t){return{...t,createdAt:t.createdAt.toDate(),lastActive:t.lastActive.toDate(),lastLevelUp:t.lastLevelUp?.toDate(),levelProgress:{A1:{...t.levelProgress.A1,completedAt:t.levelProgress.A1.completedAt?.toDate(),lastSession:t.levelProgress.A1.lastSession?.toDate()},A2:{...t.levelProgress.A2,completedAt:t.levelProgress.A2.completedAt?.toDate(),lastSession:t.levelProgress.A2.lastSession?.toDate()},B1:{...t.levelProgress.B1,completedAt:t.levelProgress.B1.completedAt?.toDate(),lastSession:t.levelProgress.B1.lastSession?.toDate()},B2:{...t.levelProgress.B2,completedAt:t.levelProgress.B2.completedAt?.toDate(),lastSession:t.levelProgress.B2.lastSession?.toDate()}}}}}const Aa=()=>{const[a,t]=x.useState(!0),[s,r]=x.useState(""),[i,o]=x.useState(""),[n,u]=x.useState(!1),[m,p]=x.useState(!1),[d,l]=x.useState(""),g=new $t;g.addScope("email"),g.addScope("profile");const v=async()=>{try{p(!0),l("");const b=await Kt(M,g);console.log("‚úÖ Google sign in successful:",b.user.email),S.success(`¬°Bienvenido ${b.user.displayName||b.user.email}!`)}catch(b){console.error("‚ùå Google sign in error:",b),l("Error al iniciar sesi√≥n con Google"),S.error("Error al iniciar sesi√≥n con Google")}finally{p(!1)}},h=async b=>{if(b.preventDefault(),!s||!i){l("Por favor completa todos los campos");return}if(i.length<6){l("La contrase√±a debe tener al menos 6 caracteres");return}try{if(p(!0),l(""),a){const A=await zt(M,s,i);console.log("‚úÖ Email sign in successful:",A.user.email),S.success("¬°Sesi√≥n iniciada correctamente!")}else{const A=await qt(M,s,i);console.log("‚úÖ Account created successfully:",A.user.email),S.success("¬°Cuenta creada exitosamente!")}}catch(A){console.error("‚ùå Email auth error:",A);const C={"auth/user-not-found":"Usuario no encontrado","auth/wrong-password":"Contrase√±a incorrecta","auth/email-already-in-use":"Este email ya est√° registrado","auth/weak-password":"La contrase√±a es muy d√©bil","auth/invalid-email":"Email inv√°lido","auth/too-many-requests":"Demasiados intentos. Intenta m√°s tarde"};l(C[A.code]||"Error de autenticaci√≥n"),S.error(C[A.code]||"Error de autenticaci√≥n")}finally{p(!1)}},y=async()=>{if(!s){l("Ingresa tu email para recuperar la contrase√±a");return}try{await Ht(M,s),S.success("Email de recuperaci√≥n enviado")}catch{S.error("Error enviando email de recuperaci√≥n")}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-md w-full",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 border border-gray-200/50",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(c.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"EM"})}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"English Master"}),e.jsx("p",{className:"text-gray-600",children:a?"Inicia sesi√≥n en tu cuenta":"Crea tu cuenta nueva"})]}),e.jsxs(c.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},onClick:v,disabled:m,className:"w-full flex items-center justify-center space-x-3 p-4 border border-gray-300 rounded-xl hover:bg-gray-50 transition-colors disabled:opacity-50 mb-6",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),e.jsx("span",{className:"font-medium text-gray-700",children:a?"Continuar con Google":"Registrarse con Google"})]}),e.jsxs("div",{className:"flex items-center my-6",children:[e.jsx("div",{className:"flex-1 border-t border-gray-300"}),e.jsx("span",{className:"px-4 text-sm text-gray-500",children:"o"}),e.jsx("div",{className:"flex-1 border-t border-gray-300"})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs(c.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",value:s,onChange:b=>{r(b.target.value),l("")},className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"tu@email.com",disabled:m})]})]}),e.jsxs(c.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contrase√±a"}),e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:n?"text":"password",value:i,onChange:b=>{o(b.target.value),l("")},className:"w-full pl-10 pr-10 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",disabled:m}),e.jsx("button",{type:"button",onClick:()=>u(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n?e.jsx(de,{className:"w-5 h-5"}):e.jsx(ue,{className:"w-5 h-5"})})]})]}),d&&e.jsxs(c.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-red-50 border border-red-200 rounded-xl flex items-start space-x-2",children:[e.jsx(Ve,{className:"w-5 h-5 text-red-500 mt-0.5"}),e.jsx("p",{className:"text-red-700 text-sm",children:d})]}),e.jsx(c.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},type:"submit",disabled:m,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50",children:m?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(c.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:a?"Iniciando sesi√≥n...":"Creando cuenta..."})]}):e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a?e.jsx(X,{className:"w-5 h-5"}):e.jsx(Qt,{className:"w-5 h-5"}),e.jsx("span",{children:a?"Iniciar Sesi√≥n":"Crear Cuenta"})]})})]}),e.jsxs("div",{className:"mt-6 text-center space-y-3",children:[a&&e.jsx("button",{onClick:y,className:"text-sm text-blue-600 hover:text-blue-800 transition-colors",disabled:m,children:"¬øOlvidaste tu contrase√±a?"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[a?"¬øNo tienes cuenta?":"¬øYa tienes cuenta?"," ",e.jsx("button",{onClick:()=>{t(!a),l("")},className:"text-blue-600 hover:text-blue-800 font-medium transition-colors",disabled:m,children:a?"Crear cuenta":"Iniciar sesi√≥n"})]})]})]})})})};class Sa{static getA1Prompt(t){return`ERES UN PROFESOR DE INGL√âS PARA PRINCIPIANTES ABSOLUTOS HISPANOHABLANTES.

CONTEXTO CR√çTICO: 
- El estudiante NO SABE INGL√âS. Es su primera vez aprendiendo.
- Ha completado ${t.completedExercises} ejercicios
- Sesi√≥n n√∫mero: ${t.sessionNumber}
- √Åreas d√©biles: ${t.weakAreas?.join(", ")||"ninguna identificada"}

üéØ REGLAS PEDAG√ìGICAS ESTRICTAS:
1. TODAS las situaciones y preguntas deben estar en ESPA√ëOL claro y simple
2. TODAS las opciones de respuesta est√°n en INGL√âS (lo que debe aprender)
3. SOLO situaciones de supervivencia real y l√≥gica social b√°sica
4. M√°ximo 4 opciones por pregunta
5. Una sola respuesta obviamente correcta por l√≥gica social

‚úÖ SITUACIONES PERMITIDAS √öNICAMENTE:

**SALUDOS Y CORTES√çA (25%)**:
- "Te encuentras con un vecino y te dice 'Hello'" ‚Üí ["Hello", "Goodbye", "Please", "Sorry"]
- "Alguien te saluda con 'Good morning'" ‚Üí ["Good morning", "Good night", "Thank you", "Excuse me"]

**AGRADECIMIENTOS Y RESPUESTAS (25%)**:
- "Te dan comida en un restaurante" ‚Üí ["Thank you", "You're welcome", "Hello", "Goodbye"]
- "Alguien te dice 'Thank you'" ‚Üí ["You're welcome", "Thank you", "Hello", "Sorry"]

**NECESIDADES B√ÅSICAS (25%)**:
- "Tienes sed y necesitas agua" ‚Üí ["Can I have water?", "Hello", "Thank you", "Goodbye"]
- "Tienes hambre" ‚Üí ["I'm hungry", "I'm tired", "Hello", "Goodbye"]
- "Necesitas ir al ba√±o" ‚Üí ["Where is the bathroom?", "Hello", "Thank you", "Goodbye"]

**PRESENTACIONES E INFORMACI√ìN (25%)**:
- "Te preguntan c√≥mo te llamas" ‚Üí ["My name is...", "Hello", "Thank you", "Goodbye"]
- "Te preguntan de d√≥nde eres" ‚Üí ["I'm from...", "Hello", "Thank you", "My name is"]
- "Est√°s perdido y necesitas ayuda" ‚Üí ["Excuse me", "Thank you", "Goodbye", "Hello"]

üö® L√ìGICA SOCIAL OBLIGATORIA:
- Si alguien saluda ‚Üí Saludar de vuelta
- Si alguien da algo ‚Üí Agradecer ("Thank you")
- Si alguien agradece ‚Üí Responder cort√©smente ("You're welcome")
- Si necesitas algo ‚Üí Pedirlo educadamente
- Si cometes error ‚Üí Disculparse
- Si te preguntan algo personal ‚Üí Responder directamente

‚ùå PROHIBIDO ABSOLUTAMENTE:
- Situaciones abstractas o complejas
- Gram√°tica avanzada (present perfect, conditionals)
- Vocabulario no esencial para supervivencia
- Preguntas EN INGL√âS (deben ser en ESPA√ëOL)
- M√∫ltiples respuestas correctas
- Ejercicios que requieran conocimiento previo
- Situaciones irreales o poco comunes

FORMATO JSON OBLIGATORIO:
{
  "exercises": [
    {
      "id": "a1_survival_001",
      "type": "multiple_choice",
      "situation": "Te encuentras con un compa√±ero de trabajo en el pasillo y te dice 'Hello'",
      "question": "¬øQu√© debes responder para ser educado?",
      "options": ["Hello", "You're welcome", "I'm sorry", "Goodbye"],
      "correct_answer": 0,
      "explanation": "Cuando alguien te saluda con 'Hello', debes saludar de vuelta. Es cortes√≠a b√°sica responder el saludo.",
      "level": "A1",
      "skill_focus": "social_greetings",
      "difficulty": 0.2
    }
  ]
}

GENERAR EXACTAMENTE 8 EJERCICIOS √∫nicos, diversos y pedag√≥gicamente progresivos para SUPERVIVENCIA B√ÅSICA.`}static getA2Prompt(t){return`ERES UN PROFESOR DE INGL√âS PARA ESTUDIANTES ELEMENTALES HISPANOHABLANTES.

CONTEXTO: 
- El estudiante sabe ingl√©s b√°sico de supervivencia (A1 completado)
- Puede entender algunas preguntas simples en ingl√©s
- Ha completado ${t.completedExercises} ejercicios A2
- √Åreas d√©biles: ${t.weakAreas?.join(", ")||"ninguna identificada"}

üéØ OBJETIVO A2: Comunicaci√≥n en situaciones cotidianas simples

METODOLOG√çA: 70% preguntas en ESPA√ëOL, 30% en ingl√©s MUY simple

‚úÖ SITUACIONES A2 OBLIGATORIAS:

**RUTINAS DIARIAS (25%)**:
- "¬øC√≥mo dices que vas al trabajo todos los d√≠as?" ‚Üí ["I go to work every day", "I went to work", "I will go to work", "I am going to work"]
- "What do you do in the morning?" ‚Üí ["I have breakfast", "I had breakfast", "I will have breakfast", "I am having breakfast"]

**EXPERIENCIAS PASADAS (25%)**:
- "¬øC√≥mo dices que fuiste al cine ayer?" ‚Üí ["I went to the movies yesterday", "I go to movies", "I will go to movies", "I am going to movies"]
- "What did you do last weekend?" ‚Üí ["I visited my family", "I visit my family", "I will visit my family", "I am visiting my family"]

**PLANES FUTUROS (25%)**:
- "¬øC√≥mo expresas que vas a estudiar ma√±ana?" ‚Üí ["I'm going to study tomorrow", "I study tomorrow", "I studied tomorrow", "I have studied tomorrow"]
- "What are your plans for tonight?" ‚Üí ["I'm going to watch TV", "I watch TV", "I watched TV", "I have watched TV"]

**PREFERENCIAS Y OPINIONES SIMPLES (25%)**:
- "¬øC√≥mo dices que te gusta la pizza?" ‚Üí ["I like pizza", "I liked pizza", "I will like pizza", "I am liking pizza"]
- "Do you prefer coffee or tea?" ‚Üí ["I prefer coffee", "I preferred coffee", "I will prefer coffee", "I am preferring coffee"]

GRAM√ÅTICA A2 FOCUS:
- Present Simple vs Past Simple
- Going to future
- Basic present perfect
- Like/prefer/want + noun/infinitive

FORMATO JSON: [igual estructura que A1 pero con "level": "A2"]

GENERAR 8 EJERCICIOS A2 para COMUNICACI√ìN COTIDIANA.`}static getB1Prompt(t){return`ERES UN PROFESOR DE INGL√âS PARA ESTUDIANTES INTERMEDIOS HISPANOHABLANTES.

CONTEXTO:
- El estudiante puede comunicarse en situaciones b√°sicas (A1-A2 completado)
- Entiende la mayor√≠a de preguntas en ingl√©s
- Necesita fluidez en situaciones m√°s complejas
- Ha completado ${t.completedExercises} ejercicios B1

üéØ OBJETIVO B1: Comunicaci√≥n independiente y resoluci√≥n de problemas

METODOLOG√çA: 30% preguntas en espa√±ol, 70% en ingl√©s

‚úÖ SITUACIONES B1 OBLIGATORIAS:

**TRABAJO Y PROFESI√ìN (25%)**:
- "In a job interview, they ask 'Why do you want this job?' Best response:" ‚Üí ["I believe I can contribute to the team", "I need money", "I like jobs", "This is a good company"]
- "¬øC√≥mo pides un d√≠a libre en el trabajo?" ‚Üí ["Could I take tomorrow off?", "I no work tomorrow", "Tomorrow I don't go", "I want day free"]

**PROBLEMAS Y SOLUCIONES (25%)**:
- "Your internet isn't working. How do you explain this to tech support?" ‚Üí ["I'm having trouble with my internet connection", "My internet no work", "Internet is bad", "I don't like internet"]
- "If you had more time, what would you do?" ‚Üí ["I would travel more", "I will travel more", "I travel more", "I am traveling more"]

**OPINIONES Y ARGUMENTOS (25%)**:
- "How do you politely disagree with someone?" ‚Üí ["I see your point, but I think...", "You are wrong", "That's stupid", "No, no, no"]
- "¬øC√≥mo expresas tu opini√≥n sobre las redes sociales?" ‚Üí ["I think social media is useful because...", "Social media good", "I like Facebook", "Internet is OK"]

**SITUACIONES HIPOT√âTICAS (25%)**:
- "What would you do if you won the lottery?" ‚Üí ["I would buy a house", "I will buy a house", "I buy a house", "I am buying a house"]
- "If you could live anywhere, where would you go?" ‚Üí ["I would live in Spain", "I will live in Spain", "I live in Spain", "I am living in Spain"]

GRAM√ÅTICA B1 FOCUS:
- Conditionals (would, could, should)
- Present perfect vs Past simple
- Modal verbs for advice/possibility
- Complex sentence structures

GENERAR 8 EJERCICIOS B1 para INDEPENDENCIA COMUNICATIVA.`}static getB2Prompt(t){return`YOU ARE AN ADVANCED ENGLISH TEACHER FOR SPANISH SPEAKERS AT B2 LEVEL.

CONTEXT:
- Student has intermediate communication skills (A1-B1 completed)
- Can handle complex conversations and professional situations
- Needs refinement and sophisticated language use
- Has completed ${t.completedExercises} B2 exercises

üéØ OBJECTIVE B2: Sophisticated communication and professional fluency

METHODOLOGY: 100% English - advanced situations and nuanced language

‚úÖ MANDATORY B2 SITUATIONS:

**PROFESSIONAL COMMUNICATION (25%)**:
- "In a business meeting, how do you present a counterargument?" ‚Üí ["While I understand your perspective, I'd like to propose an alternative approach", "I think you're wrong", "That's not good", "I don't agree with you"]
- "How do you diplomatically suggest changes to a colleague's proposal?" ‚Üí ["Have you considered incorporating...", "Your idea is bad", "Change this please", "I don't like this"]

**SOPHISTICATED VOCABULARY (25%)**:
- "Which word best describes someone who adapts easily to change?" ‚Üí ["versatile", "good", "nice", "happy"]
- "The new policy has had _____ consequences for our department." ‚Üí ["far-reaching", "big", "many", "some"]

**COMPLEX GRAMMAR (25%)**:
- "Had I known about the traffic, I _____ earlier." ‚Üí ["would have left", "will leave", "leave", "left"]
- "Which sentence uses the subjunctive correctly?" ‚Üí ["I suggest that he be more careful", "I suggest that he is more careful", "I suggest he careful", "I suggest he be careful"]

**ANALYSIS AND CRITIQUE (25%)**:
- "How do you analyze the pros and cons of remote work?" ‚Üí ["While remote work offers flexibility, it may impact collaboration", "Remote work good and bad", "I like work from home", "Office better than home"]
- "Express a nuanced opinion about social media:" ‚Üí ["Social media serves as a double-edged sword in modern communication", "Social media good and bad", "I like Facebook", "Internet is useful"]

GRAMMAR B2 FOCUS:
- Advanced conditionals (3rd conditional, mixed conditionals)
- Subjunctive mood
- Sophisticated connectors and discourse markers
- Nuanced modal verbs
- Complex passive constructions

GENERATE 8 B2 EXERCISES for PROFESSIONAL FLUENCY.`}static getPromptForLevel(t,s){switch(t){case"A1":return this.getA1Prompt(s);case"A2":return this.getA2Prompt(s);case"B1":return this.getB1Prompt(s);case"B2":return this.getB2Prompt(s);default:return this.getA1Prompt(s)}}}class xt{genAI;constructor(t){this.genAI=new hs(t)}async generateExercises(t){try{console.log(`ü§ñ Generando ejercicios ${t.level} para usuario ${t.userId}`);const s=Sa.getPromptForLevel(t.level,t),u=(await this.genAI.getGenerativeModel({model:"gemini-1.5-flash",generationConfig:{temperature:.7,topP:.8,topK:40,maxOutputTokens:2048}}).generateContent(s)).response.text().match(/\{[\s\S]*\}/);if(!u)throw new Error("No se pudo extraer JSON de la respuesta de IA");const m=JSON.parse(u[0]);if(!m.exercises||!Array.isArray(m.exercises))throw new Error("Formato de ejercicios inv√°lido");const p=[];for(let d=0;d<m.exercises.length;d++){const l=m.exercises[d],g=this.validateExercise(l,t.level);if(g.isValid){const v={...l,id:`${t.level.toLowerCase()}_${Date.now()}_${d}`,correct_answer:typeof l.correct_answer=="string"?l.options.indexOf(l.correct_answer):l.correct_answer,difficulty:this.calculateDifficulty(l,t.level)},h=this.shuffleOptions(v);p.push(h),console.log(`‚úÖ Ejercicio ${d+1} validado: ${l.skill_focus}`)}else console.warn(`‚ùå Ejercicio ${d+1} rechazado:`,g.errors)}if(p.length===0)throw new Error("No se generaron ejercicios v√°lidos");return console.log(`üéØ ${p.length} ejercicios ${t.level} generados exitosamente`),p}catch(s){return console.error("‚ùå Error generando ejercicios:",s),this.generateEmergencyExercises(t.level)}}validateExercise(t,s){const r=[],i=[];let o=1;if((!t.question||typeof t.question!="string")&&r.push("Pregunta faltante o inv√°lida"),(!t.options||!Array.isArray(t.options)||t.options.length!==4)&&r.push("Debe tener exactamente 4 opciones"),typeof t.correct_answer!="number"&&typeof t.correct_answer!="string"&&r.push("Respuesta correcta inv√°lida"),(!t.explanation||typeof t.explanation!="string")&&r.push("Explicaci√≥n faltante"),s==="A1"){const m=this.validateA1Exercise(t);r.push(...m.errors),i.push(...m.warnings),o*=m.score}else if(s==="A2"){const m=this.validateA2Exercise(t);r.push(...m.errors),i.push(...m.warnings),o*=m.score}const n=this.validateSocialLogic(t);n.isValid||(r.push(...n.errors),o*=.5);const u=this.validateOptionDiversity(t.options);return u.isValid||(i.push(...u.warnings),o*=.9),{isValid:r.length===0,errors:r,warnings:i,pedagogicalScore:o}}validateA1Exercise(t){const s=[],r=[];let i=1;return this.detectLanguage(t.question)!=="spanish"&&(s.push("A1: La pregunta debe estar en ESPA√ëOL"),i*=.1),t.options.every(p=>this.detectLanguage(p)==="english")||(s.push("A1: Todas las opciones deben estar en INGL√âS"),i*=.3),this.isSurvivalSituation(t.situation||t.question)||(s.push("A1: Debe ser una situaci√≥n de supervivencia b√°sica"),i*=.5),this.hasAdvancedVocabulary(t.options.join(" "))&&(r.push("A1: Contiene vocabulario avanzado"),i*=.8),{errors:s,warnings:r,score:i}}validateA2Exercise(t){const s=[],r=[];let i=1;return this.detectLanguage(t.question)==="unknown"&&(r.push("A2: Idioma de pregunta no detectado claramente"),i*=.9),this.hasA2Grammar(t.question+" "+t.options.join(" "))||(r.push("A2: Deber√≠a incluir gram√°tica de nivel A2"),i*=.8),{errors:s,warnings:r,score:i}}validateSocialLogic(t){const s=[],r=(t.situation||t.question).toLowerCase(),i=t.options[typeof t.correct_answer=="number"?t.correct_answer:t.options.indexOf(t.correct_answer)]?.toLowerCase()||"",o=[{condition:r.includes("dice hello")||r.includes("saluda"),expectedResponses:["hello","hi","good morning"],name:"Responder saludo"},{condition:r.includes("te da")||r.includes("gives you"),expectedResponses:["thank you","thanks","gracias"],name:"Agradecer cuando reciben algo"},{condition:r.includes("dice thank you")||r.includes("te agradece"),expectedResponses:["you're welcome","no problem","de nada"],name:"Responder a agradecimiento"}];for(const n of o)n.condition&&(n.expectedResponses.some(m=>i.includes(m.toLowerCase()))||s.push(`L√≥gica social incorrecta: ${n.name}`));return{isValid:s.length===0,errors:s}}detectLanguage(t){const s=["qu√©","c√≥mo","d√≥nde","cu√°ndo","por","para","con","sin","te","le","se","es","est√°"],r=["what","how","where","when","the","and","you","are","is","can","do","have"],i=t.toLowerCase(),o=s.filter(u=>i.includes(u)).length,n=r.filter(u=>i.includes(u)).length;return o>n?"spanish":n>o?"english":"unknown"}isSurvivalSituation(t){const s=["saluda","hello","hola","dice","da","gives","comida","food","thank you","gracias","agradece","nombre","name","llamas","hambre","hungry","sed","thirsty","ba√±o","bathroom","perdido","lost","ayuda","help","excuse me"],r=t.toLowerCase();return s.some(i=>r.includes(i))}hasAdvancedVocabulary(t){const s=["sophisticated","comprehensive","substantial","significant","consequently","nevertheless","furthermore","moreover","perspective","analyze","evaluate","implement"],r=t.toLowerCase();return s.some(i=>r.includes(i))}hasA2Grammar(t){const s=["went","did","was","were","going to","will","have been","has been","would like","prefer"],r=t.toLowerCase();return s.some(i=>r.includes(i))}validateOptionDiversity(t){const s=[],r=t.map(u=>u.length),i=r.reduce((u,m)=>u+m,0)/r.length;r.some(u=>Math.abs(u-i)>i*.5)||s.push("Opciones tienen longitud muy similar");const n=new Set;return t.forEach(u=>{u.toLowerCase().split(" ").forEach(m=>n.add(m))}),n.size<t.length*2&&s.push("Opciones sem√°nticamente muy similares"),{isValid:s.length===0,warnings:s}}shuffleOptions(t){const s=t.options[t.correct_answer],r=[...t.options];for(let o=r.length-1;o>0;o--){const n=Math.floor(Math.random()*(o+1));[r[o],r[n]]=[r[n],r[o]]}const i=r.findIndex(o=>o===s);return{...t,options:r,correct_answer:i}}calculateDifficulty(t,s){let r=.5;r={A1:.2,A2:.4,B1:.6,B2:.8}[s];const o=t.question.length;return o>100&&(r+=.1),o>150&&(r+=.1),this.hasAdvancedVocabulary(t.options.join(" "))&&(r+=.2),Math.min(1,Math.max(0,r))}generateEmergencyExercises(t){const s={A1:[{id:"emergency_a1_001",type:"multiple_choice",situation:"Te encuentras con un compa√±ero y te dice Hello",question:"¬øQu√© debes responder para ser educado?",options:["Hello","You're welcome","I'm sorry","Goodbye"],correct_answer:0,explanation:'Cuando alguien te saluda con "Hello", debes saludar de vuelta. Es cortes√≠a b√°sica.',level:"A1",skill_focus:"social_greetings",difficulty:.2},{id:"emergency_a1_002",type:"multiple_choice",situation:"Te dan comida en un restaurante",question:"¬øQu√© dices para agradecer?",options:["Thank you","Hello","Goodbye","You're welcome"],correct_answer:0,explanation:'Cuando alguien te da algo, debes agradecer diciendo "Thank you".',level:"A1",skill_focus:"courtesy",difficulty:.2}],A2:[{id:"emergency_a2_001",type:"multiple_choice",situation:"Tu amigo pregunta sobre tu fin de semana",question:"¬øC√≥mo dices que fuiste al cine ayer?",options:["I went to the movies yesterday","I go to movies","I will go to movies","I am going to movies"],correct_answer:0,explanation:'Para hablar del pasado usamos "went" (pasado de "go").',level:"A2",skill_focus:"past_experiences",difficulty:.4}],B1:[{id:"emergency_b1_001",type:"multiple_choice",situation:"In a job interview context",question:"How would you express your motivation for the position?",options:["I believe I can contribute to the team","I need money","I like jobs","This is a company"],correct_answer:0,explanation:"Professional responses should focus on contribution and value.",level:"B1",skill_focus:"work_situations",difficulty:.6}],B2:[{id:"emergency_b2_001",type:"multiple_choice",situation:"Business meeting discussion",question:"How do you diplomatically present a counterargument?",options:["While I understand your perspective, I'd like to propose...","You are wrong","That's not good","I disagree"],correct_answer:0,explanation:"Professional communication requires diplomatic language and respect.",level:"B2",skill_focus:"professional_communication",difficulty:.8}]};return console.log(`üö® Usando ejercicios de emergencia para nivel ${t}`),s[t]||s.A1}}const Ea=({onComplete:a})=>{const[t,s]=x.useState(""),[r,i]=x.useState(!1),[o,n]=x.useState(""),[u,m]=x.useState(!1),[p,d]=x.useState("intro"),l=async y=>{try{const A=await new xt(y).generateExercises({userId:"test_user",level:"A1",weakAreas:[],completedExercises:0,sessionNumber:1});return A&&A.length>0}catch(b){return console.error("API Key validation error:",b),!1}},g=async()=>{if(!t.trim()){n("Por favor ingresa tu API Key");return}if(!t.startsWith("AIza")){n('La API Key debe comenzar con "AIza"');return}i(!0),n("");try{await l(t.trim())?(localStorage.setItem("gemini_api_key",t.trim()),a(t.trim())):n("API Key inv√°lida o sin permisos. Verifica que est√© activa y tenga acceso a Gemini.")}catch{n("Error validando API Key. Verifica tu conexi√≥n a internet.")}finally{i(!1)}},v={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,staggerChildren:.1}}},h={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return p==="intro"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:e.jsxs(c.div,{variants:v,initial:"hidden",animate:"visible",className:"max-w-2xl mx-auto text-center space-y-8",children:[e.jsxs(c.div,{variants:h,children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("span",{className:"text-white font-bold text-2xl",children:"EM"})}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4",children:"¬°Bienvenido a English Master!"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-lg mx-auto",children:"La primera app de ingl√©s 100% personalizada con IA que se adapta a tu nivel real"})]}),e.jsxs(c.div,{variants:h,className:"grid md:grid-cols-3 gap-6 my-12",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[e.jsx("div",{className:"text-3xl mb-4",children:"ü§ñ"}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"IA Personal"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Ejercicios √∫nicos generados espec√≠ficamente para tu nivel y debilidades"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[e.jsx("div",{className:"text-3xl mb-4",children:"üá™üá∏"}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Pedagog√≠a Real"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"A1: Preguntas en espa√±ol ‚Üí Respuestas en ingl√©s. L√≥gica que funciona."})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[e.jsx("div",{className:"text-3xl mb-4",children:"üöÄ"}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Progreso Real"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"A1 ‚Üí A2 ‚Üí B1 ‚Üí B2 con requisitos espec√≠ficos y progresi√≥n l√≥gica"})]})]}),e.jsx(c.div,{variants:h,children:e.jsx("button",{onClick:()=>d("setup"),className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:"Comenzar Configuraci√≥n"})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:e.jsx(c.div,{variants:v,initial:"hidden",animate:"visible",className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 border border-gray-200/50",children:[e.jsxs(c.div,{variants:h,className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx($e,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Configura tu API Key Personal"}),e.jsx("p",{className:"text-gray-600",children:"Necesitas tu propia API Key de Google AI Studio para generar ejercicios √∫nicos"})]}),e.jsx(c.div,{variants:h,className:"mb-8",children:e.jsxs("div",{className:"bg-blue-50 rounded-xl p-6 border border-blue-200",children:[e.jsxs("h3",{className:"font-bold text-blue-900 mb-4 flex items-center",children:[e.jsx(ne,{className:"w-5 h-5 mr-2"}),"¬øPor qu√© necesitas tu propia API Key?"]}),e.jsxs("div",{className:"space-y-3 text-sm text-blue-800",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(G,{className:"w-4 h-4 mt-0.5 text-blue-600"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Control total:"})," Tus datos y progreso son 100% privados"]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(G,{className:"w-4 h-4 mt-0.5 text-blue-600"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Ejercicios ilimitados:"})," Genera tantos como necesites"]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(G,{className:"w-4 h-4 mt-0.5 text-blue-600"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Personalizaci√≥n m√°xima:"})," IA adaptada a tu progreso espec√≠fico"]})]})]})]})}),e.jsxs(c.div,{variants:h,className:"mb-8",children:[e.jsxs("h3",{className:"font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ke,{className:"w-5 h-5 mr-2 text-yellow-500"}),"C√≥mo obtener tu API Key (2 minutos):"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"text-gray-800",children:["Ve a"," ",e.jsxs("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 font-medium inline-flex items-center",children:["Google AI Studio",e.jsx(Zt,{className:"w-4 h-4 ml-1"})]})]})})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),e.jsx("p",{className:"text-gray-800 flex-1",children:'Haz clic en "Create API Key" y selecciona tu proyecto'})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),e.jsx("p",{className:"text-gray-800 flex-1",children:"Copia la API Key y p√©gala abajo"})]})]})]}),e.jsxs(c.div,{variants:h,className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Google AI Studio API Key"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:u?"text":"password",value:t,onChange:y=>{s(y.target.value),n("")},placeholder:"AIzaSy...",className:"w-full p-4 pr-12 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg font-mono",disabled:r}),e.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?e.jsx(de,{className:"w-5 h-5"}):e.jsx(ue,{className:"w-5 h-5"})})]})]}),o&&e.jsxs(c.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start space-x-3",children:[e.jsx(Ve,{className:"w-5 h-5 text-red-500 mt-0.5"}),e.jsx("p",{className:"text-red-700 text-sm",children:o})]}),e.jsx(c.button,{variants:h,onClick:g,disabled:!t.trim()||r,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",whileHover:r?{}:{scale:1.01},whileTap:r?{}:{scale:.99},children:r?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(c.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Validando API Key..."})]}):e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(X,{className:"w-5 h-5"}),e.jsx("span",{children:"Validar y Continuar"})]})}),e.jsx(c.div,{variants:h,className:"mt-6",children:e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ne,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-green-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"üîí Tu API Key es segura"}),e.jsx("p",{children:"Se almacena localmente en tu dispositivo y solo se usa para generar tus ejercicios personalizados."})]})]})})})]})})})},Ia=({userProgress:a,onStartSession:t,onViewProgress:s,onSettings:r})=>{const[i,o]=x.useState(null),[n,u]=x.useState(!1),m=new ee;x.useEffect(()=>{const l=a.levelProgress[a.currentLevel],g=m.calculateProgress(a.currentLevel,l);o(g)},[a]);const p={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,staggerChildren:.1}}},d={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return e.jsxs(c.div,{variants:p,initial:"hidden",animate:"visible",className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[e.jsx(c.header,{variants:d,className:"bg-white/80 backdrop-blur-lg border-b border-gray-200/50 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(c.div,{whileHover:{scale:1.05},className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"EM"})}),e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"English Master"})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(c.div,{whileHover:{scale:1.02},className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[a.email.split("@")[0]," üëã"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Nivel ",a.currentLevel," ‚Ä¢ ",a.currentStreak," d√≠as seguidos"]})]}),e.jsx(c.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:r,className:"p-2 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors",children:e.jsx(ze,{className:"w-5 h-5 text-gray-600"})})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs(c.div,{variants:d,className:`
              relative overflow-hidden rounded-2xl p-6 border-2 transition-all duration-500
              ${i?.canLevelUp?"bg-gradient-to-r from-green-50 to-emerald-50 border-green-300 shadow-green-100":"bg-gradient-to-r from-blue-50 to-purple-50 border-blue-300 shadow-blue-100"} shadow-xl
            `,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs(c.h2,{className:`text-3xl font-bold mb-2 ${i?.canLevelUp?"text-green-800":"text-blue-800"}`,children:["üìà Nivel ",a.currentLevel," ‚Üí ",i?.nextLevel]}),e.jsx("p",{className:`text-sm ${i?.canLevelUp?"text-green-700":"text-blue-700"}`,children:i?.canLevelUp?"üéâ ¬°Listo para subir de nivel!":i?.requirements.description})]}),e.jsx(c.div,{animate:{scale:i?.canLevelUp?[1,1.1,1]:1,rotate:i?.canLevelUp?[0,5,-5,0]:0},transition:{duration:2,repeat:i?.canLevelUp?1/0:0},className:"text-center",children:e.jsxs("div",{className:`
                  inline-flex items-center justify-center w-20 h-20 rounded-full text-3xl font-bold
                  ${i?.canLevelUp?"bg-green-500 text-white shadow-lg shadow-green-200":"bg-white text-blue-600 shadow-lg"}
                `,children:[i?.progressPercentage||0,"%"]})})]}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:e.jsx(c.div,{initial:{width:0},animate:{width:`${i?.progressPercentage||0}%`},transition:{duration:1.5,ease:"easeOut"},className:`h-full rounded-full ${i?.canLevelUp?"bg-gradient-to-r from-green-400 to-emerald-500":"bg-gradient-to-r from-blue-400 to-purple-500"}`})})}),i&&!i.canLevelUp&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:i.blockedBy.map((l,g)=>e.jsx(c.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:g*.1},className:"bg-white/50 rounded-lg p-2 text-center",children:e.jsx("span",{className:"text-gray-600",children:l})},g))}),i?.canLevelUp&&e.jsx(c.button,{initial:{scale:0},animate:{scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-shadow",onClick:()=>u(!0),children:"üéâ ¬°SUBIR DE NIVEL!"})]}),e.jsxs(c.div,{variants:d,className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(q,{title:"XP Total",value:a.totalXP.toLocaleString(),icon:e.jsx(qe,{className:"w-6 h-6"}),color:"yellow",subtitle:"+50 hoy"}),e.jsx(q,{title:"Precisi√≥n",value:`${Math.round(a.overallAccuracy*100)}%`,icon:e.jsx(V,{className:"w-6 h-6"}),color:"blue",subtitle:"Meta: 85%"}),e.jsx(q,{title:"Racha",value:`${a.currentStreak} d√≠as`,icon:e.jsx(G,{className:"w-6 h-6"}),color:"orange",subtitle:`R√©cord: ${a.longestStreak}`}),e.jsx(q,{title:"Tiempo Total",value:`${Math.round(a.totalTimeSpent/60)}h`,icon:e.jsx(He,{className:"w-6 h-6"}),color:"green",subtitle:"Esta semana"})]}),e.jsxs(c.div,{variants:d,className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-200/50",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Tu Camino de Aprendizaje"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:["A1","A2","B1","B2"].map((l,g)=>{const v=a.levelProgress[l],h=a.currentLevel===l,y=v.isCompleted,b=v.isUnlocked;return e.jsx(Ta,{level:l,stats:v,isCurrent:h,isCompleted:y,isUnlocked:b,index:g},l)})})]}),e.jsxs(c.div,{variants:d,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(c.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:t,className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx(es,{className:"w-8 h-8"}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Comenzar Sesi√≥n"}),e.jsx("p",{className:"text-blue-100",children:"8 ejercicios personalizados"})]})]})}),e.jsx(c.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:s,className:"bg-white border-2 border-gray-200 text-gray-900 p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx(Xe,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Ver Progreso"}),e.jsx("p",{className:"text-gray-600",children:"An√°lisis detallado"})]})]})})]})]})}),e.jsx(W,{children:n&&e.jsx(Ca,{newLevel:i?.nextLevel||"A2",onClose:()=>u(!1)})})]})},q=({title:a,value:t,icon:s,color:r,subtitle:i})=>{const o={yellow:"from-yellow-400 to-orange-500 text-yellow-600",blue:"from-blue-400 to-blue-600 text-blue-600",orange:"from-orange-400 to-red-500 text-orange-600",green:"from-green-400 to-emerald-500 text-green-600"};return e.jsxs(c.div,{whileHover:{y:-4},className:"bg-white rounded-xl p-6 shadow-lg border border-gray-200/50 hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`p-3 rounded-lg bg-gradient-to-r ${o[r]}`,children:e.jsx("div",{className:"text-white",children:s})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:t}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:a}),e.jsx("p",{className:"text-xs text-gray-500",children:i})]})},Ta=({level:a,stats:t,isCurrent:s,isCompleted:r,isUnlocked:i,index:o})=>e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.1},className:`
        p-4 rounded-xl border-2 text-center transition-all duration-300 cursor-pointer
        ${s?"border-blue-500 bg-blue-50 shadow-lg shadow-blue-100":r?"border-green-500 bg-green-50 shadow-lg shadow-green-100":i?"border-gray-300 bg-gray-50 hover:border-gray-400":"border-gray-200 bg-gray-100 opacity-50 cursor-not-allowed"}
      `,whileHover:i?{scale:1.02}:{},children:[e.jsx("div",{className:"text-3xl mb-2",children:r?"üèÜ":s?"üéØ":i?"üîì":"üîí"}),e.jsx("div",{className:"font-bold text-lg mb-1",children:a}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[t.exercisesCompleted," ejercicios"]}),r&&t.completedAt&&e.jsxs("div",{className:"text-xs text-green-600",children:["Completado ",new Date(t.completedAt).toLocaleDateString()]}),s&&e.jsxs("div",{className:"text-xs text-blue-600 font-medium",children:[Math.round(t.accuracy*100),"% precisi√≥n"]})]}),Ca=({newLevel:a,onClose:t})=>e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,children:e.jsxs(c.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{type:"spring",duration:.8},className:"bg-white p-8 rounded-2xl text-center shadow-2xl max-w-md mx-4",onClick:s=>s.stopPropagation(),children:[e.jsx(c.div,{animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},className:"text-6xl mb-4",children:"üéâ"}),e.jsx("h2",{className:"text-3xl font-bold text-yellow-500 mb-2",children:"¬°LEVEL UP!"}),e.jsxs("p",{className:"text-xl text-gray-800 mb-4",children:["¬°Ahora eres nivel ",e.jsx("span",{className:"font-bold text-blue-600",children:a}),"!"]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl mb-6",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Has desbloqueado nuevos ejercicios y desaf√≠os m√°s avanzados"})}),e.jsx(c.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-3 rounded-xl font-bold shadow-lg",children:"¬°Continuar Aprendiendo!"})]})}),_a=({userProgress:a,apiKey:t,onComplete:s,onExit:r})=>{const[i,o]=x.useState([]),[n,u]=x.useState(0),[m,p]=x.useState(null),[d,l]=x.useState(!1),[g,v]=x.useState(!0),[h]=x.useState(new Date),[y,b]=x.useState(0),[A,C]=x.useState(0),[f,j]=x.useState([]),[gt,ft]=x.useState([]),bt=new xt(t),I=i[n],ge=n===i.length-1;x.useEffect(()=>{const w=setInterval(()=>{C(Math.floor((Date.now()-h.getTime())/1e3/60))},6e4);return()=>clearInterval(w)},[h]),x.useEffect(()=>{fe()},[]);const fe=async()=>{try{v(!0);const w=a.levelProgress[a.currentLevel],T=await bt.generateExercises({userId:a.userId,level:a.currentLevel,weakAreas:w.weakAreas,completedExercises:w.exercisesCompleted,sessionNumber:w.sessionsCompleted+1});o(T),v(!1),console.log(`üéØ Sesi√≥n generada: ${T.length} ejercicios nivel ${a.currentLevel}`)}catch(w){console.error("‚ùå Error generando sesi√≥n:",w),v(!1)}},yt=w=>{if(d)return;p(w),l(!0),w===I.correct_answer?b(L=>L+1):ft(L=>[...L,I.skill_focus]),j(L=>Array.from(new Set([...L,I.skill_focus])))},vt=()=>{ge?jt():(u(w=>w+1),p(null),l(!1))},jt=()=>{const w={userId:a.userId,sessionId:`session_${Date.now()}`,level:a.currentLevel,exercisesCompleted:i.length,correctAnswers:y,totalAnswers:i.length,accuracy:y/i.length,xpEarned:y*10+i.length*5,timeSpent:A,skillsFocused:Array.from(new Set(f)),weakAreasIdentified:Array.from(new Set(gt)),startTime:h,endTime:new Date};s(w)},wt=w=>{if("speechSynthesis"in window){const T=new SpeechSynthesisUtterance(w);T.lang="en-US",T.rate=.8,speechSynthesis.speak(T)}};return g?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center",children:e.jsxs(c.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center",children:[e.jsx(c.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Generando tu sesi√≥n personalizada..."}),e.jsxs("p",{className:"text-gray-600",children:["Creando ejercicios espec√≠ficos para tu nivel ",a.currentLevel]})]})}):i.length?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50",children:[e.jsx("header",{className:"bg-white/80 backdrop-blur-lg border-b border-gray-200/50 sticky top-0 z-40",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:r,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(me,{className:"w-5 h-5"}),e.jsx("span",{children:"Salir"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsxs("span",{children:[y,"/",i.length]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(He,{className:"w-4 h-4"}),e.jsxs("span",{children:[A," min"]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:"Progreso"}),e.jsxs("span",{children:[n+1," de ",i.length]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx(c.div,{initial:{width:0},animate:{width:`${(n+1)/i.length*100}%`},transition:{duration:.3},className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full"})})]})]})}),e.jsx("main",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsx(W,{mode:"wait",children:e.jsx(c.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-gray-200/50",children:[I.situation&&e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-blue-50 rounded-xl p-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Situaci√≥n:"}),e.jsx("p",{className:"text-blue-700",children:I.situation})]}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:I.question}),e.jsx("button",{onClick:()=>wt(I.question),className:"p-2 text-gray-400 hover:text-blue-500 transition-colors",children:e.jsx(We,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-gray-600",children:"Selecciona la respuesta correcta:"})]}),e.jsx("div",{className:"space-y-3 mb-8",children:I.options.map((w,T)=>{const L=m===T,$=T===I.correct_answer,be=d;let F="w-full p-4 text-left rounded-xl border-2 transition-all duration-300 ";return be?$?F+="border-green-500 bg-green-50 text-green-800":L&&!$?F+="border-red-500 bg-red-50 text-red-800":F+="border-gray-200 bg-gray-100 text-gray-600":F+=L?"border-blue-500 bg-blue-50 text-blue-800":"border-gray-200 bg-gray-50 hover:border-gray-300 hover:bg-gray-100",e.jsx(c.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2+T*.1},onClick:()=>yt(T),disabled:d,className:F,whileHover:d?{}:{scale:1.01},whileTap:d?{}:{scale:.99},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-lg font-bold",children:[String.fromCharCode(65+T),")"]}),e.jsx("span",{className:"text-lg",children:w})]}),be&&e.jsxs("div",{children:[$&&e.jsx(X,{className:"w-6 h-6 text-green-500"}),L&&!$&&e.jsx(Ne,{className:"w-6 h-6 text-red-500"})]})]})},T)})}),e.jsx(W,{children:d&&e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`rounded-xl p-6 mb-6 ${m===I.correct_answer?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"mt-1",children:m===I.correct_answer?e.jsx(X,{className:"w-6 h-6 text-green-500"}):e.jsx(Ne,{className:"w-6 h-6 text-red-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-bold mb-2 ${m===I.correct_answer?"text-green-800":"text-red-800"}`,children:m===I.correct_answer?"üéâ ¬°Correcto! +10 XP":"‚ùå Incorrecto, pero +3 XP por intentar"}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Ke,{className:"w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Explicaci√≥n:"})," ",I.explanation]})]})]})]})})}),d&&e.jsx(c.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},onClick:vt,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300",whileHover:{scale:1.01},whileTap:{scale:.99},children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{children:ge?"Completar Sesi√≥n":"Siguiente Pregunta"}),e.jsx(ss,{className:"w-5 h-5"})]})})]})},n)})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center",children:e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-md mx-4",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üòï"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No se pudieron generar ejercicios"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Verifica tu conexi√≥n y API key, luego intenta de nuevo."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:fe,className:"w-full bg-blue-500 text-white py-3 rounded-xl font-medium hover:bg-blue-600 transition-colors",children:[e.jsx(ts,{className:"w-5 h-5 inline mr-2"}),"Intentar de nuevo"]}),e.jsx("button",{onClick:r,className:"w-full bg-gray-200 text-gray-800 py-3 rounded-xl font-medium hover:bg-gray-300 transition-colors",children:"Volver al Dashboard"})]})]})})},Pa=({userProgress:a,onBack:t})=>{const[s,r]=x.useState("week"),[i,o]=x.useState("overview"),n=[{day:"Lun",exercises:12,accuracy:85,xp:120},{day:"Mar",exercises:8,accuracy:78,xp:95},{day:"Mi√©",exercises:15,accuracy:92,xp:150},{day:"Jue",exercises:10,accuracy:88,xp:110},{day:"Vie",exercises:18,accuracy:94,xp:180},{day:"S√°b",exercises:6,accuracy:75,xp:70},{day:"Dom",exercises:9,accuracy:82,xp:95}],u=[{level:"A1",progress:100,color:"#10B981"},{level:"A2",progress:65,color:"#3B82F6"},{level:"B1",progress:25,color:"#8B5CF6"},{level:"B2",progress:0,color:"#6B7280"}],m=[{skill:"Saludos",mastery:95,exercises:45},{skill:"Necesidades B√°sicas",mastery:88,exercises:32},{skill:"Cortes√≠a",mastery:92,exercises:28},{skill:"Informaci√≥n Personal",mastery:78,exercises:24},{skill:"Rutinas Diarias",mastery:65,exercises:18}],p={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,staggerChildren:.1}}},d={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return e.jsxs(c.div,{variants:p,initial:"hidden",animate:"visible",className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50",children:[e.jsx(c.header,{variants:d,className:"bg-white/80 backdrop-blur-lg border-b border-gray-200/50 sticky top-0 z-40",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("button",{onClick:t,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(me,{className:"w-5 h-5"}),e.jsx("span",{children:"Volver al Dashboard"})]}),e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Mi Progreso"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("select",{value:s,onChange:l=>r(l.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"week",children:"Esta semana"}),e.jsx("option",{value:"month",children:"Este mes"}),e.jsx("option",{value:"all",children:"Todo el tiempo"})]})})]}),e.jsx("div",{className:"flex space-x-8 border-b border-gray-200",children:[{id:"overview",label:"Resumen",icon:Xe},{id:"levels",label:"Niveles",icon:as},{id:"skills",label:"Habilidades",icon:V},{id:"achievements",label:"Logros",icon:rs}].map(l=>{const g=l.icon;return e.jsxs("button",{onClick:()=>o(l.id),className:`flex items-center space-x-2 py-4 border-b-2 transition-colors ${i===l.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:l.label})]},l.id)})})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i==="overview"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs(c.div,{variants:d,className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(H,{title:"Total XP",value:a.totalXP.toLocaleString(),icon:e.jsx(qe,{className:"w-6 h-6"}),color:"yellow",change:"+12%",period:"esta semana"}),e.jsx(H,{title:"Ejercicios",value:a.totalExercises.toString(),icon:e.jsx(is,{className:"w-6 h-6"}),color:"blue",change:"+8%",period:"esta semana"}),e.jsx(H,{title:"Precisi√≥n",value:`${Math.round(a.overallAccuracy*100)}%`,icon:e.jsx(V,{className:"w-6 h-6"}),color:"green",change:"+3%",period:"esta semana"}),e.jsx(H,{title:"Racha",value:`${a.currentStreak} d√≠as`,icon:e.jsx(G,{className:"w-6 h-6"}),color:"orange",change:"Activa",period:`r√©cord: ${a.longestStreak}`})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(c.div,{variants:d,className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-200/50",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Progreso Semanal"}),e.jsx(Ae,{width:"100%",height:300,children:e.jsxs(xs,{data:n,children:[e.jsx(Se,{strokeDasharray:"3 3"}),e.jsx(Ee,{dataKey:"day"}),e.jsx(Ie,{}),e.jsx(Te,{}),e.jsx(Ce,{type:"monotone",dataKey:"exercises",stroke:"#3B82F6",strokeWidth:3,dot:{fill:"#3B82F6",strokeWidth:2,r:4}}),e.jsx(Ce,{type:"monotone",dataKey:"accuracy",stroke:"#10B981",strokeWidth:3,dot:{fill:"#10B981",strokeWidth:2,r:4}})]})})]}),e.jsxs(c.div,{variants:d,className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-200/50",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Distribuci√≥n de XP"}),e.jsx(Ae,{width:"100%",height:300,children:e.jsxs(gs,{data:n,children:[e.jsx(Se,{strokeDasharray:"3 3"}),e.jsx(Ee,{dataKey:"day"}),e.jsx(Ie,{}),e.jsx(Te,{}),e.jsx(fs,{dataKey:"xp",fill:"url(#xpGradient)",radius:[4,4,0,0]}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"xpGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8B5CF6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#8B5CF6",stopOpacity:.3})]})})]})})]})]})]}),i==="levels"&&e.jsx(c.div,{variants:d,className:"space-y-8",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-200/50",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Progreso por Niveles"}),e.jsx("div",{className:"space-y-6",children:u.map((l,g)=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:l.color}}),e.jsxs("span",{className:"font-semibold text-lg",children:["Nivel ",l.level]}),l.level===a.currentLevel&&e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:"Actual"})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[l.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx(c.div,{initial:{width:0},animate:{width:`${l.progress}%`},transition:{duration:1,delay:g*.2},className:"h-3 rounded-full",style:{backgroundColor:l.color}})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Ejercicios:"})," ",a.levelProgress[l.level]?.exercisesCompleted||0]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Precisi√≥n:"})," ",Math.round((a.levelProgress[l.level]?.accuracy||0)*100),"%"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"XP:"})," ",a.levelProgress[l.level]?.xpEarned||0]})]})]},l.level))})]})}),i==="skills"&&e.jsx(c.div,{variants:d,className:"space-y-8",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-200/50",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Dominio de Habilidades"}),e.jsx("div",{className:"space-y-6",children:m.map((l,g)=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold",children:l.skill}),e.jsxs("div",{className:"text-right text-sm text-gray-600",children:[e.jsxs("div",{children:[l.mastery,"% dominada"]}),e.jsxs("div",{children:[l.exercises," ejercicios"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx(c.div,{initial:{width:0},animate:{width:`${l.mastery}%`},transition:{duration:1,delay:g*.1},className:`h-3 rounded-full ${l.mastery>=90?"bg-green-500":l.mastery>=70?"bg-blue-500":l.mastery>=50?"bg-yellow-500":"bg-red-500"}`})})]},l.skill))})]})}),i==="achievements"&&e.jsx(c.div,{variants:d,className:"space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(U,{title:"Primer Paso",description:"Completa tu primera sesi√≥n",icon:"üéØ",unlocked:!0,date:"Hace 5 d√≠as"}),e.jsx(U,{title:"Saludador Experto",description:"Domina los saludos b√°sicos",icon:"üëã",unlocked:!0,date:"Hace 3 d√≠as"}),e.jsx(U,{title:"Racha de Fuego",description:"Mant√©n una racha de 7 d√≠as",icon:"üî•",unlocked:a.currentStreak>=7,date:a.currentStreak>=7?"Hoy":void 0}),e.jsx(U,{title:"Maestro A1",description:"Completa el nivel A1",icon:"üèÜ",unlocked:!1}),e.jsx(U,{title:"Precisi√≥n Perfecta",description:"Logra 95% de precisi√≥n",icon:"üéØ",unlocked:a.overallAccuracy>=.95}),e.jsx(U,{title:"Explorador B1",description:"Desbloquea el nivel B1",icon:"üó∫Ô∏è",unlocked:!1})]})})]})]})},H=({title:a,value:t,icon:s,color:r,change:i,period:o})=>{const n={yellow:"from-yellow-400 to-orange-500 text-yellow-600",blue:"from-blue-400 to-blue-600 text-blue-600",green:"from-green-400 to-emerald-500 text-green-600",orange:"from-orange-400 to-red-500 text-orange-600"};return e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-200/50",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`p-3 rounded-lg bg-gradient-to-r ${n[r]}`,children:e.jsx("div",{className:"text-white",children:s})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:t}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:a}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[e.jsx("span",{className:"text-green-600 font-medium",children:i}),e.jsx("span",{className:"text-gray-500",children:o})]})]})},U=({title:a,description:t,icon:s,unlocked:r,date:i})=>e.jsx("div",{className:`
    p-6 rounded-xl border-2 transition-all duration-300
    ${r?"bg-gradient-to-br from-yellow-50 to-orange-50 border-yellow-300 shadow-lg":"bg-gray-50 border-gray-200 opacity-60"}
  `,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:r?s:"üîí"}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:a}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:t}),r&&i&&e.jsxs("p",{className:"text-xs text-green-600 font-medium",children:["Desbloqueado ",i]}),!r&&e.jsx("p",{className:"text-xs text-gray-500",children:"Bloqueado"})]})}),ka=({userProgress:a,onBack:t,onUpdateProgress:s})=>{const[r,i]=x.useState("profile"),[o,n]=x.useState(!1),[u,m]=x.useState(!1),[p,d]=x.useState(a.preferences),[l,g]=x.useState(""),v=async()=>{try{n(!0);const f={...a,preferences:p};s(f),S.success("Preferencias guardadas exitosamente")}catch(f){console.error("Error saving preferences:",f),S.error("Error guardando preferencias")}finally{n(!1)}},h=async()=>{if(!l.trim()){S.error("Ingresa una API Key v√°lida");return}try{n(!0),localStorage.setItem("gemini_api_key",l);const f={...a,apiKey:btoa(l)};s(f),S.success("API Key actualizada exitosamente"),g("")}catch(f){console.error("Error updating API key:",f),S.error("Error actualizando API Key")}finally{n(!1)}},y=async()=>{try{await Xt(M),S.success("Sesi√≥n cerrada exitosamente")}catch(f){console.error("Error signing out:",f),S.error("Error cerrando sesi√≥n")}},b=async()=>{if(window.confirm("¬øEst√°s seguro de que quieres eliminar tu cuenta? Esta acci√≥n no se puede deshacer."))try{n(!0),S.success("Cuenta eliminada exitosamente")}catch(j){console.error("Error deleting account:",j),S.error("Error eliminando cuenta")}finally{n(!1)}},A={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,staggerChildren:.1}}},C={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return e.jsxs(c.div,{variants:A,initial:"hidden",animate:"visible",className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50",children:[e.jsx(c.header,{variants:C,className:"bg-white/80 backdrop-blur-lg border-b border-gray-200/50 sticky top-0 z-40",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("button",{onClick:t,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(me,{className:"w-5 h-5"}),e.jsx("span",{children:"Volver al Dashboard"})]}),e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Configuraci√≥n"}),e.jsx("div",{className:"w-32"})," "]}),e.jsx("div",{className:"flex space-x-8 border-b border-gray-200",children:[{id:"profile",label:"Perfil",icon:ns},{id:"preferences",label:"Preferencias",icon:ze},{id:"api",label:"API Key",icon:$e},{id:"privacy",label:"Privacidad",icon:ne}].map(f=>{const j=f.icon;return e.jsxs("button",{onClick:()=>i(f.id),className:`flex items-center space-x-2 py-4 border-b-2 transition-colors ${r===f.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:f.label})]},f.id)})})]})}),e.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200/50 overflow-hidden",children:[r==="profile"&&e.jsxs(c.div,{variants:C,className:"p-8 space-y-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Informaci√≥n del Perfil"}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-2xl",children:a.email.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:a.email.split("@")[0]}),e.jsx("p",{className:"text-gray-600",children:a.email}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Miembro desde ",new Date(a.createdAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 p-6 rounded-xl border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Nivel Actual"}),e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:a.currentLevel})]}),e.jsxs("div",{className:"bg-green-50 p-6 rounded-xl border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Total XP"}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:a.totalXP.toLocaleString()})]}),e.jsxs("div",{className:"bg-purple-50 p-6 rounded-xl border border-purple-200",children:[e.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"Racha Actual"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-700",children:[a.currentStreak," d√≠as"]})]})]})]}),r==="preferences"&&e.jsxs(c.div,{variants:C,className:"p-8 space-y-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Preferencias"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(V,{className:"w-4 h-4 inline mr-2"}),"Meta diaria de ejercicios"]}),e.jsxs("select",{value:p.dailyGoal,onChange:f=>d({...p,dailyGoal:parseInt(f.target.value)}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:10,children:"10 ejercicios"}),e.jsx("option",{value:20,children:"20 ejercicios"}),e.jsx("option",{value:30,children:"30 ejercicios"}),e.jsx("option",{value:50,children:"50 ejercicios"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(os,{className:"w-4 h-4 inline mr-2"}),"Recordatorio diario"]}),e.jsx("input",{type:"time",value:p.reminderTime||"19:00",onChange:f=>d({...p,reminderTime:f.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:p.soundEnabled,onChange:f=>d({...p,soundEnabled:f.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx(We,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Habilitar sonidos y pronunciaci√≥n"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:p.animationsEnabled,onChange:f=>d({...p,animationsEnabled:f.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx(ls,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Habilitar animaciones"})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(cs,{className:"w-4 h-4 inline mr-2"}),"Idioma de explicaciones"]}),e.jsxs("select",{value:p.explanationLanguage,onChange:f=>d({...p,explanationLanguage:f.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"es",children:"Espa√±ol"}),e.jsx("option",{value:"en",children:"English"})]})]}),e.jsxs("button",{onClick:v,disabled:o,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50",children:[e.jsx(ds,{className:"w-5 h-5 inline mr-2"}),o?"Guardando...":"Guardar Preferencias"]})]})]}),r==="api"&&e.jsxs(c.div,{variants:C,className:"p-8 space-y-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Gesti√≥n de API Key"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"API Key Actual"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:u?"text":"password",value:u?atob(a.apiKey):"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",readOnly:!0,className:"flex-1 p-3 bg-white border border-blue-300 rounded-lg font-mono text-sm"}),e.jsx("button",{onClick:()=>m(!u),className:"p-3 text-blue-600 hover:text-blue-800 transition-colors",children:u?e.jsx(de,{className:"w-5 h-5"}):e.jsx(ue,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-blue-700 mt-2",children:"Tu API Key est√° segura y encriptada. Solo se usa para generar ejercicios personalizados."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nueva API Key (opcional)"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("input",{type:"password",value:l,onChange:f=>g(f.target.value),placeholder:"AIzaSy...",className:"flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono"}),e.jsx("button",{onClick:h,disabled:o||!l.trim(),className:"bg-blue-500 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50",children:"Actualizar"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Solo actualiza tu API Key si necesitas cambiarla o si la actual no funciona."})]})]})]}),r==="privacy"&&e.jsxs(c.div,{variants:C,className:"p-8 space-y-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Privacidad y Seguridad"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"üîí Tus Datos est√°n Seguros"}),e.jsxs("ul",{className:"text-sm text-green-800 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Tu API Key se almacena encriptada"}),e.jsx("li",{children:"‚Ä¢ Tus ejercicios se generan en tiempo real"}),e.jsx("li",{children:"‚Ä¢ No compartimos tus datos con terceros"}),e.jsx("li",{children:"‚Ä¢ Puedes exportar o eliminar tus datos en cualquier momento"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:y,className:"w-full flex items-center justify-center space-x-2 bg-gray-100 text-gray-800 py-3 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:[e.jsx(us,{className:"w-5 h-5"}),e.jsx("span",{children:"Cerrar Sesi√≥n"})]}),e.jsxs("button",{onClick:b,disabled:o,className:"w-full flex items-center justify-center space-x-2 bg-red-100 text-red-800 py-3 rounded-xl font-medium hover:bg-red-200 transition-colors disabled:opacity-50",children:[e.jsx(ms,{className:"w-5 h-5"}),e.jsx("span",{children:"Eliminar Cuenta"})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:"‚ö†Ô∏è Eliminar Cuenta"}),e.jsx("p",{className:"text-sm text-yellow-800",children:"Al eliminar tu cuenta se borrar√°n permanentemente todos tus datos, progreso, y configuraciones. Esta acci√≥n no se puede deshacer."})]})]})]})]})})]})},La=()=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center",children:e.jsxs(c.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center",children:[e.jsx(c.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"English Master"}),e.jsx("p",{className:"text-gray-600",children:"Cargando tu experiencia personalizada..."})]})});class Oa extends Fe.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,s){console.error("English Master Error:",t,s)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md mx-auto text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üòï"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Algo sali√≥ mal"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Ha ocurrido un error inesperado. Por favor recarga la p√°gina."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-500 text-white px-6 py-3 rounded-xl font-medium hover:bg-blue-600 transition-colors",children:"Recargar P√°gina"})]})}):this.props.children}}const Ra=()=>{const[a,t]=x.useState(null),[s,r]=x.useState(null),[i,o]=x.useState(""),[n,u]=x.useState(!0),[m,p]=x.useState("dashboard"),d=new ee;x.useEffect(()=>Wt(M,async h=>{try{if(h){console.log("üë§ Usuario autenticado:",h.email),t(h);let y=await d.getUserProgress(h.uid);if(y){console.log("üìä Progreso del usuario cargado");const b=atob(y.apiKey);o(b)}else{console.log("üÜï Nuevo usuario detectado");const b=localStorage.getItem("gemini_api_key");b&&(console.log("üîë API Key encontrada, inicializando progreso..."),y=await d.initializeUserProgress(h.uid,h.email,b),o(b))}r(y)}else console.log("üë§ Usuario no autenticado"),t(null),r(null),o("")}catch(y){console.error("‚ùå Error en inicializaci√≥n:",y)}finally{u(!1)}}),[]);const l=async v=>{if(!(!a||!s))try{console.log("üìä Completando sesi√≥n:",v);const h=await d.updateProgress(a.uid,v);r(h),h.currentLevel!==s.currentLevel&&console.log(`üéâ LEVEL UP: ${s.currentLevel} ‚Üí ${h.currentLevel}`),p("dashboard")}catch(h){console.error("‚ùå Error completando sesi√≥n:",h)}},g=async v=>{if(a)try{console.log("üîë Configurando API Key para usuario:",a.email);const h=await d.initializeUserProgress(a.uid,a.email,v);o(v),r(h),console.log("‚úÖ Usuario inicializado exitosamente")}catch(h){console.error("‚ùå Error configurando API Key:",h)}};return n?e.jsx(La,{}):a?!i||!s?e.jsx(Ea,{onComplete:g}):e.jsxs(Oa,{children:[e.jsx(At,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50",children:e.jsx(W,{mode:"wait",children:e.jsxs(St,{children:[e.jsx(ye,{path:"/",element:m==="dashboard"?e.jsx(Ia,{userProgress:s,onStartSession:()=>p("session"),onViewProgress:()=>p("progress"),onSettings:()=>p("settings")}):m==="session"?e.jsx(_a,{userProgress:s,apiKey:i,onComplete:l,onExit:()=>p("dashboard")}):m==="progress"?e.jsx(Pa,{userProgress:s,onBack:()=>p("dashboard")}):e.jsx(ka,{userProgress:s,onBack:()=>p("dashboard"),onUpdateProgress:r})}),e.jsx(ye,{path:"*",element:e.jsx(Et,{to:"/",replace:!0})})]})})})}),e.jsx(ps,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]}):e.jsx(Aa,{})};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(a=>{console.log("SW registered: ",a)}).catch(a=>{console.log("SW registration failed: ",a)})});console.log("üìä Performance monitoring enabled");window.addEventListener("error",a=>{console.error("Global error:",a.error)});window.addEventListener("unhandledrejection",a=>{console.error("Unhandled promise rejection:",a.reason)});oe.createRoot(document.getElementById("root")).render(e.jsx(Fe.StrictMode,{children:e.jsx(Ra,{})}));
//# sourceMappingURL=index-PdlLPSjE.js.map

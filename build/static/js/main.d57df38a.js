/*! For license information please see main.d57df38a.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!S.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:x.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function k(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+T(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),k(o,t,i,"",function(e){return e})):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(A,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+T(a=e[c],c);l+=k(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=k(a=a.value,t,i,u=s+T(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return k(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return N(e,function(){t++}),t},toArray:function(e){return N(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=x.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,O(E);else{var t=r(u);null!==t&&D(_,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,y(C),C=-1),p=!0;var s=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!k());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&D(_,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,I=null,C=-1,A=5,T=-1;function k(){return!(t.unstable_now()-T<A)}function N(){if(null!==I){var e=t.unstable_now();T=e;var n=!0;try{n=I(!0,e)}finally{n?x():(S=!1,I=null)}}else S=!1}if("function"===typeof b)x=function(){b(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=N,x=function(){P.postMessage(null)}}else x=function(){v(N,0)};function O(e){I=e,S||(S=!0,x())}function D(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(C),C=-1):g=!0,D(_,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,O(E))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),A=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,j=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var F=!1;function V(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function q(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case E:return"Portal";case I:return"Profiler";case S:return"StrictMode";case k:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,xe=null,Se=null;function Ie(e){if(e=_i(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=xi(t),Ee(e.stateNode,e.type,t))}}function Ce(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Ae(){if(xe){var e=xe,t=Se;if(Se=xe=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Te(e,t){return e(t)}function ke(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Te(e,t,n)}finally{Ne=!1,(null!==xe||null!==Se)&&(ke(),Ae())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Oe=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,je=null,Ue=!1,Fe=null,Ve={onError:function(e){Me=!0,je=e}};function qe(e,t,n,r,i,s,o,a,l){Me=!1,je=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(s(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,Xe=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=dt(a):0!==(s&=o)&&(r=dt(s))}else 0!==(o=n&~i)?r=dt(o):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,xt,St,It,Ct=!1,At=[],Tt=null,Nt=null,Rt=null,Pt=new Map,Ot=new Map,Dt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function jt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=wi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void It(e.priority,function(){xt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function qt(){Ct=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==Rt&&Ft(Rt)&&(Rt=null),Pt.forEach(Vt),Ot.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,qt)))}function Bt(e){function t(t){return zt(t,e)}if(0<At.length){zt(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&zt(Tt,e),null!==Nt&&zt(Nt,e),null!==Rt&&zt(Rt,e),Pt.forEach(t),Ot.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ut(n),null===n.blockedOn&&Dt.shift()}var Ht=w.ReactCurrentBatchConfig,Gt=!0;function Wt(e,t,n,r){var i=bt,s=Ht.transition;Ht.transition=null;try{bt=1,Qt(e,t,n,r)}finally{bt=i,Ht.transition=s}}function Kt(e,t,n,r){var i=bt,s=Ht.transition;Ht.transition=null;try{bt=4,Qt(e,t,n,r)}finally{bt=i,Ht.transition=s}}function Qt(e,t,n,r){if(Gt){var i=Jt(e,t,n,r);if(null===i)Wr(e,t,r,Yt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=jt(Tt,e,t,n,r,i),!0;case"dragenter":return Nt=jt(Nt,e,t,n,r,i),!0;case"mouseover":return Rt=jt(Rt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,jt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ot.set(s,jt(Ot.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var s=_i(i);if(null!==s&&_t(s),null===(s=Jt(e,t,n,r))&&Wr(e,t,r,Yt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Yt=null;function Jt(e,t,n,r){if(Yt=null,null!==(e=wi(e=_e(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Zt=null,en=null;function tn(){if(en)return en;var e,t,n=Zt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return en=i.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function sn(){return!1}function on(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rn:sn,this.isPropagationStopped=sn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var an,ln,un,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=on(dn),fn=j({},dn,{view:0,detail:0}),pn=on(fn),mn=j({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(an=e.screenX-un.screenX,ln=e.screenY-un.screenY):ln=an=0,un=e),an)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),gn=on(mn),vn=on(j({},mn,{dataTransfer:0})),yn=on(j({},fn,{relatedTarget:0})),bn=on(j({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=j({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=on(wn),En=on(j({},dn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function An(){return Cn}var Tn=j({},fn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=on(Tn),Nn=on(j({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=on(j({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Pn=on(j({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=j({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=on(On),Ln=[9,13,27,32],Mn=u&&"CompositionEvent"in window,jn=null;u&&"documentMode"in document&&(jn=document.documentMode);var Un=u&&"TextEvent"in window&&!jn,Fn=u&&(!Mn||jn&&8<jn&&11>=jn),Vn=String.fromCharCode(32),qn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ce(r),0<(t=Qr(t,"onChange")).length&&(n=new hn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Yn=null;function Jn(e){Vr(e,0)}function Xn(e){if(K(Ei(e)))return e}function $n(e,t){if("change"===e)return t}var Zn=!1;if(u){var er;if(u){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"===typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Qn&&(Qn.detachEvent("onpropertychange",ir),Yn=Qn=null)}function ir(e){if("value"===e.propertyName&&Xn(Yn)){var t=[];Kn(t,Yn,e,_e(e)),Re(Jn,t)}}function sr(e,t,n){"focusin"===e?(rr(),Yn=n,(Qn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Yn)}function ar(e,t){if("click"===e)return Xn(t)}function lr(e,t){if("input"===e||"change"===e)return Xn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!cr(e[i],t[i]))return!1}return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&mr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=hr(n,s);var o=hr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=u&&"documentMode"in document&&11>=document.documentMode,yr=null,br=null,wr=null,_r=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&ur(wr,r)||(wr=r,0<(r=Qr(br,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Ir={},Cr={};function Ar(e){if(Ir[e])return Ir[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Ir[e]=n[t];return e}u&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Tr=Ar("animationend"),kr=Ar("animationiteration"),Nr=Ar("animationstart"),Rr=Ar("transitionend"),Pr=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Pr.set(e,t),l(t,[e])}for(var Lr=0;Lr<Or.length;Lr++){var Mr=Or[Lr];Dr(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Dr(Tr,"onAnimationEnd"),Dr(kr,"onAnimationIteration"),Dr(Nr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Rr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ur=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(qe.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=je;Me=!1,je=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function qr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Gr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Gr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[Br]){e[Br]=!0,o.forEach(function(t){"selectionchange"!==t&&(Ur.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,zr("selectionchange",!1,t))}}function Gr(e,t,n,r){switch(Xt(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Qt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=wi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Re(function(){var r=s,i=_e(n),o=[];e:{var a=Pr.get(e);if(void 0!==a){var l=hn,c=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":c="focus",l=yn;break;case"focusout":c="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case Tr:case kr:case Nr:l=bn;break;case Rr:l=Pn;break;case"scroll":l=pn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Pe(p,h))&&u.push(Kr(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!wi(c)&&!c[gi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?wi(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=gn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Nn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:Ei(l),f=null==c?a:Ei(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,wi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Yr(f))p++;for(f=0,m=h;m;m=Yr(m))f++;for(;0<p-f;)u=Yr(u),p--;for(;0<f-p;)h=Yr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Yr(u),h=Yr(h)}u=null}else u=null;null!==l&&Jr(o,a,l,u,!1),null!==c&&null!==d&&Jr(o,d,c,u,!0)}if("select"===(l=(a=r?Ei(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=$n;else if(Wn(a))if(Zn)g=lr;else{g=or;var v=sr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ar);switch(g&&(g=g(e,r))?Kn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?Ei(r):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(yr=v,br=r,wr=null);break;case"focusout":wr=br=yr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Er(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":Er(o,n,i)}var y;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(y=tn()):(Zt="value"in($t=i)?$t.value:$t.textContent,Hn=!0)),0<(v=Qr(r,b)).length&&(b=new En(b,e,null,n,i),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=Bn(n))&&(b.data=y))),(y=Un?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(qn=!0,Vn);case"textInput":return(e=t.data)===Vn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Mn&&zn(e,t)?(e=tn(),en=Zt=$t=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Vr(o,t)})}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Kr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Kr(e,s,i))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Jr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,s))&&o.unshift(Kr(n,l,a)):i||null!=(l=Pe(n,s))&&o.push(Kr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace($r,"")}function ei(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(s(425))}function ti(){}var ni=null,ri=null;function ii(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var si="function"===typeof setTimeout?setTimeout:void 0,oi="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,li="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ci)}:si;function ci(e){setTimeout(function(){throw e})}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function di(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function hi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),pi="__reactFiber$"+fi,mi="__reactProps$"+fi,gi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,bi="__reactHandles$"+fi;function wi(e){var t=e[pi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gi]||n[pi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=hi(e);null!==e;){if(n=e[pi])return n;e=hi(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[pi]||e[gi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ei(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xi(e){return e[mi]||null}var Si=[],Ii=-1;function Ci(e){return{current:e}}function Ai(e){0>Ii||(e.current=Si[Ii],Si[Ii]=null,Ii--)}function Ti(e,t){Ii++,Si[Ii]=e.current,e.current=t}var ki={},Ni=Ci(ki),Ri=Ci(!1),Pi=ki;function Oi(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Li(){Ai(Ri),Ai(Ni)}function Mi(e,t,n){if(Ni.current!==ki)throw Error(s(168));Ti(Ni,t),Ti(Ri,n)}function ji(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,B(e)||"Unknown",i));return j({},n,r)}function Ui(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Pi=Ni.current,Ti(Ni,e),Ti(Ri,Ri.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=ji(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ai(Ri),Ai(Ni),Ti(Ni,e)):Ai(Ri),Ti(Ri,n)}var Vi=null,qi=!1,zi=!1;function Bi(e){null===Vi?Vi=[e]:Vi.push(e)}function Hi(){if(!zi&&null!==Vi){zi=!0;var e=0,t=bt;try{var n=Vi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,qi=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),Ke(Ze,Hi),i}finally{bt=t,zi=!1}}return null}var Gi=[],Wi=0,Ki=null,Qi=0,Yi=[],Ji=0,Xi=null,$i=1,Zi="";function es(e,t){Gi[Wi++]=Qi,Gi[Wi++]=Ki,Ki=e,Qi=t}function ts(e,t,n){Yi[Ji++]=$i,Yi[Ji++]=Zi,Yi[Ji++]=Xi,Xi=e;var r=$i;e=Zi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Zi=s+e}else $i=1<<s|n<<i|r,Zi=e}function ns(e){null!==e.return&&(es(e,1),ts(e,1,0))}function rs(e){for(;e===Ki;)Ki=Gi[--Wi],Gi[Wi]=null,Qi=Gi[--Wi],Gi[Wi]=null;for(;e===Xi;)Xi=Yi[--Ji],Yi[Ji]=null,Zi=Yi[--Ji],Yi[Ji]=null,$i=Yi[--Ji],Yi[Ji]=null}var is=null,ss=null,os=!1,as=null;function ls(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function cs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,is=e,ss=di(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,is=e,ss=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:$i,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,is=e,ss=null,!0);default:return!1}}function us(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ds(e){if(os){var t=ss;if(t){var n=t;if(!cs(e,t)){if(us(e))throw Error(s(418));t=di(n.nextSibling);var r=is;t&&cs(e,t)?ls(r,n):(e.flags=-4097&e.flags|2,os=!1,is=e)}}else{if(us(e))throw Error(s(418));e.flags=-4097&e.flags|2,os=!1,is=e}}}function hs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;is=e}function fs(e){if(e!==is)return!1;if(!os)return hs(e),os=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ii(e.type,e.memoizedProps)),t&&(t=ss)){if(us(e))throw ps(),Error(s(418));for(;t;)ls(e,t),t=di(t.nextSibling)}if(hs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ss=di(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ss=null}}else ss=is?di(e.stateNode.nextSibling):null;return!0}function ps(){for(var e=ss;e;)e=di(e.nextSibling)}function ms(){ss=is=null,os=!1}function gs(e){null===as?as=[e]:as.push(e)}var vs=w.ReactCurrentBatchConfig;function ys(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var bs=Ci(null),ws=null,_s=null,Es=null;function xs(){Es=_s=ws=null}function Ss(e){var t=bs.current;Ai(bs),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Cs(e,t){ws=e,Es=_s=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ea=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(Es!==e)if(e={context:e,memoizedValue:t,next:null},null===_s){if(null===ws)throw Error(s(308));_s=e,ws.dependencies={lanes:0,firstContext:e}}else _s=_s.next=e;return t}var Ts=null;function ks(e){null===Ts?Ts=[e]:Ts.push(e)}function Ns(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,ks(t)):(n.next=i.next,i.next=n),t.interleaved=n,Rs(e,r)}function Rs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ps=!1;function Os(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ds(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ms(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Rl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Rs(e,n)}return null===(i=r.interleaved)?(t.next=t,ks(r)):(t.next=i.next,i.next=t),r.interleaved=t,Rs(e,n)}function js(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Us(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;Ps=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=j({},d,h);break e;case 2:Ps=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=d}}function Vs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var qs=(new r.Component).refs;function zs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bs={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=rc(),i=ic(e),s=Ls(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ms(e,s,i))&&(sc(t,e,i,r),js(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=rc(),i=ic(e),s=Ls(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ms(e,s,i))&&(sc(t,e,i,r),js(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=rc(),r=ic(e),i=Ls(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ms(e,i,r))&&(sc(t,e,r,n),js(t,e,r))}};function Hs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,s))}function Gs(e,t,n){var r=!1,i=ki,s=t.contextType;return"object"===typeof s&&null!==s?s=As(s):(i=Di(t)?Pi:Ni.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Oi(e,i):ki),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ws(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bs.enqueueReplaceState(t,t.state,null)}function Ks(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=qs,Os(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=As(s):(s=Di(t)?Pi:Ni.current,i.context=Oi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(zs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Qs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===qs&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Js(e){return(0,e._init)(e._payload)}function Xs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===x?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&Js(s)===t.type)?((r=i(t,n.props)).ref=Qs(e,t,n),r.return=e,r):((r=jc(n.type,n.key,n.props,null,e.mode,r)).ref=Qs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Uc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=jc(t.type,t.key,t.props,null,e.mode,n)).ref=Qs(e,null,t),n.return=e,n;case E:return(t=qc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Uc(t,e.mode,n,null)).return=e,t;Ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);Ys(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);Ys(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,a[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),s=o(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===a.length)return n(i,d),os&&es(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(s=o(d,s,m),null===u?c=d:u.sibling=d,u=d);return os&&es(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),os&&es(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),os&&es(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(a=o(y,a,g),null===d?u=y:d.sibling=y,d=y);return os&&es(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(i,e)}),os&&es(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===x){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Js(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Qs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===x?((s=Uc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=jc(o.type,o.key,o.props,null,r.mode,l)).ref=Qs(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=qc(o,r.mode,l)).return=r,r=s}return a(r);case P:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);Ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Vc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var $s=Xs(!0),Zs=Xs(!1),eo={},to=Ci(eo),no=Ci(eo),ro=Ci(eo);function io(e){if(e===eo)throw Error(s(174));return e}function so(e,t){switch(Ti(ro,t),Ti(no,e),Ti(to,eo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ai(to),Ti(to,t)}function oo(){Ai(to),Ai(no),Ai(ro)}function ao(e){io(ro.current);var t=io(to.current),n=le(t,e.type);t!==n&&(Ti(no,e),Ti(to,n))}function lo(e){no.current===e&&(Ai(to),Ai(no))}var co=Ci(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ho=[];function fo(){for(var e=0;e<ho.length;e++)ho[e]._workInProgressVersionPrimary=null;ho.length=0}var po=w.ReactCurrentDispatcher,mo=w.ReactCurrentBatchConfig,go=0,vo=null,yo=null,bo=null,wo=!1,_o=!1,Eo=0,xo=0;function So(){throw Error(s(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function Co(e,t,n,r,i,o){if(go=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,po.current=null===e||null===e.memoizedState?ca:ua,e=n(r,i),_o){o=0;do{if(_o=!1,Eo=0,25<=o)throw Error(s(301));o+=1,bo=yo=null,t.updateQueue=null,po.current=da,e=n(r,i)}while(_o)}if(po.current=la,t=null!==yo&&null!==yo.next,go=0,bo=yo=vo=null,wo=!1,t)throw Error(s(300));return e}function Ao(){var e=0!==Eo;return Eo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===bo?vo.memoizedState=bo=e:bo=bo.next=e,bo}function ko(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===bo?vo.memoizedState:bo.next;if(null!==t)bo=t,yo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===bo?vo.memoizedState=bo=e:bo=bo.next=e}return bo}function No(e,t){return"function"===typeof t?t(e):t}function Ro(e){var t=ko(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((go&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,vo.lanes|=d,Fl|=d}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,cr(r,t.memoizedState)||(Ea=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Po(e){var t=ko(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);cr(o,t.memoizedState)||(Ea=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Oo(){}function Do(e,t){var n=vo,r=ko(),i=t(),o=!cr(r.memoizedState,i);if(o&&(r.memoizedState=i,Ea=!0),r=r.queue,Wo(jo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==bo&&1&bo.memoizedState.tag){if(n.flags|=2048,qo(9,Mo.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(s(349));0!==(30&go)||Lo(n,t,i)}return i}function Lo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Mo(e,t,n,r){t.value=n,t.getSnapshot=r,Uo(t)&&Fo(e)}function jo(e,t,n){return n(function(){Uo(t)&&Fo(e)})}function Uo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cr(e,n)}catch(r){return!0}}function Fo(e){var t=Rs(e,1);null!==t&&sc(t,e,1,-1)}function Vo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:e},t.queue=e,e=e.dispatch=ia.bind(null,vo,e),[t.memoizedState,e]}function qo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return ko().memoizedState}function Bo(e,t,n,r){var i=To();vo.flags|=e,i.memoizedState=qo(1|t,n,void 0,void 0===r?null:r)}function Ho(e,t,n,r){var i=ko();r=void 0===r?null:r;var s=void 0;if(null!==yo){var o=yo.memoizedState;if(s=o.destroy,null!==r&&Io(r,o.deps))return void(i.memoizedState=qo(t,n,s,r))}vo.flags|=e,i.memoizedState=qo(1|t,n,s,r)}function Go(e,t){return Bo(8390656,8,e,t)}function Wo(e,t){return Ho(2048,8,e,t)}function Ko(e,t){return Ho(4,2,e,t)}function Qo(e,t){return Ho(4,4,e,t)}function Yo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Jo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ho(4,4,Yo.bind(null,t,e),n)}function Xo(){}function $o(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zo(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ea(e,t,n){return 0===(21&go)?(e.baseState&&(e.baseState=!1,Ea=!0),e.memoizedState=n):(cr(n,t)||(n=mt(),vo.lanes|=n,Fl|=n,e.baseState=!0),t)}function ta(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=mo.transition;mo.transition={};try{e(!1),t()}finally{bt=n,mo.transition=r}}function na(){return ko().memoizedState}function ra(e,t,n){var r=ic(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sa(e))oa(t,n);else if(null!==(n=Ns(e,t,n,r))){sc(n,e,r,rc()),aa(n,t,r)}}function ia(e,t,n){var r=ic(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sa(e))oa(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,cr(a,o)){var l=t.interleaved;return null===l?(i.next=i,ks(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ns(e,t,i,r))&&(sc(n,e,r,i=rc()),aa(n,t,r))}}function sa(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function oa(e,t){_o=wo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function aa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var la={readContext:As,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useInsertionEffect:So,useLayoutEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useMutableSource:So,useSyncExternalStore:So,useId:So,unstable_isNewReconciler:!1},ca={readContext:As,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:As,useEffect:Go,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Yo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ra.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Vo,useDebugValue:Xo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Vo(!1),t=e[0];return e=ta.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=To();if(os){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Pl)throw Error(s(349));0!==(30&go)||Lo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Go(jo.bind(null,r,o,e),[e]),r.flags|=2048,qo(9,Mo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Pl.identifierPrefix;if(os){var n=Zi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=Eo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ua={readContext:As,useCallback:$o,useContext:As,useEffect:Wo,useImperativeHandle:Jo,useInsertionEffect:Ko,useLayoutEffect:Qo,useMemo:Zo,useReducer:Ro,useRef:zo,useState:function(){return Ro(No)},useDebugValue:Xo,useDeferredValue:function(e){return ea(ko(),yo.memoizedState,e)},useTransition:function(){return[Ro(No)[0],ko().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Do,useId:na,unstable_isNewReconciler:!1},da={readContext:As,useCallback:$o,useContext:As,useEffect:Wo,useImperativeHandle:Jo,useInsertionEffect:Ko,useLayoutEffect:Qo,useMemo:Zo,useReducer:Po,useRef:zo,useState:function(){return Po(No)},useDebugValue:Xo,useDeferredValue:function(e){var t=ko();return null===yo?t.memoizedState=e:ea(t,yo.memoizedState,e)},useTransition:function(){return[Po(No)[0],ko().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Do,useId:na,unstable_isNewReconciler:!1};function ha(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function fa(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function pa(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ma="function"===typeof WeakMap?WeakMap:Map;function ga(e,t,n){(n=Ls(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Ql=r),pa(0,t)},n}function va(e,t,n){(n=Ls(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){pa(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){pa(0,t),"function"!==typeof r&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ya(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ma;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function ba(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function wa(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ls(-1,1)).tag=2,Ms(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _a=w.ReactCurrentOwner,Ea=!1;function xa(e,t,n,r){t.child=null===e?Zs(t,null,n,r):$s(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var s=t.ref;return Cs(t,i),r=Co(e,t,n,r,s,i),n=Ao(),null===e||Ea?(os&&n&&ns(t),t.flags|=1,xa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Lc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=jc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ca(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=Mc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ca(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(ur(s,r)&&e.ref===t.ref){if(Ea=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(Ea=!0)}}return ka(e,t,n,r,i)}function Aa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ml,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ml,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Ml,Ll),Ll|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Ml,Ll),Ll|=r;return xa(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,i){var s=Di(n)?Pi:Ni.current;return s=Oi(t,s),Cs(t,i),n=Co(e,t,n,r,s,i),r=Ao(),null===e||Ea?(os&&r&&ns(t),t.flags|=1,xa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Na(e,t,n,r,i){if(Di(n)){var s=!0;Ui(t)}else s=!1;if(Cs(t,i),null===t.stateNode)Wa(e,t),Gs(t,n,r),Ks(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=As(c):c=Oi(t,c=Di(n)?Pi:Ni.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&Ws(t,o,r,c),Ps=!1;var h=t.memoizedState;o.state=h,Fs(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Ri.current||Ps?("function"===typeof u&&(zs(t,n,u,r),l=t.memoizedState),(a=Ps||Hs(t,n,a,r,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ds(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ys(t.type,a),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=As(l):l=Oi(t,l=Di(n)?Pi:Ni.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&Ws(t,o,r,l),Ps=!1,h=t.memoizedState,o.state=h,Fs(t,r,o,i);var p=t.memoizedState;a!==d||h!==p||Ri.current||Ps?("function"===typeof f&&(zs(t,n,f,r),p=t.memoizedState),(c=Ps||Hs(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ra(e,t,n,r,s,i)}function Ra(e,t,n,r,i,s){Ta(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ka(e,t,s);r=t.stateNode,_a.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$s(t,e.child,null,s),t.child=$s(t,null,a,s)):xa(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Pa(e){var t=e.stateNode;t.pendingContext?Mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mi(0,t.context,!1),so(e,t.containerInfo)}function Oa(e,t,n,r,i){return ms(),gs(i),t.flags|=256,xa(e,t,n,r),t.child}var Da,La,Ma,ja,Ua={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Va(e,t,n){var r,i=t.pendingProps,o=co.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(co,1&o),null===e)return ds(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,i,0,null),e=Uc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ua,e):qa(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,za(e,t,a,r=fa(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Uc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$s(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ua,o);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,za(e,t,a,r=fa(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),Ea||l){if(null!==(r=Pl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Rs(e,i),sc(r,e,i,-1))}return yc(),za(e,t,a,r=fa(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ss=di(i.nextSibling),is=t,os=!0,as=null,null!==e&&(Yi[Ji++]=$i,Yi[Ji++]=Zi,Yi[Ji++]=Xi,$i=e.id,Zi=e.overflow,Xi=t),t=qa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Mc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Mc(r,a):(a=Uc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ua,i}return e=(a=e.child).sibling,i=Mc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function qa(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,n,r){return null!==r&&gs(r),$s(t,e.child,null,n),(e=qa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function Ha(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ga(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(xa(e,t,r.children,n),0!==(2&(r=co.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(co,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ha(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ha(t,!0,n,null,s);break;case"together":Ha(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qa(e,t){if(!os)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ya(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ja(e,t,n){var r=t.pendingProps;switch(rs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ya(t),null;case 1:case 17:return Di(t.type)&&Li(),Ya(t),null;case 3:return r=t.stateNode,oo(),Ai(Ri),Ai(Ni),fo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==as&&(cc(as),as=null))),La(e,t),Ya(t),null;case 5:lo(t);var i=io(ro.current);if(n=t.type,null!==e&&null!=t.stateNode)Ma(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ya(t),null}if(e=io(to.current),fs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[pi]=t,r[mi]=o,e=0!==(1&t.mode),n){case"dialog":qr("cancel",r),qr("close",r);break;case"iframe":case"object":case"embed":qr("load",r);break;case"video":case"audio":for(i=0;i<jr.length;i++)qr(jr[i],r);break;case"source":qr("error",r);break;case"img":case"image":case"link":qr("error",r),qr("load",r);break;case"details":qr("toggle",r);break;case"input":J(r,o),qr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},qr("invalid",r);break;case"textarea":ie(r,o),qr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&ei(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&ei(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&qr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=ti)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[pi]=t,e[mi]=r,Da(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":qr("cancel",e),qr("close",e),i=r;break;case"iframe":case"object":case"embed":qr("load",e),i=r;break;case"video":case"audio":for(i=0;i<jr.length;i++)qr(jr[i],e);i=r;break;case"source":qr("error",e),i=r;break;case"img":case"image":case"link":qr("error",e),qr("load",e),i=r;break;case"details":qr("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),qr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),qr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),qr("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&qr("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=ti)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ya(t),null;case 6:if(e&&null!=t.stateNode)ja(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=io(ro.current),io(to.current),fs(t)){if(r=t.stateNode,n=t.memoizedProps,r[pi]=t,(o=r.nodeValue!==n)&&null!==(e=is))switch(e.tag){case 3:ei(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&ei(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pi]=t,t.stateNode=r}return Ya(t),null;case 13:if(Ai(co),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(os&&null!==ss&&0!==(1&t.mode)&&0===(128&t.flags))ps(),ms(),t.flags|=98560,o=!1;else if(o=fs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[pi]=t}else ms(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ya(t),o=!1}else null!==as&&(cc(as),as=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&co.current)?0===jl&&(jl=3):yc())),null!==t.updateQueue&&(t.flags|=4),Ya(t),null);case 4:return oo(),La(e,t),null===e&&Hr(t.stateNode.containerInfo),Ya(t),null;case 10:return Ss(t.type._context),Ya(t),null;case 19:if(Ai(co),null===(o=t.memoizedState))return Ya(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Qa(o,!1);else{if(0!==jl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=uo(e))){for(t.flags|=128,Qa(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(co,1&co.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Gl&&(t.flags|=128,r=!0,Qa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!os)return Ya(t),null}else 2*Xe()-o.renderingStartTime>Gl&&1073741824!==n&&(t.flags|=128,r=!0,Qa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=co.current,Ti(co,r?1&n|2:1&n),t):(Ya(t),null);case 22:case 23:return pc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(Ya(t),6&t.subtreeFlags&&(t.flags|=8192)):Ya(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Xa(e,t){switch(rs(t),t.tag){case 1:return Di(t.type)&&Li(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oo(),Ai(Ri),Ai(Ni),fo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return lo(t),null;case 13:if(Ai(co),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ms()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ai(co),null;case 4:return oo(),null;case 10:return Ss(t.type._context),null;case 22:case 23:return pc(),null;default:return null}}Da=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},La=function(){},Ma=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,io(to.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=ti)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&qr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},ja=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Za=!1,el="function"===typeof WeakSet?WeakSet:Set,tl=null;function nl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ac(e,t,r)}else n.current=null}function rl(e,t,n){try{n()}catch(r){Ac(e,t,r)}}var il=!1;function sl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&rl(t,n,s)}i=i.next}while(i!==r)}}function ol(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ll(e){var t=e.alternate;null!==t&&(e.alternate=null,ll(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pi],delete t[mi],delete t[vi],delete t[yi],delete t[bi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cl(e){return 5===e.tag||3===e.tag||4===e.tag}function ul(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||cl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function dl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ti));else if(4!==r&&null!==(e=e.child))for(dl(e,t,n),e=e.sibling;null!==e;)dl(e,t,n),e=e.sibling}function hl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(hl(e,t,n),e=e.sibling;null!==e;)hl(e,t,n),e=e.sibling}var fl=null,pl=!1;function ml(e,t,n){for(n=n.child;null!==n;)gl(e,t,n),n=n.sibling}function gl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Za||nl(n,t);case 6:var r=fl,i=pl;fl=null,ml(e,t,n),pl=i,null!==(fl=r)&&(pl?(e=fl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fl.removeChild(n.stateNode));break;case 18:null!==fl&&(pl?(e=fl,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Bt(e)):ui(fl,n.stateNode));break;case 4:r=fl,i=pl,fl=n.stateNode.containerInfo,pl=!0,ml(e,t,n),fl=r,pl=i;break;case 0:case 11:case 14:case 15:if(!Za&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&rl(n,t,o),i=i.next}while(i!==r)}ml(e,t,n);break;case 1:if(!Za&&(nl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ac(n,t,a)}ml(e,t,n);break;case 21:ml(e,t,n);break;case 22:1&n.mode?(Za=(r=Za)||null!==n.memoizedState,ml(e,t,n),Za=r):ml(e,t,n);break;default:ml(e,t,n)}}function vl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new el),t.forEach(function(t){var r=Rc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function yl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:fl=l.stateNode,pl=!1;break e;case 3:case 4:fl=l.stateNode.containerInfo,pl=!0;break e}l=l.return}if(null===fl)throw Error(s(160));gl(o,a,i),fl=null,pl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ac(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)bl(t,e),t=t.sibling}function bl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yl(t,e),wl(e),4&r){try{sl(3,e,e.return),ol(3,e)}catch(g){Ac(e,e.return,g)}try{sl(5,e,e.return)}catch(g){Ac(e,e.return,g)}}break;case 1:yl(t,e),wl(e),512&r&&null!==n&&nl(n,n.return);break;case 5:if(yl(t,e),wl(e),512&r&&null!==n&&nl(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Ac(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),be(l,a);var u=be(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":$(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[mi]=o}catch(g){Ac(e,e.return,g)}}break;case 6:if(yl(t,e),wl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Ac(e,e.return,g)}}break;case 3:if(yl(t,e),wl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Ac(e,e.return,g)}break;case 4:default:yl(t,e),wl(e);break;case 13:yl(t,e),wl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Hl=Xe())),4&r&&vl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Za=(u=Za)||d,yl(t,e),Za=u):yl(t,e),wl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(tl=e,d=e.child;null!==d;){for(h=tl=d;null!==tl;){switch(p=(f=tl).child,f.tag){case 0:case 11:case 14:case 15:sl(4,f,f.return);break;case 1:nl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ac(r,n,g)}}break;case 5:nl(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(h);continue}}null!==p?(p.return=f,tl=p):Sl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Ac(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ac(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:yl(t,e),wl(e),4&r&&vl(e);case 21:}}function wl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(cl(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),hl(e,ul(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;dl(e,ul(e),o);break;default:throw Error(s(161))}}catch(cn){Ac(e,e.return,cn)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,n){tl=e,El(e,t,n)}function El(e,t,n){for(var r=0!==(1&e.mode);null!==tl;){var i=tl,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$a;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Za;a=$a;var c=Za;if($a=o,(Za=l)&&!c)for(tl=i;null!==tl;)l=(o=tl).child,22===o.tag&&null!==o.memoizedState?Il(i):null!==l?(l.return=o,tl=l):Il(i);for(;null!==s;)tl=s,El(s,t,n),s=s.sibling;tl=i,$a=a,Za=c}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,tl=s):xl(e)}}function xl(e){for(;null!==tl;){var t=tl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Za||ol(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Za)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ys(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Vs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(s(163))}Za||512&t.flags&&al(t)}catch(f){Ac(t,t.return,f)}}if(t===e){tl=null;break}if(null!==(n=t.sibling)){n.return=t.return,tl=n;break}tl=t.return}}function Sl(e){for(;null!==tl;){var t=tl;if(t===e){tl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,tl=n;break}tl=t.return}}function Il(e){for(;null!==tl;){var t=tl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ol(4,t)}catch(cn){Ac(t,n,cn)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(cn){Ac(t,i,cn)}}var s=t.return;try{al(t)}catch(cn){Ac(t,s,cn)}break;case 5:var o=t.return;try{al(t)}catch(cn){Ac(t,o,cn)}}}catch(cn){Ac(t,t.return,cn)}if(t===e){tl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,tl=a;break}tl=t.return}}var Cl,Al=Math.ceil,Tl=w.ReactCurrentDispatcher,kl=w.ReactCurrentOwner,Nl=w.ReactCurrentBatchConfig,Rl=0,Pl=null,Ol=null,Dl=0,Ll=0,Ml=Ci(0),jl=0,Ul=null,Fl=0,Vl=0,ql=0,zl=null,Bl=null,Hl=0,Gl=1/0,Wl=null,Kl=!1,Ql=null,Yl=null,Jl=!1,Xl=null,$l=0,Zl=0,ec=null,tc=-1,nc=0;function rc(){return 0!==(6&Rl)?Xe():-1!==tc?tc:tc=Xe()}function ic(e){return 0===(1&e.mode)?1:0!==(2&Rl)&&0!==Dl?Dl&-Dl:null!==vs.transition?(0===nc&&(nc=mt()),nc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function sc(e,t,n,r){if(50<Zl)throw Zl=0,ec=null,Error(s(185));vt(e,n,r),0!==(2&Rl)&&e===Pl||(e===Pl&&(0===(2&Rl)&&(Vl|=n),4===jl&&uc(e,Dl)),oc(e,r),1===n&&0===Rl&&0===(1&t.mode)&&(Gl=Xe()+500,qi&&Hi()))}function oc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=ht(e,e===Pl?Dl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){qi=!0,Bi(e)}(dc.bind(null,e)):Bi(dc.bind(null,e)),li(function(){0===(6&Rl)&&Hi()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(tc=-1,nc=0,0!==(6&Rl))throw Error(s(327));var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var r=ht(e,e===Pl?Dl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=bc(e,r);else{t=r;var i=Rl;Rl|=2;var o=vc();for(Pl===e&&Dl===t||(Wl=null,Gl=Xe()+500,mc(e,t));;)try{_c();break}catch(l){gc(e,l)}xs(),Tl.current=o,Rl=i,null!==Ol?t=0:(Pl=null,Dl=0,t=jl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=lc(e,i))),1===t)throw n=Ul,mc(e,0),uc(e,r),oc(e,Xe()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!cr(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=bc(e,r))&&(0!==(o=pt(e))&&(r=o,t=lc(e,o))),1===t))throw n=Ul,mc(e,0),uc(e,r),oc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Sc(e,Bl,Wl);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Hl+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){rc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=si(Sc.bind(null,e,Bl,Wl),t);break}Sc(e,Bl,Wl);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Al(r/1960))-r)){e.timeoutHandle=si(Sc.bind(null,e,Bl,Wl),r);break}Sc(e,Bl,Wl);break;default:throw Error(s(329))}}}return oc(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function lc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(mc(e,t).flags|=256),2!==(e=bc(e,t))&&(t=Bl,Bl=n,null!==t&&cc(t)),e}function cc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function uc(e,t){for(t&=~ql,t&=~Vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function dc(e){if(0!==(6&Rl))throw Error(s(327));Ic();var t=ht(e,0);if(0===(1&t))return oc(e,Xe()),null;var n=bc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=lc(e,r))}if(1===n)throw n=Ul,mc(e,0),uc(e,t),oc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Bl,Wl),oc(e,Xe()),null}function hc(e,t){var n=Rl;Rl|=1;try{return e(t)}finally{0===(Rl=n)&&(Gl=Xe()+500,qi&&Hi())}}function fc(e){null!==Xl&&0===Xl.tag&&0===(6&Rl)&&Ic();var t=Rl;Rl|=1;var n=Nl.transition,r=bt;try{if(Nl.transition=null,bt=1,e)return e()}finally{bt=r,Nl.transition=n,0===(6&(Rl=t))&&Hi()}}function pc(){Ll=Ml.current,Ai(Ml)}function mc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oi(n)),null!==Ol)for(n=Ol.return;null!==n;){var r=n;switch(rs(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Li();break;case 3:oo(),Ai(Ri),Ai(Ni),fo();break;case 5:lo(r);break;case 4:oo();break;case 13:case 19:Ai(co);break;case 10:Ss(r.type._context);break;case 22:case 23:pc()}n=n.return}if(Pl=e,Ol=e=Mc(e.current,null),Dl=Ll=t,jl=0,Ul=null,ql=Vl=Fl=0,Bl=zl=null,null!==Ts){for(t=0;t<Ts.length;t++)if(null!==(r=(n=Ts[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ts=null}return e}function gc(e,t){for(;;){var n=Ol;try{if(xs(),po.current=la,wo){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}wo=!1}if(go=0,bo=yo=vo=null,_o=!1,Eo=0,kl.current=null,null===n||null===n.return){jl=1,Ul=t,Ol=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Dl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ba(a);if(null!==p){p.flags&=-257,wa(p,a,l,0,t),1&p.mode&&ya(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ya(o,u,t),yc();break e}c=Error(s(426))}else if(os&&1&l.mode){var v=ba(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),wa(v,a,l,0,t),gs(ha(c,l));break e}}o=c=ha(c,l),4!==jl&&(jl=2),null===zl?zl=[o]:zl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Us(o,ga(0,c,t));break e;case 1:l=c;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Yl||!Yl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Us(o,va(o,l,t));break e}}o=o.return}while(null!==o)}xc(n)}catch(w){t=w,Ol===n&&null!==n&&(Ol=n=n.return);continue}break}}function vc(){var e=Tl.current;return Tl.current=la,null===e?la:e}function yc(){0!==jl&&3!==jl&&2!==jl||(jl=4),null===Pl||0===(268435455&Fl)&&0===(268435455&Vl)||uc(Pl,Dl)}function bc(e,t){var n=Rl;Rl|=2;var r=vc();for(Pl===e&&Dl===t||(Wl=null,mc(e,t));;)try{wc();break}catch(i){gc(e,i)}if(xs(),Rl=n,Tl.current=r,null!==Ol)throw Error(s(261));return Pl=null,Dl=0,jl}function wc(){for(;null!==Ol;)Ec(Ol)}function _c(){for(;null!==Ol&&!Ye();)Ec(Ol)}function Ec(e){var t=Cl(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?xc(e):Ol=t,kl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ja(n,t,Ll)))return void(Ol=n)}else{if(null!==(n=Xa(n,t)))return n.flags&=32767,void(Ol=n);if(null===e)return jl=6,void(Ol=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ol=t);Ol=t=e}while(null!==t);0===jl&&(jl=5)}function Sc(e,t,n){var r=bt,i=Nl.transition;try{Nl.transition=null,bt=1,function(e,t,n,r){do{Ic()}while(null!==Xl);if(0!==(6&Rl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Pl&&(Ol=Pl=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Jl||(Jl=!0,Pc(tt,function(){return Ic(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Nl.transition,Nl.transition=null;var a=bt;bt=1;var l=Rl;Rl|=4,kl.current=null,function(e,t){if(ni=Gt,mr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(kt){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ri={focusedElem:e,selectionRange:n},Gt=!1,tl=t;null!==tl;)if(e=(t=tl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,tl=e;else for(;null!==tl;){t=tl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ys(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(kt){Ac(t,t.return,kt)}if(null!==(e=t.sibling)){e.return=t.return,tl=e;break}tl=t.return}m=il,il=!1}(e,n),bl(n,e),gr(ri),Gt=!!ni,ri=ni=null,e.current=n,_l(n,e,i),Je(),Rl=l,bt=a,Nl.transition=o}else e.current=n;if(Jl&&(Jl=!1,Xl=e,$l=i),o=e.pendingLanes,0===o&&(Yl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),oc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,e=Ql,Ql=null,e;0!==(1&$l)&&0!==e.tag&&Ic(),o=e.pendingLanes,0!==(1&o)?e===ec?Zl++:(Zl=0,ec=e):Zl=0,Hi()}(e,t,n,r)}finally{Nl.transition=i,bt=r}return null}function Ic(){if(null!==Xl){var e=wt($l),t=Nl.transition,n=bt;try{if(Nl.transition=null,bt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,$l=0,0!==(6&Rl))throw Error(s(331));var i=Rl;for(Rl|=4,tl=e.current;null!==tl;){var o=tl,a=o.child;if(0!==(16&tl.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(tl=u;null!==tl;){var d=tl;switch(d.tag){case 0:case 11:case 15:sl(8,d,o)}var h=d.child;if(null!==h)h.return=d,tl=h;else for(;null!==tl;){var f=(d=tl).sibling,p=d.return;if(ll(d),d===u){tl=null;break}if(null!==f){f.return=p,tl=f;break}tl=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}tl=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,tl=a;else e:for(;null!==tl;){if(0!==(2048&(o=tl).flags))switch(o.tag){case 0:case 11:case 15:sl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,tl=y;break e}tl=o.return}}var b=e.current;for(tl=b;null!==tl;){var w=(a=tl).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,tl=w;else e:for(a=b;null!==tl;){if(0!==(2048&(l=tl).flags))try{switch(l.tag){case 0:case 11:case 15:ol(9,l)}}catch(E){Ac(l,l.return,E)}if(l===a){tl=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,tl=_;break e}tl=l.return}}if(Rl=i,Hi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{bt=n,Nl.transition=t}}return!1}function Cc(e,t,n){e=Ms(e,t=ga(0,t=ha(n,t),1),1),t=rc(),null!==e&&(vt(e,1,t),oc(e,t))}function Ac(e,t,n){if(3===e.tag)Cc(e,e,n);else for(;null!==t;){if(3===t.tag){Cc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yl||!Yl.has(r))){t=Ms(t,e=va(t,e=ha(n,e),1),1),e=rc(),null!==t&&(vt(t,1,e),oc(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=rc(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Dl&n)===n&&(4===jl||3===jl&&(130023424&Dl)===Dl&&500>Xe()-Hl?mc(e,0):ql|=n),oc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=rc();null!==(e=Rs(e,t))&&(vt(e,t,n),oc(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function Rc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),kc(e,n)}function Pc(e,t){return Ke(e,t)}function Oc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Oc(e,t,n,r)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Lc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case x:return Uc(n.children,i,o,t);case S:a=8,i|=8;break;case I:return(e=Dc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case k:return(e=Dc(13,n,t,i)).elementType=k,e.lanes=o,e;case N:return(e=Dc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case A:a=9;break e;case T:a=11;break e;case R:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Dc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Uc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Vc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function qc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,s,o,a,l){return e=new zc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Dc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Os(s),e}function Hc(e){if(!e)return ki;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Di(n))return ji(e,n,t)}return t}function Gc(e,t,n,r,i,s,o,a,l){return(e=Bc(n,r,!0,e,0,s,0,a,l)).context=Hc(null),n=e.current,(s=Ls(r=rc(),i=ic(n))).callback=void 0!==t&&null!==t?t:null,Ms(n,s,i),e.current.lanes=i,vt(e,i,r),oc(e,r),e}function Wc(e,t,n,r){var i=t.current,s=rc(),o=ic(i);return n=Hc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ls(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ms(i,t,o))&&(sc(e,i,o,s),js(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yc(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}Cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ri.current)Ea=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Ea=!1,function(e,t,n){switch(t.tag){case 3:Pa(t),ms();break;case 5:ao(t);break;case 1:Di(t.type)&&Ui(t);break;case 4:so(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(bs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(co,1&co.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Va(e,t,n):(Ti(co,1&co.current),null!==(e=Ka(e,t,n))?e.sibling:null);Ti(co,1&co.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ga(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(co,co.current),r)break;return null;case 22:case 23:return t.lanes=0,Aa(e,t,n)}return Ka(e,t,n)}(e,t,n);Ea=0!==(131072&e.flags)}else Ea=!1,os&&0!==(1048576&t.flags)&&ts(t,Qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wa(e,t),e=t.pendingProps;var i=Oi(t,Ni.current);Cs(t,n),i=Co(null,t,r,e,i,n);var o=Ao();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Ui(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Os(t),i.updater=Bs,t.stateNode=i,i._reactInternals=t,Ks(t,r,e,n),t=Ra(null,t,r,!0,o,n)):(t.tag=0,os&&o&&ns(t),xa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===R)return 14}return 2}(r),e=ys(r,e),i){case 0:t=ka(null,t,r,e,n);break e;case 1:t=Na(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,ys(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:ys(r,i),n);case 1:return r=t.type,i=t.pendingProps,Na(e,t,r,i=t.elementType===r?i:ys(r,i),n);case 3:e:{if(Pa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ds(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Oa(e,t,r,n,i=ha(Error(s(423)),t));break e}if(r!==i){t=Oa(e,t,r,n,i=ha(Error(s(424)),t));break e}for(ss=di(t.stateNode.containerInfo.firstChild),is=t,os=!0,as=null,n=Zs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ms(),r===i){t=Ka(e,t,n);break e}xa(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ds(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ii(r,i)?a=null:null!==o&&ii(r,o)&&(t.flags|=32),Ta(e,t),xa(e,t,a,n),t.child;case 6:return null===e&&ds(t),null;case 13:return Va(e,t,n);case 4:return so(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$s(t,null,r,n):xa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:ys(r,i),n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ti(bs,r._currentValue),r._currentValue=a,null!==o)if(cr(o.value,a)){if(o.children===i.children&&!Ri.current){t=Ka(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ls(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Is(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Is(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}xa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Cs(t,n),r=r(i=As(i)),t.flags|=1,xa(e,t,r,n),t.child;case 14:return i=ys(r=t.type,t.pendingProps),Ia(e,t,r,i=ys(r.type,i),n);case 15:return Ca(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ys(r,i),Wa(e,t),t.tag=1,Di(r)?(e=!0,Ui(t)):e=!1,Cs(t,n),Gs(t,r,i),Ks(t,r,i,n),Ra(null,t,r,!0,e,n);case 19:return Ga(e,t,n);case 22:return Aa(e,t,n)}throw Error(s(156,t.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function eu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function tu(){}function nu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Kc(o);a.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Kc(o);s.call(e)}}var o=Gc(t,r,e,0,null,!1,0,"",tu);return e._reactRootContainer=o,e[gi]=o.current,Hr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Kc(l);a.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",tu);return e._reactRootContainer=l,e[gi]=l.current,Hr(8===e.nodeType?e.parentNode:e),fc(function(){Wc(t,l,n,r)}),l}(n,t,e,i,r);return Kc(o)}$c.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},$c.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc(function(){Wc(null,e,null,null)}),t[gi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ut(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),oc(t,Xe()),0===(6&Rl)&&(Gl=Xe()+500,Hi()))}break;case 13:fc(function(){var t=Rs(e,1);if(null!==t){var n=rc();sc(t,e,1,n)}}),Yc(e,1)}},Et=function(e){if(13===e.tag){var t=Rs(e,134217728);if(null!==t)sc(t,e,134217728,rc());Yc(e,134217728)}},xt=function(e){if(13===e.tag){var t=ic(e),n=Rs(e,t);if(null!==n)sc(n,e,t,rc());Yc(e,t)}},St=function(){return bt},It=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ee=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(s(90));K(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=hc,ke=fc;var ru={usingClientEntryPoint:!1,Events:[_i,Ei,xi,Ce,Ae,hc]},iu={findFiberByHostInstance:wi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},su={bundleType:iu.bundleType,version:iu.version,rendererPackageName:iu.rendererPackageName,rendererConfig:iu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:iu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{it=ou.inject(su),st=ou}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ru,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(s(299));var n=!1,r="",i=Jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[gi]=t.current,Hr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!eu(t))throw Error(s(200));return nu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Jc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Gc(t,null,e,1,null!=n?n:null,i,0,o,a),e[gi]=t.current,Hr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!eu(t))throw Error(s(200));return nu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!eu(e))throw Error(s(40));return!!e._reactRootContainer&&(fc(function(){nu(null,null,e,!1,function(){e._reactRootContainer=null,e[gi]=null})}),!0)},t.unstable_batchedUpdates=hc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!eu(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return nu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),i=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function a(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const u=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},d={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(u(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new h;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class h extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f=function(e){return function(e){const t=u(e);return d.encodeByteArray(t,!0)}(e).replace(/\./g,"")},p=function(e){try{return d.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function m(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const g=()=>{try{return m().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&p(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},v=e=>{var t;return null===(t=g())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},y=()=>{var e;return null===(e=g())||void 0===e?void 0:e.config},b=e=>{var t;return null===(t=g())||void 0===t?void 0:t["_".concat(e)]};class w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function _(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function E(e){return(await fetch(e,{credentials:"include"})).ok}const x={};let S=!1;function I(e,t){if("undefined"===typeof window||"undefined"===typeof document||!_(window.location.host)||x[e]===t||x[e]||S)return;function n(e){return"__firebase__banner__".concat(e)}x[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(x))x[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{S=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function C(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function A(){var e;const t=null===(e=g())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function T(){return!A()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k(){try{return"object"===typeof indexedDB}catch(e){return!1}}class N extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,N.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,R.prototype.create)}}class R{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(P,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new N(n,s,t)}}const P=/\{\$([^}]+)}/g;function O(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(D(n)&&D(s)){if(!O(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function D(e){return null!==e&&"object"===typeof e}function L(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function M(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function j(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class U{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=F),void 0===r.error&&(r.error=F),void 0===r.complete&&(r.complete=F);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function F(){}function V(e){return e&&e._delegate?e._delegate:e}class q{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const z="[DEFAULT]";class B{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new w;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:z})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===z?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;return this.component?this.component.multipleInstances?e:z:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class H{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new B(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const G=[];var W;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(W||(W={}));const K={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},Q=W.INFO,Y={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},J=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Y[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class X{constructor(e){this.name=e,this._logLevel=Q,this._logHandler=J,this._userLogHandler=null,G.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in W))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?K[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...t),this._logHandler(this,W.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...t),this._logHandler(this,W.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,W.INFO,...t),this._logHandler(this,W.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,W.WARN,...t),this._logHandler(this,W.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,W.ERROR,...t),this._logHandler(this,W.ERROR,...t)}}let $,Z;const ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=new WeakMap,ie=new WeakMap;let se={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return te.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ne.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return le(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function oe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Z||(Z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ce(this),n),le(ee.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return le(e.apply(ce(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ce(this),t,...r);return ne.set(s,t.sort?t.sort():[t]),le(s)}}function ae(e){return"function"===typeof e?oe(e):(e instanceof IDBTransaction&&function(e){if(te.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});te.set(e,t)}(e),t=e,($||($=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,se):e);var t}function le(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(le(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&ee.set(t,e)}).catch(()=>{}),ie.set(t,e),t}(e);if(re.has(e))return re.get(e);const t=ae(e);return t!==e&&(re.set(e,t),ie.set(t,e)),t}const ce=e=>ie.get(e);const ue=["get","getKey","getAll","getAllKeys","count"],de=["put","add","delete","clear"],he=new Map;function fe(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(he.get(t))return he.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=de.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ue.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return he.set(t,s),s}se=(e=>c(c({},e),{},{get:(t,n,r)=>fe(t,n)||e.get(t,n,r),has:(t,n)=>!!fe(t,n)||e.has(t,n)}))(se);class pe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const me="@firebase/app",ge="0.14.1",ve=new X("@firebase/app"),ye="@firebase/app-compat",be="@firebase/analytics-compat",we="@firebase/analytics",_e="@firebase/app-check-compat",Ee="@firebase/app-check",xe="@firebase/auth",Se="@firebase/auth-compat",Ie="@firebase/database",Ce="@firebase/data-connect",Ae="@firebase/database-compat",Te="@firebase/functions",ke="@firebase/functions-compat",Ne="@firebase/installations",Re="@firebase/installations-compat",Pe="@firebase/messaging",Oe="@firebase/messaging-compat",De="@firebase/performance",Le="@firebase/performance-compat",Me="@firebase/remote-config",je="@firebase/remote-config-compat",Ue="@firebase/storage",Fe="@firebase/storage-compat",Ve="@firebase/firestore",qe="@firebase/ai",ze="@firebase/firestore-compat",Be="firebase",He="[DEFAULT]",Ge={[me]:"fire-core",[ye]:"fire-core-compat",[we]:"fire-analytics",[be]:"fire-analytics-compat",[Ee]:"fire-app-check",[_e]:"fire-app-check-compat",[xe]:"fire-auth",[Se]:"fire-auth-compat",[Ie]:"fire-rtdb",[Ce]:"fire-data-connect",[Ae]:"fire-rtdb-compat",[Te]:"fire-fn",[ke]:"fire-fn-compat",[Ne]:"fire-iid",[Re]:"fire-iid-compat",[Pe]:"fire-fcm",[Oe]:"fire-fcm-compat",[De]:"fire-perf",[Le]:"fire-perf-compat",[Me]:"fire-rc",[je]:"fire-rc-compat",[Ue]:"fire-gcs",[Fe]:"fire-gcs-compat",[Ve]:"fire-fst",[ze]:"fire-fst-compat",[qe]:"fire-vertex","fire-js":"fire-js",[Be]:"fire-js-all"},We=new Map,Ke=new Map,Qe=new Map;function Ye(e,t){try{e.container.addComponent(t)}catch(n){ve.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Je(e){const t=e.name;if(Qe.has(t))return ve.debug("There were multiple attempts to register component ".concat(t,".")),!1;Qe.set(t,e);for(const n of We.values())Ye(n,e);for(const n of Ke.values())Ye(n,e);return!0}function Xe(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function $e(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Ze=new R("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class et{constructor(e,t,n){this._isDeleted=!1,this._options=c({},e),this._config=c({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new q("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ze.create("app-deleted",{appName:this._name})}}const tt="12.1.0";function nt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=c({name:He,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw Ze.create("bad-app-name",{appName:String(i)});if(n||(n=y()),!n)throw Ze.create("no-options");const s=We.get(i);if(s){if(O(n,s.options)&&O(r,s.config))return s;throw Ze.create("duplicate-app",{appName:i})}const o=new H(i);for(const l of Qe.values())o.addComponent(l);const a=new et(n,r,o);return We.set(i,a),a}function rt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He;const t=We.get(e);if(!t&&e===He&&y())return nt();if(!t)throw Ze.create("no-app",{appName:e});return t}function it(e,t,n){var r;let i=null!==(r=Ge[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ve.warn(e.join(" "))}Je(new q("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const st="firebase-heartbeat-store";let ot=null;function at(){return ot||(ot=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=le(o);return r&&o.addEventListener("upgradeneeded",e=>{r(le(o.result),e.oldVersion,e.newVersion,le(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(st)}catch(n){console.warn(n)}}}).catch(e=>{throw Ze.create("idb-open",{originalErrorMessage:e.message})})),ot}async function lt(e,t){try{const n=(await at()).transaction(st,"readwrite"),r=n.objectStore(st);await r.put(t,ct(e)),await n.done}catch(n){if(n instanceof N)ve.warn(n.message);else{const e=Ze.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ve.warn(e.message)}}}function ct(e){return"".concat(e.name,"!").concat(e.options.appId)}class ut{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ht(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=dt();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ve.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=dt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ft(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ft(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=f(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return ve.warn(t),""}}}function dt(){return(new Date).toISOString().substring(0,10)}class ht{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!k()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await at()).transaction(st),n=await t.objectStore(st).get(ct(e));return await t.done,n}catch(t){if(t instanceof N)ve.warn(t.message);else{const e=Ze.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ve.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return lt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return lt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ft(e){return f(JSON.stringify({version:2,heartbeats:e})).length}var pt;pt="",Je(new q("platform-logger",e=>new pe(e),"PRIVATE")),Je(new q("heartbeat",e=>new ut(e),"PRIVATE")),it(me,ge,pt),it(me,ge,"esm2020"),it("fire-js","");it("firebase","12.1.0","app");var mt,gt,vt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},yt={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return h(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);d(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,gt=yt.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},mt=yt.Integer=r}).apply("undefined"!==typeof vt?vt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var bt,wt,_t,Et,xt,St,It,Ct,At="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Tt={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof At&&At];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function x(e){i.setTimeout(()=>{throw e},0)}function S(){var e=k;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var I=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new C,e=>e.reset());class C{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let A,T=!1,k=new class{constructor(){this.h=this.g=null}add(e,t){const n=I.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},N=()=>{const e=i.Promise.resolve(void 0);A=()=>{e.then(R)}};var R=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){x(n)}var t=I;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}T=!1};function P(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}d(L,O);var M={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),U=0;function F(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function q(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function B(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}q.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=B(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new F(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),G={};function W(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[j]?e.K(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new q(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);return null}return n=te(n),e&&e[j]?e.L(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[j]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=B(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=B(t,n,r,i)),(n=-1<e?t[e]:null)&&J(n))}function J(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[j])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(z(n,e),0==n.h&&(n.src=null,t[H]=null)):V(e)}}}function X(e){return e in G?G[e]:G[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&J(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof q?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new q(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;_(t=new O(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&z(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,oe(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,P),ne.prototype[j]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){P.call(this),this.h=e,this.g={}}d(le,P);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&J(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){O.call(this,"d")}function be(){O.call(this,"c")}d(ye,O),d(be,O);var we={},_e=null;function Ee(){return _e=_e||new ne}function xe(e){O.call(this,we.La,e)}function Se(e){const t=Ee();re(t,new xe(t))}function Ie(e,t){O.call(this,we.STAT_EVENT,e),this.stat=t}function Ce(e){const t=Ee();re(t,new Ie(t,e))}function Ae(e,t){O.call(this,we.Ma,e),this.size=t}function Te(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function ke(){this.g=!0}function Ne(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return de(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",d(xe,O),we.STAT_EVENT="statevent",d(Ie,O),we.Ma="timingevent",d(Ae,O),ke.prototype.xa=function(){this.g=!1},ke.prototype.info=function(){};var Re,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}d(De,pe),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Re=new De;var je={},Ue={};function Fe(e,t,n){e.L=1,e.v=dt(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),Be(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Lt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=xn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function qe(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?je:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function Ge(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||yn(e.j,e)}function Ke(e){Ge(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;vn(n),an(n)}pn(n),Ce(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else wn(n,11)}else if((e.K||n.g==e)&&vn(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=En(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(Ge(a),Be(a)),r.g=o}else fn(r);0<n.i.length&&cn(n)}else"stop"!=c[0]&&"close"!=c[0]||wn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?wn(n,7):on(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Se()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==tn(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const h=tn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||nn(this.g)))){this.J||4!=h||7==t||Se(),Ge(this);var n=this.g.Z();this.X=n;t:if(qe(this)){var r=nn(this.g);e="";var s=r.length,o=4==tn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),We(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ce(12),Ke(this),We(this);break e}Ne(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=ze(this,a),e==Ue){4==h&&(this.s=4,Ce(14),n=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(e==je){this.s=4,Ce(15),Ne(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ne(this.i,this.l,e,null),Qe(this,e)}if(qe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,Ce(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),mn(d),d.M=!0,Ce(11))}}else Ne(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),We(this)}else Ne(this.i,this.l,a,null),Qe(this,a);4==h&&Ke(this),this.o&&!this.J&&(4==h?yn(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=tn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=E(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),Ke(this),We(this)}}}catch(h){}},Le.prototype.cancel=function(){this.J=!0,Ke(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Se(),Ce(17)),Ke(this),this.s=2,We(this)):He(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Je(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Je.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new Rt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new Rt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof Rt?(e.i=t,function(e,t){t&&!e.j&&(Pt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Ot(this,t),Lt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,kt)),e.i=new Rt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,Nt)),e.join("")};var mt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,kt=/[#\?@]/g,Nt=/#/g;function Rt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Pt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Ot(e,t){Pt(e),t=Mt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Dt(e,t){return Pt(e),t=Mt(e,t),e.g.has(t)}function Lt(e,t,n){Ot(e,t),0<n.length&&(e.i=null,e.g.set(Mt(e,t),h(n)),e.h+=n.length)}function Mt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function jt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Ut(){this.g=new fe}function Ft(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;o(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Vt(e){this.l=e.Ub||null,this.j=e.eb||!1}function qt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function zt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Bt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ht(e)}function Ht(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Gt(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Wt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Gt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Kt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Rt.prototype).add=function(e,t){Pt(this),this.i=null,e=Mt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Pt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Pt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Pt(this);let t=[];if("string"===typeof e)Dt(this,e)&&(t=t.concat(this.g.get(Mt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Pt(this),this.i=null,Dt(this,e=Mt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},d(Vt,pe),Vt.prototype.g=function(){return new qt(this.l,this.j)},Vt.prototype.i=(mt={},function(){return mt}),d(qt,ne),(e=qt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ht(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ht(this)),this.g&&(this.readyState=3,Ht(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Bt(this):Ht(this),3==this.readyState&&zt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Bt(this))},e.Qa=function(e){this.g&&(this.response=e,Bt(this))},e.ga=function(){this.g&&Bt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(qt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Kt,ne);var Qt=/^https?$/i,Yt=["POST","PUT"];function Jt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Xt(e),Zt(e)}function Xt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function $t(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=tn(e)||2!=e.Z()))if(e.u&&4==tn(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==tn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Qt.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<tn(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Xt(e)}}finally{Zt(e)}}}function Zt(e,t){if(e.g){en(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function en(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function tn(e){return e.g?e.g.readyState:0}function nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function rn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sn(e){this.Aa=0,this.i=[],this.j=new ke,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rn("baseRetryDelayMs",5e3,e),this.cb=rn("retryDelaySeedMs",1e4,e),this.Wa=rn("forwardChannelMaxRetries",2,e),this.wa=rn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(e&&e.concurrentRequestLimit),this.Da=new Ut,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function on(e){if(ln(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),dn(e,n),(t=new Le(e,e.j,t)).L=2,t.v=dt(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=xn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}_n(e)}function an(e){e.g&&(mn(e),e.g.cancel(),e.g=null)}function ln(e){an(e),e.u&&(i.clearTimeout(e.u),e.u=null),vn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function cn(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;A||N(),T||(A(),T=!0),k.add(t,e),e.B=0}}function un(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),dn(e,r),e.m&&e.o&&Wt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=hn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Fe(n,r,t)}function dn(e,t){e.H&&y(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function hn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{Ft(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function fn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;A||N(),T||(A(),T=!0),k.add(t,e),e.v=0}}function pn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),bn(e,e.v)),e.v++,!0)}function mn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function gn(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),dn(e,t),e.m&&e.o&&Wt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function vn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function yn(e,t){var n=null;if(e.g==t){vn(e),mn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ee(),new Ae(r,n)),cn(e)}else fn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Te(c(e.Ga,e,t),bn(e,e.B)),e.B++,!0))}(e,t)||2==r&&pn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:wn(e,5);break;case 4:wn(e,10);break;case 3:wn(e,6);break;default:wn(e,2)}}function bn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function wn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),dt(r),t?function(e,t){const n=new ke;if(i.Image){const r=new Image;r.onload=u(jt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(jt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(jt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(jt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new ke;const n=new AbortController,r=setTimeout(()=>{n.abort(),jt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?jt(0,0,!0,t):jt(0,0,!1,t)}).catch(()=>{clearTimeout(r),jt(0,0,!1,t)})}(r.toString(),n)}else Ce(2);e.G=0,e.l&&e.l.sa(t),_n(e),ln(e)}function _n(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function En(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),dn(e,r),r}function xn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Kt(new Vt({eb:n})):new Kt(e.pa)).Ha(e.J),t}function Sn(){}function In(){}function Cn(e,t){ne.call(this),this.g=new sn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new kn(this)}function An(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Tn(){be.call(this),this.status=1}function kn(e){this.g=e}(e=Kt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?me(this.o):me(Re),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Jt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Yt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Jt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),Kt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?$t(this):this.bb())},e.bb=function(){$t(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=sn.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ce(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=En(this,null,this.W),cn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),_(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=hn(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),dn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Gt(s)))+"&"+t:this.m&&Wt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Fe(i,n,null)):Fe(i,n,t),this.G=2}}else 3==this.G&&(e?un(this,e):0==this.i.length||Xe(this.h)||un(this))},e.Fa=function(){if(this.u=null,gn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),an(this),gn(this))},e.Za=function(){null!=this.C&&(this.C=null,an(this),pn(this),Ce(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Sn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},In.prototype.g=function(e,t){return new Cn(e,t)},d(Cn,ne),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){on(this.g)},Cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&cn(t)},Cn.prototype.N=function(){this.g.l=null,delete this.j,on(this.g),delete this.g,Cn.aa.N.call(this)},d(An,ye),d(Tn,be),d(kn,Sn),kn.prototype.ua=function(){re(this.g,"a")},kn.prototype.ta=function(e){re(this.g,new An(e))},kn.prototype.sa=function(e){re(this.g,new Tn)},kn.prototype.ra=function(){re(this.g,"b")},In.prototype.createWebChannel=In.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,Ct=Tt.createWebChannelTransport=function(){return new In},It=Tt.getStatEventTarget=function(){return Ee()},St=Tt.Event=we,xt=Tt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,Et=Tt.ErrorCode=Pe,Oe.COMPLETE="complete",_t=Tt.EventType=Oe,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,wt=Tt.WebChannel=ge,Tt.FetchXmlHttpFactory=Vt,Kt.prototype.listenOnce=Kt.prototype.L,Kt.prototype.getLastError=Kt.prototype.Ka,Kt.prototype.getLastErrorCode=Kt.prototype.Ba,Kt.prototype.getStatus=Kt.prototype.Z,Kt.prototype.getResponseJson=Kt.prototype.Oa,Kt.prototype.getResponseText=Kt.prototype.oa,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Ha,bt=Tt.XhrIo=Kt}).apply("undefined"!==typeof At?At:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const kt="@firebase/firestore",Nt="4.9.0";class Rt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rt.UNAUTHENTICATED=new Rt(null),Rt.GOOGLE_CREDENTIALS=new Rt("google-credentials-uid"),Rt.FIRST_PARTY=new Rt("first-party-uid"),Rt.MOCK_USER=new Rt("mock-user");let Pt="12.0.0";const Ot=new X("@firebase/firestore");function Dt(){return Ot.logLevel}function Lt(e){if(Ot.logLevel<=W.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ut);Ot.debug("Firestore (".concat(Pt,"): ").concat(e),...i)}}function Mt(e){if(Ot.logLevel<=W.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ut);Ot.error("Firestore (".concat(Pt,"): ").concat(e),...i)}}function jt(e){if(Ot.logLevel<=W.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ut);Ot.warn("Firestore (".concat(Pt,"): ").concat(e),...i)}}function Ut(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ft(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Vt(e,r,n)}function Vt(e,t,n){let r="FIRESTORE (".concat(Pt,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Mt(r),new Error(r)}function qt(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Vt(t,i,r)}function zt(e,t){return e}const Bt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ht extends N{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Gt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Wt{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Kt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Rt.UNAUTHENTICATED))}shutdown(){}}class Qt{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Yt{constructor(e){this.t=e,this.currentUser=Rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){qt(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Gt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Gt,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{Lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Gt)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(qt("string"==typeof t.accessToken,31837,{l:t}),new Wt(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qt(null===e||"string"==typeof e,2055,{h:e}),new Rt(e)}}class Jt{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Rt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Xt{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Jt(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $t{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zt{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$e(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){qt(void 0===this.o,3512);const n=e=>{null!=e.error&&Lt("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,Lt("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $t(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(qt("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new $t(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function en(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class tn{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=en(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function nn(e,t){return e<t?-1:e>t?1:0}function rn(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return an(n)===an(i)?nn(n,i):an(n)?1:-1}return nn(e.length,t.length)}const sn=55296,on=57343;function an(e){const t=e.charCodeAt(0);return t>=sn&&t<=on}function ln(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const cn="__name__";class un{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ft(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Ft(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===un.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof un?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=un.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return nn(e.length,t.length)}static compareSegments(e,t){const n=un.isNumericId(e),r=un.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?un.extractNumericId(e).compare(un.extractNumericId(t)):rn(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mt.fromString(e.substring(4,e.length-2))}}class dn extends un{construct(e,t,n){return new dn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Ht(Bt.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new dn(e)}static emptyPath(){return new dn([])}}const hn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends un{construct(e,t,n){return new fn(e,t,n)}static isValidIdentifier(e){return hn.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===cn}static keyField(){return new fn([cn])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ht(Bt.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ht(Bt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ht(Bt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Ht(Bt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(t)}static emptyPath(){return new fn([])}}class pn{constructor(e){this.path=e}static fromPath(e){return new pn(dn.fromString(e))}static fromName(e){return new pn(dn.fromString(e).popFirst(5))}static empty(){return new pn(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pn(new dn(e.slice()))}}function mn(e,t,n){if(!n)throw new Ht(Bt.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function gn(e){if(!pn.isDocumentKey(e))throw new Ht(Bt.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function vn(e){if(pn.isDocumentKey(e))throw new Ht(Bt.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function yn(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function bn(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ft(12329,{type:typeof e})}function wn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ht(Bt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bn(e);throw new Ht(Bt.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function _n(e,t){if(t<=0)throw new Ht(Bt.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}function En(e,t){const n={typeString:e};return t&&(n.value=t),n}function xn(e,t){if(!yn(e))throw new Ht(Bt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const o=e[r];if(i&&typeof o!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&o!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new Ht(Bt.INVALID_ARGUMENT,n);return!0}const Sn=-62135596800,In=1e6;class Cn{static now(){return Cn.fromMillis(Date.now())}static fromDate(e){return Cn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*In);return new Cn(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ht(Bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ht(Bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sn)throw new Ht(Bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ht(Bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/In}_compareTo(e){return this.seconds===e.seconds?nn(this.nanoseconds,e.nanoseconds):nn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Cn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xn(e,Cn._jsonSchema))return new Cn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sn;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Cn._jsonSchemaVersion="firestore/timestamp/1.0",Cn._jsonSchema={type:En("string",Cn._jsonSchemaVersion),seconds:En("number"),nanoseconds:En("number")};class An{static fromTimestamp(e){return new An(e)}static min(){return new An(new Cn(0,0))}static max(){return new An(new Cn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Tn=-1;class kn{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}kn.UNKNOWN_ID=-1;function Nn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=An.fromTimestamp(1e9===r?new Cn(n+1,0):new Cn(n,r));return new Pn(i,pn.empty(),t)}function Rn(e){return new Pn(e.readTime,e.key,Tn)}class Pn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Pn(An.min(),pn.empty(),Tn)}static max(){return new Pn(An.max(),pn.empty(),Tn)}}function On(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=pn.comparator(e.documentKey,t.documentKey),0!==n?n:nn(e.largestBatchId,t.largestBatchId))}const Dn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ln{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Mn(e){if(e.code!==Bt.FAILED_PRECONDITION||e.message!==Dn)throw e;Lt("LocalStore","Unexpectedly lost primary lease")}class jn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ft(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new jn((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof jn?t:jn.resolve(t)}catch(e){return jn.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):jn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):jn.reject(t)}static resolve(e){return new jn((t,n)=>{t(e)})}static reject(e){return new jn((t,n)=>{n(e)})}static waitFor(e){return new jn((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=jn.resolve(!1);for(const n of e)t=t.next(e=>e?jn.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new jn((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new jn((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Un(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fn(e){return"IndexedDbTransactionError"===e.name}class Vn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vn.ce=-1;const qn=-1;function zn(e){return null==e}function Bn(e){return 0===e&&1/e==-1/0}function Hn(e){return"number"==typeof e&&Number.isInteger(e)&&!Bn(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Gn="\x01";function Wn(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Qn(t)),t=Kn(e.get(n),t);return Qn(t)}function Kn(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Gn:n+="\x01\x11";break;default:n+=t}}return n}function Qn(e){return e+Gn+"\x01"}const Yn="remoteDocuments",Jn="owner",Xn="mutationQueues",$n="mutations";const Zn="documentMutations",er="remoteDocumentsV14",tr="remoteDocumentGlobal",nr="targets",rr="targetDocuments",ir="targetGlobal",sr="collectionParents",or="clientMetadata",ar="bundles",lr="namedQueries",cr="indexConfiguration",ur="indexState",dr="indexEntries",hr="documentOverlays",fr="globals",pr=[Xn,$n,Zn,Yn,nr,Jn,ir,rr,or,tr,sr,ar,lr],mr=[Xn,$n,Zn,er,nr,Jn,ir,rr,or,tr,sr,ar,lr,hr],gr=mr,vr=[...gr,cr,ur,dr];function yr(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function br(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class _r{constructor(e,t){this.comparator=e,this.root=t||xr.EMPTY}insert(e,t){return new _r(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xr.BLACK,null,null))}remove(e){return new _r(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Er(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Er(this.root,e,this.comparator,!1)}getReverseIterator(){return new Er(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Er(this.root,e,this.comparator,!0)}}class Er{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xr{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:xr.RED,this.left=null!=r?r:xr.EMPTY,this.right=null!=i?i:xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new xr(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return xr.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ft(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ft(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ft(27949);return e+(this.isRed()?0:1)}}xr.EMPTY=null,xr.RED=!0,xr.BLACK=!1,xr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ft(57766)}get value(){throw Ft(16141)}get color(){throw Ft(16727)}get left(){throw Ft(29726)}get right(){throw Ft(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new xr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Sr{constructor(e){this.comparator=e,this.data=new _r(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ir(this.data.getIterator())}getIteratorFrom(e){return new Ir(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Sr))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Sr(this.comparator);return t.data=e,t}}class Ir{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Cr{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new Cr([])}unionWith(e){let t=new Sr(fn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Cr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ln(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Ar extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Tr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ar("Invalid base64 string: "+e):e}}(e);return new Tr(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Tr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tr.EMPTY_BYTE_STRING=new Tr("");const kr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(e){if(qt(!!e,39018),"string"==typeof e){let t=0;const n=kr.exec(e);if(qt(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Rr(e.seconds),nanos:Rr(e.nanos)}}function Rr(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Pr(e){return"string"==typeof e?Tr.fromBase64String(e):Tr.fromUint8Array(e)}const Or="server_timestamp",Dr="__type__",Lr="__previous_value__",Mr="__local_write_time__";function jr(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Dr])||void 0===t?void 0:t.stringValue)===Or}function Ur(e){const t=e.mapValue.fields[Lr];return jr(t)?Ur(t):t}function Fr(e){const t=Nr(e.mapValue.fields[Mr].timestampValue);return new Cn(t.seconds,t.nanos)}class Vr{constructor(e,t,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const qr="(default)";class zr{constructor(e,t){this.projectId=e,this.database=t||qr}static empty(){return new zr("","")}get isDefaultDatabase(){return this.database===qr}isEqual(e){return e instanceof zr&&e.projectId===this.projectId&&e.database===this.database}}const Br="__type__",Hr="__max__",Gr={mapValue:{fields:{__type__:{stringValue:Hr}}}},Wr="__vector__",Kr="value";function Qr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?jr(e)?4:di(e)?9007199254740991:ci(e)?10:11:Ft(28295,{value:e})}function Yr(e,t){if(e===t)return!0;const n=Qr(e);if(n!==Qr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fr(e).isEqual(Fr(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Nr(e.timestampValue),r=Nr(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Pr(e.bytesValue).isEqual(Pr(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Rr(e.geoPointValue.latitude)===Rr(t.geoPointValue.latitude)&&Rr(e.geoPointValue.longitude)===Rr(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Rr(e.integerValue)===Rr(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Rr(e.doubleValue),r=Rr(t.doubleValue);return n===r?Bn(n)===Bn(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ln(e.arrayValue.values||[],t.arrayValue.values||[],Yr);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(yr(n)!==yr(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Yr(n[i],r[i])))return!1;return!0}(e,t);default:return Ft(52216,{left:e})}}function Jr(e,t){return void 0!==(e.values||[]).find(e=>Yr(e,t))}function Xr(e,t){if(e===t)return 0;const n=Qr(e),r=Qr(t);if(n!==r)return nn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return nn(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Rr(e.integerValue||e.doubleValue),r=Rr(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return $r(e.timestampValue,t.timestampValue);case 4:return $r(Fr(e),Fr(t));case 5:return rn(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Pr(e),r=Pr(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=nn(n[i],r[i]);if(0!==e)return e}return nn(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=nn(Rr(e.latitude),Rr(t.latitude));return 0!==n?n:nn(Rr(e.longitude),Rr(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Zr(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,s){const o=e.fields||{},a=t.fields||{},l=null===(n=o[Kr])||void 0===n?void 0:n.arrayValue,c=null===(r=a[Kr])||void 0===r?void 0:r.arrayValue,u=nn((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Zr(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Gr.mapValue&&t===Gr.mapValue)return 0;if(e===Gr.mapValue)return 1;if(t===Gr.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=rn(r[o],s[o]);if(0!==e)return e;const t=Xr(n[r[o]],i[s[o]]);if(0!==t)return t}return nn(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ft(23264,{he:n})}}function $r(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return nn(e,t);const n=Nr(e),r=Nr(t),i=nn(n.seconds,r.seconds);return 0!==i?i:nn(n.nanos,r.nanos)}function Zr(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Xr(n[i],r[i]);if(e)return e}return nn(n.length,r.length)}function ei(e){return ti(e)}function ti(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Nr(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Pr(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return pn.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ti(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(ti(e.fields[i]));return n+"}"}(e.mapValue):Ft(61005,{value:e})}function ni(e){switch(Qr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ur(e);return t?16+ni(t):16;case 5:return 2*e.stringValue.length;case 6:return Pr(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+ni(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return br(e.fields,(e,n)=>{t+=e.length+ni(n)}),t}(e.mapValue);default:throw Ft(13486,{value:e})}}function ri(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ii(e){return!!e&&"integerValue"in e}function si(e){return!!e&&"arrayValue"in e}function oi(e){return!!e&&"nullValue"in e}function ai(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function li(e){return!!e&&"mapValue"in e}function ci(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Br])||void 0===t?void 0:t.stringValue)===Wr}function ui(e){if(e.geoPointValue)return{geoPointValue:c({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:c({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return br(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=ui(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ui(e.arrayValue.values[n]);return t}return c({},e)}function di(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Hr}class hi{constructor(e){this.value=e}static empty(){return new hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!li(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ui(t)}setAll(e){let t=fn.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ui(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());li(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];li(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){br(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new hi(ui(this.value))}}function fi(e){const t=[];return br(e.fields,(e,n)=>{const r=new fn([e]);if(li(n)){const e=fi(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Cr(t)}class pi{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new pi(e,0,An.min(),An.min(),An.min(),hi.empty(),0)}static newFoundDocument(e,t,n,r){return new pi(e,1,t,An.min(),n,r,0)}static newNoDocument(e,t){return new pi(e,2,t,An.min(),An.min(),hi.empty(),0)}static newUnknownDocument(e,t){return new pi(e,3,t,An.min(),An.min(),hi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(An.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=An.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class mi{constructor(e,t){this.position=e,this.inclusive=t}}function gi(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?pn.comparator(pn.fromName(o.referenceValue),n.key):Xr(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function vi(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Yr(e.position[n],t.position[n]))return!1;return!0}class yi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function bi(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class wi{}class _i extends wi{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ki(e,t,n):"array-contains"===t?new Oi(e,n):"in"===t?new Di(e,n):"not-in"===t?new Li(e,n):"array-contains-any"===t?new Mi(e,n):new _i(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ni(e,n):new Ri(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Xr(t,this.value)):null!==t&&Qr(this.value)===Qr(t)&&this.matchesComparison(Xr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ft(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ei extends wi{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ei(e,t)}matches(e){return xi(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xi(e){return"and"===e.op}function Si(e){return Ii(e)&&xi(e)}function Ii(e){for(const t of e.filters)if(t instanceof Ei)return!1;return!0}function Ci(e){if(e instanceof _i)return e.field.canonicalString()+e.op.toString()+ei(e.value);if(Si(e))return e.filters.map(e=>Ci(e)).join(",");{const t=e.filters.map(e=>Ci(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Ai(e,t){return e instanceof _i?function(e,t){return t instanceof _i&&e.op===t.op&&e.field.isEqual(t.field)&&Yr(e.value,t.value)}(e,t):e instanceof Ei?function(e,t){return t instanceof Ei&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Ai(n,t.filters[r]),!0)}(e,t):void Ft(19439)}function Ti(e){return e instanceof _i?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ei(e.value))}(e):e instanceof Ei?function(e){return e.op.toString()+" {"+e.getFilters().map(Ti).join(" ,")+"}"}(e):"Filter"}class ki extends _i{constructor(e,t,n){super(e,t,n),this.key=pn.fromName(n.referenceValue)}matches(e){const t=pn.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ni extends _i{constructor(e,t){super(e,"in",t),this.keys=Pi("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ri extends _i{constructor(e,t){super(e,"not-in",t),this.keys=Pi("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Pi(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>pn.fromName(e.referenceValue))}class Oi extends _i{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return si(t)&&Jr(t.arrayValue,this.value)}}class Di extends _i{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Jr(this.value.arrayValue,t)}}class Li extends _i{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Jr(this.value.arrayValue,t)}}class Mi extends _i{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!si(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Jr(this.value.arrayValue,e))}}class ji{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Te=null}}function Ui(e){return new ji(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Fi(e){const t=zt(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Ci(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),zn(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>ei(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>ei(e)).join(",")),t.Te=e}return t.Te}function Vi(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!bi(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ai(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!vi(e.startAt,t.startAt)&&vi(e.endAt,t.endAt)}function qi(e){return pn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class zi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Bi(e,t,n,r,i,s,o,a){return new zi(e,t,n,r,i,s,o,a)}function Hi(e){return new zi(e)}function Gi(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Wi(e){return null!==e.collectionGroup}function Ki(e){const t=zt(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Sr(fn.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new yi(r,n))}),e.has(fn.keyField().canonicalString())||t.Ie.push(new yi(fn.keyField(),n))}return t.Ie}function Qi(e){const t=zt(e);return t.Ee||(t.Ee=Yi(t,Ki(e))),t.Ee}function Yi(e,t){if("F"===e.limitType)return Ui(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new yi(e.field,t)});const n=e.endAt?new mi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new mi(e.startAt.position,e.startAt.inclusive):null;return Ui(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ji(e,t){const n=e.filters.concat([t]);return new zi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Xi(e,t,n){return new zi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function $i(e,t){return Vi(Qi(e),Qi(t))&&e.limitType===t.limitType}function Zi(e){return"".concat(Fi(Qi(e)),"|lt:").concat(e.limitType)}function es(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Ti(e)).join(", "),"]")),zn(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>ei(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>ei(e)).join(",")),"Target(".concat(t,")")}(Qi(e)),"; limitType=").concat(e.limitType,")")}function ts(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):pn.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ki(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=gi(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ki(e),t))&&!(e.endAt&&!function(e,t,n){const r=gi(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ki(e),t))}(e,t)}function ns(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function rs(e){return(t,n)=>{let r=!1;for(const i of Ki(e)){const e=is(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function is(e,t,n){const r=e.field.isKeyField()?pn.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Xr(r,i):Ft(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ft(19790,{direction:e.dir})}}class ss{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){br(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return wr(this.inner)}size(){return this.innerSize}}const os=new _r(pn.comparator);function as(){return os}const ls=new _r(pn.comparator);function cs(){let e=ls;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function us(e){let t=ls;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ds(){return fs()}function hs(){return fs()}function fs(){return new ss(e=>e.toString(),(e,t)=>e.isEqual(t))}const ps=new _r(pn.comparator),ms=new Sr(pn.comparator);function gs(){let e=ms;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const vs=new Sr(nn);function ys(){return vs}function bs(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bn(t)?"-0":t}}function ws(e){return{integerValue:""+e}}function _s(e,t){return Hn(t)?ws(t):bs(e,t)}class Es{constructor(){this._=void 0}}function xs(e,t,n){return e instanceof Cs?function(e,t){const n={fields:{[Dr]:{stringValue:Or},[Mr]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&jr(t)&&(t=Ur(t)),t&&(n.fields[Lr]=t),{mapValue:n}}(n,t):e instanceof As?Ts(e,t):e instanceof ks?Ns(e,t):function(e,t){const n=Is(e,t),r=Ps(n)+Ps(e.Ae);return ii(n)&&ii(e.Ae)?ws(r):bs(e.serializer,r)}(e,t)}function Ss(e,t,n){return e instanceof As?Ts(e,t):e instanceof ks?Ns(e,t):n}function Is(e,t){return e instanceof Rs?function(e){return ii(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Cs extends Es{}class As extends Es{constructor(e){super(),this.elements=e}}function Ts(e,t){const n=Os(t);for(const r of e.elements)n.some(e=>Yr(e,r))||n.push(r);return{arrayValue:{values:n}}}class ks extends Es{constructor(e){super(),this.elements=e}}function Ns(e,t){let n=Os(t);for(const r of e.elements)n=n.filter(e=>!Yr(e,r));return{arrayValue:{values:n}}}class Rs extends Es{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ps(e){return Rr(e.integerValue||e.doubleValue)}function Os(e){return si(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ds{constructor(e,t){this.version=e,this.transformResults=t}}class Ls{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ls}static exists(e){return new Ls(void 0,e)}static updateTime(e){return new Ls(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ms(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class js{}function Us(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Qs(e.key,Ls.none()):new Bs(e.key,e.data,Ls.none());{const n=e.data,r=hi.empty();let i=new Sr(fn.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Hs(e.key,r,new Cr(i.toArray()),Ls.none())}}function Fs(e,t,n){e instanceof Bs?function(e,t,n){const r=e.value.clone(),i=Ws(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Hs?function(e,t,n){if(!Ms(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ws(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Gs(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Vs(e,t,n,r){return e instanceof Bs?function(e,t,n,r){if(!Ms(e.precondition,t))return n;const i=e.value.clone(),s=Ks(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Hs?function(e,t,n,r){if(!Ms(e.precondition,t))return n;const i=Ks(e.fieldTransforms,r,t),s=t.data;return s.setAll(Gs(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ms(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function qs(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Is(r.transform,e||null);null!=i&&(null===n&&(n=hi.empty()),n.set(r.field,i))}return n||null}function zs(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ln(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof As&&t instanceof As||e instanceof ks&&t instanceof ks?ln(e.elements,t.elements,Yr):e instanceof Rs&&t instanceof Rs?Yr(e.Ae,t.Ae):e instanceof Cs&&t instanceof Cs}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Bs extends js{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Hs extends js{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Gs(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Ws(e,t,n){const r=new Map;qt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Ss(o,a,n[i]))}return r}function Ks(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,xs(e,s,t))}return r}class Qs extends js{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ys extends js{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Js{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Fs(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Vs(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Vs(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=hs();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Us(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(An.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),gs())}isEqual(e){return this.batchId===e.batchId&&ln(this.mutations,e.mutations,(e,t)=>zs(e,t))&&ln(this.baseMutations,e.baseMutations,(e,t)=>zs(e,t))}}class Xs{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){qt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=ps;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Xs(e,t,n,r)}}class $s{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Zs{constructor(e,t){this.count=e,this.unchangedNames=t}}var eo,to;function no(e){switch(e){case Bt.OK:return Ft(64938);case Bt.CANCELLED:case Bt.UNKNOWN:case Bt.DEADLINE_EXCEEDED:case Bt.RESOURCE_EXHAUSTED:case Bt.INTERNAL:case Bt.UNAVAILABLE:case Bt.UNAUTHENTICATED:return!1;case Bt.INVALID_ARGUMENT:case Bt.NOT_FOUND:case Bt.ALREADY_EXISTS:case Bt.PERMISSION_DENIED:case Bt.FAILED_PRECONDITION:case Bt.ABORTED:case Bt.OUT_OF_RANGE:case Bt.UNIMPLEMENTED:case Bt.DATA_LOSS:return!0;default:return Ft(15467,{code:e})}}function ro(e){if(void 0===e)return Mt("GRPC error has no .code"),Bt.UNKNOWN;switch(e){case eo.OK:return Bt.OK;case eo.CANCELLED:return Bt.CANCELLED;case eo.UNKNOWN:return Bt.UNKNOWN;case eo.DEADLINE_EXCEEDED:return Bt.DEADLINE_EXCEEDED;case eo.RESOURCE_EXHAUSTED:return Bt.RESOURCE_EXHAUSTED;case eo.INTERNAL:return Bt.INTERNAL;case eo.UNAVAILABLE:return Bt.UNAVAILABLE;case eo.UNAUTHENTICATED:return Bt.UNAUTHENTICATED;case eo.INVALID_ARGUMENT:return Bt.INVALID_ARGUMENT;case eo.NOT_FOUND:return Bt.NOT_FOUND;case eo.ALREADY_EXISTS:return Bt.ALREADY_EXISTS;case eo.PERMISSION_DENIED:return Bt.PERMISSION_DENIED;case eo.FAILED_PRECONDITION:return Bt.FAILED_PRECONDITION;case eo.ABORTED:return Bt.ABORTED;case eo.OUT_OF_RANGE:return Bt.OUT_OF_RANGE;case eo.UNIMPLEMENTED:return Bt.UNIMPLEMENTED;case eo.DATA_LOSS:return Bt.DATA_LOSS;default:return Ft(39323,{code:e})}}(to=eo||(eo={}))[to.OK=0]="OK",to[to.CANCELLED=1]="CANCELLED",to[to.UNKNOWN=2]="UNKNOWN",to[to.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",to[to.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",to[to.NOT_FOUND=5]="NOT_FOUND",to[to.ALREADY_EXISTS=6]="ALREADY_EXISTS",to[to.PERMISSION_DENIED=7]="PERMISSION_DENIED",to[to.UNAUTHENTICATED=16]="UNAUTHENTICATED",to[to.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",to[to.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",to[to.ABORTED=10]="ABORTED",to[to.OUT_OF_RANGE=11]="OUT_OF_RANGE",to[to.UNIMPLEMENTED=12]="UNIMPLEMENTED",to[to.INTERNAL=13]="INTERNAL",to[to.UNAVAILABLE=14]="UNAVAILABLE",to[to.DATA_LOSS=15]="DATA_LOSS";let io=null;function so(){return new TextEncoder}const oo=new mt([4294967295,4294967295],0);function ao(e){const t=so().encode(e),n=new gt;return n.update(t),new Uint8Array(n.digest())}function lo(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new mt([n,r],0),new mt([i,s],0)]}class co{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new uo("Invalid padding: ".concat(t));if(n<0)throw new uo("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new uo("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new uo("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=mt.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(mt.fromNumber(n)));return 1===r.compare(oo)&&(r=new mt([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=ao(e),[n,r]=lo(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new co(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=ao(e),[n,r]=lo(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class uo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ho{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,fo.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ho(An.min(),r,new _r(nn),as(),gs())}}class fo{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new fo(n,t,gs(),gs(),gs())}}class po{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class mo{constructor(e,t){this.targetId=e,this.Ce=t}}class go{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tr.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class vo{constructor(){this.ve=0,this.Fe=wo(),this.Me=Tr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=gs(),t=gs(),n=gs();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ft(38017,{changeType:i})}}),new fo(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=wo()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,qt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class yo{constructor(e){this.Ge=e,this.ze=new Map,this.je=as(),this.Je=bo(),this.He=bo(),this.Ye=new _r(nn)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Ft(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(qi(s))if(0===n){const e=new pn(s.path);this.et(t,e,pi.newNoDocument(e,An.min()))}else qt(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=io)||void 0===i||i.lt(function(e,t,n,r,i,s,o,a,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===d||void 0===d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(o=null===d||void 0===d||null===(a=d.bits)||void 0===a||null===(a=a.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Pr(n).toUint8Array()}catch(e){if(e instanceof Ar)return jt("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new co(s,r,i)}catch(e){return jt(e instanceof uo?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&qi(i.target)){const t=new pn(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,pi.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=gs();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new ho(e,t,this.Ye,this.je,n);return this.je=as(),this.Je=bo(),this.He=bo(),this.Ye=new _r(nn),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new vo,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Sr(nn),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Sr(nn),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Lt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vo),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function bo(){return new _r(pn.comparator)}function wo(){return new _r(pn.comparator)}const _o={asc:"ASCENDING",desc:"DESCENDING"},Eo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xo={and:"AND",or:"OR"};class So{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Io(e,t){return e.useProto3Json||zn(t)?t:{value:t}}function Co(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ao(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function To(e,t){return Co(e,t.toTimestamp())}function ko(e){return qt(!!e,49232),An.fromTimestamp(function(e){const t=Nr(e);return new Cn(t.seconds,t.nanos)}(e))}function No(e,t){return Ro(e,t).canonicalString()}function Ro(e,t){const n=function(e){return new dn(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Po(e){const t=dn.fromString(e);return qt($o(t),10190,{key:t.toString()}),t}function Oo(e,t){return No(e.databaseId,t.path)}function Do(e,t){const n=Po(t);if(n.get(1)!==e.databaseId.projectId)throw new Ht(Bt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ht(Bt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new pn(Uo(n))}function Lo(e,t){return No(e.databaseId,t)}function Mo(e){const t=Po(e);return 4===t.length?dn.emptyPath():Uo(t)}function jo(e){return new dn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Uo(e){return qt(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Fo(e,t,n){return{name:Oo(e,t),fields:n.value.mapValue.fields}}function Vo(e,t){let n;if(t instanceof Bs)n={update:Fo(e,t.key,t.value)};else if(t instanceof Qs)n={delete:Oo(e,t.key)};else if(t instanceof Hs)n={update:Fo(e,t.key,t.data),updateMask:Xo(t.fieldMask)};else{if(!(t instanceof Ys))return Ft(16599,{Vt:t.type});n={verify:Oo(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Cs)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof As)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ks)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Rs)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Ft(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:To(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ft(27497)}(e,t.precondition)),n}function qo(e,t){return{documents:[Lo(e,t.path)]}}function zo(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Lo(e,i);const s=function(e){if(0!==e.length)return Jo(Ei.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Qo(e.field),direction:Go(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Io(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Bo(e){let t=Mo(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){qt(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Ho(e);return t instanceof Ei&&Si(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new yi(Yo(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,zn(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new mi(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new mi(n,t)}(n.endAt)),Bi(t,i,o,s,a,"F",l,c)}function Ho(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Yo(e.unaryFilter.field);return _i.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Yo(e.unaryFilter.field);return _i.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Yo(e.unaryFilter.field);return _i.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Yo(e.unaryFilter.field);return _i.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ft(61313);default:return Ft(60726)}}(e):void 0!==e.fieldFilter?function(e){return _i.create(Yo(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ft(58110);default:return Ft(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ei.create(e.compositeFilter.filters.map(e=>Ho(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ft(1026)}}(e.compositeFilter.op))}(e):Ft(30097,{filter:e})}function Go(e){return _o[e]}function Wo(e){return Eo[e]}function Ko(e){return xo[e]}function Qo(e){return{fieldPath:e.canonicalString()}}function Yo(e){return fn.fromServerFormat(e.fieldPath)}function Jo(e){return e instanceof _i?function(e){if("=="===e.op){if(ai(e.value))return{unaryFilter:{field:Qo(e.field),op:"IS_NAN"}};if(oi(e.value))return{unaryFilter:{field:Qo(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ai(e.value))return{unaryFilter:{field:Qo(e.field),op:"IS_NOT_NAN"}};if(oi(e.value))return{unaryFilter:{field:Qo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qo(e.field),op:Wo(e.op),value:e.value}}}(e):e instanceof Ei?function(e){const t=e.getFilters().map(e=>Jo(e));return 1===t.length?t[0]:{compositeFilter:{op:Ko(e.op),filters:t}}}(e):Ft(54877,{filter:e})}function Xo(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function $o(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Zo{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:An.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:An.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Tr.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Zo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Zo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ea{constructor(e){this.yt=e}}function ta(e){const t=Bo({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Xi(t,t.limit,"L"):t}class na{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Rr(e.integerValue));else if("doubleValue"in e){const n=Rr(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Bn(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=Nr(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Pr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?di(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):ci(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ft(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Kr,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(Rr(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),pn.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}na.Kt=new na;class ra{constructor(){this.Cn=new ia}addToCollectionParentIndex(e,t){return this.Cn.add(t),jn.resolve()}getCollectionParents(e,t){return jn.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return jn.resolve()}deleteFieldIndex(e,t){return jn.resolve()}deleteAllFieldIndexes(e){return jn.resolve()}createTargetIndexes(e,t){return jn.resolve()}getDocumentsMatchingTarget(e,t){return jn.resolve(null)}getIndexType(e,t){return jn.resolve(0)}getFieldIndexes(e,t){return jn.resolve([])}getNextCollectionGroupToUpdate(e){return jn.resolve(null)}getMinOffset(e,t){return jn.resolve(Pn.min())}getMinOffsetFromCollectionGroup(e,t){return jn.resolve(Pn.min())}updateCollectionGroup(e,t,n){return jn.resolve()}updateIndexEntries(e,t){return jn.resolve()}}class ia{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Sr(dn.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Sr(dn.comparator)).toArray()}}new Uint8Array(0);const sa={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oa=41943040;class aa{static withCacheSize(e){return new aa(e,aa.DEFAULT_COLLECTION_PERCENTILE,aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}aa.DEFAULT_COLLECTION_PERCENTILE=10,aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,aa.DEFAULT=new aa(oa,aa.DEFAULT_COLLECTION_PERCENTILE,aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),aa.DISABLED=new aa(-1,0,0);class la{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new la(0)}static cr(){return new la(-1)}}const ca="LruGarbageCollector",ua=1048576;function da(e,t){let[n,r]=e,[i,s]=t;const o=nn(n,i);return 0===o?nn(r,s):o}class ha{constructor(e){this.Ir=e,this.buffer=new Sr(da),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();da(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fa{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Lt(ca,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Fn(e)?Lt(ca,"Ignoring IndexedDB error during garbage collection: ",e):await Mn(e)}await this.Vr(3e5)})}}class pa{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return jn.resolve(Vn.ce);const n=new ha(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Lt("LruGarbageCollector","Garbage collection skipped; disabled"),jn.resolve(sa)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Lt("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),sa):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Lt("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Dt()<=W.DEBUG&&Lt("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),jn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function ma(e,t){return new pa(e,t)}class ga{constructor(){this.changes=new ss(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?jn.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class va{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ya{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Vs(n.mutation,e,Cr.empty(),Cn.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,gs()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gs();const r=ds();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=cs();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=ds();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,gs()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=as();const s=fs(),o=fs();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Hs)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Vs(o.mutation,t,o.mutation.getFieldMask(),Cn.now())):s.set(t.key,Cr.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new va(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=fs();let r=new _r((e,t)=>e-t),i=gs();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Cr.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||gs()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=hs();l.forEach(e=>{if(!i.has(e)){const r=Us(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return jn.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return pn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wi(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):jn.resolve(ds());let o=Tn,a=i;return s.next(t=>jn.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?jn.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,gs())).next(e=>({batchId:o,changes:us(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pn(t)).next(e=>{let t=cs();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=cs();return this.indexManager.getCollectionParents(e,i).next(o=>jn.forEach(o,o=>{const a=function(e,t){return new zi(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,pi.newInvalidDocument(r)))});let n=cs();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Vs(s.mutation,r,Cr.empty(),Cn.now()),ts(t,r)&&(n=n.insert(e,r))}),n})}}class ba{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return jn.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ko(e.createTime)}}(t)),jn.resolve()}getNamedQuery(e,t){return jn.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:ta(e.bundledQuery),readTime:ko(e.readTime)}}(t)),jn.resolve()}}class wa{constructor(){this.overlays=new _r(pn.comparator),this.qr=new Map}getOverlay(e,t){return jn.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ds();return jn.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),jn.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),jn.resolve()}getOverlaysForCollection(e,t,n){const r=ds(),i=t.length+1,s=new pn(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return jn.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new _r((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ds(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=ds(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return jn.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new $s(t,n));let i=this.qr.get(t);void 0===i&&(i=gs(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class _a{constructor(){this.sessionToken=Tr.EMPTY_BYTE_STRING}getSessionToken(e){return jn.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,jn.resolve()}}class Ea{constructor(){this.Qr=new Sr(xa.$r),this.Ur=new Sr(xa.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new xa(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new xa(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new pn(new dn([])),n=new xa(t,e),r=new xa(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new pn(new dn([])),n=new xa(t,e),r=new xa(t,e+1);let i=gs();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new xa(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class xa{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return pn.comparator(e.key,t.key)||nn(e.Yr,t.Yr)}static Kr(e,t){return nn(e.Yr,t.Yr)||pn.comparator(e.key,t.key)}}class Sa{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Sr(xa.$r)}checkEmpty(e){return jn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Js(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Zr=this.Zr.add(new xa(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return jn.resolve(s)}lookupMutationBatch(e,t){return jn.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return jn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return jn.resolve(0===this.mutationQueue.length?qn:this.tr-1)}getAllMutationBatches(e){return jn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new xa(t,0),r=new xa(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),jn.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Sr(nn);return t.forEach(e=>{const t=new xa(e,0),r=new xa(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),jn.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;pn.isDocumentKey(i)||(i=i.child(""));const s=new xa(new pn(i),0);let o=new Sr(nn);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},s),jn.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){qt(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return jn.forEach(t.mutations,r=>{const i=new xa(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new xa(t,0),r=this.Zr.firstAfterOrEqual(n);return jn.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,jn.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ia{constructor(e){this.ri=e,this.docs=new _r(pn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return jn.resolve(n?n.document.mutableCopy():pi.newInvalidDocument(t))}getEntries(e,t){let n=as();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():pi.newInvalidDocument(e))}),jn.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=as();const s=t.path,o=new pn(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||On(Rn(o),n)<=0||(r.has(o.key)||ts(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return jn.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ft(9500)}ii(e,t){return jn.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Ca(this)}getSize(e){return jn.resolve(this.size)}}class Ca extends ga{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),jn.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Aa{constructor(e){this.persistence=e,this.si=new ss(e=>Fi(e),Vi),this.lastRemoteSnapshotVersion=An.min(),this.highestTargetId=0,this.oi=0,this._i=new Ea,this.targetCount=0,this.ai=la.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),jn.resolve()}getLastRemoteSnapshotVersion(e){return jn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return jn.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),jn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),jn.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new la(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,jn.resolve()}updateTargetData(e,t){return this.Pr(t),jn.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,jn.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),jn.waitFor(i).next(()=>r)}getTargetCount(e){return jn.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return jn.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),jn.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),jn.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),jn.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return jn.resolve(n)}containsKey(e,t){return jn.resolve(this._i.containsKey(t))}}class Ta{constructor(e,t){this.ui={},this.overlays={},this.ci=new Vn(0),this.li=!1,this.li=!0,this.hi=new _a,this.referenceDelegate=e(this),this.Pi=new Aa(this),this.indexManager=new ra,this.remoteDocumentCache=function(e){return new Ia(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new ea(t),this.Ii=new ba(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wa,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Sa(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Lt("MemoryPersistence","Starting transaction:",e);const r=new ka(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return jn.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class ka extends Ln{constructor(e){super(),this.currentSequenceNumber=e}}class Na{constructor(e){this.persistence=e,this.Ri=new Ea,this.Vi=null}static mi(e){return new Na(e)}get fi(){if(this.Vi)return this.Vi;throw Ft(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),jn.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),jn.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),jn.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return jn.forEach(this.fi,n=>{const r=pn.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,An.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return jn.or([()=>jn.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ra{constructor(e,t){this.persistence=e,this.pi=new ss(e=>Wn(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=ma(this,t)}static mi(e,t){return new Ra(e,t)}Ei(){}di(e){return jn.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return jn.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?jn.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,An.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),jn.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),jn.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),jn.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),jn.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ni(e.data.value)),t}br(e,t,n){return jn.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return jn.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Pa{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=gs(),r=gs();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Pa(e,t.fromCache,n,r)}}class Oa{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Da{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=T()?8:Un(C())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Oa;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Dt()<=W.DEBUG&&Lt("QueryEngine","SDK will not create cache indexes for query:",es(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),jn.resolve()):(Dt()<=W.DEBUG&&Lt("QueryEngine","Query:",es(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Dt()<=W.DEBUG&&Lt("QueryEngine","The SDK decides to create cache indexes for query:",es(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qi(t))):jn.resolve())}ys(e,t){if(Gi(t))return jn.resolve(null);let n=Qi(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Xi(t,null,"F"),n=Qi(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=gs(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,Xi(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return Gi(t)||r.isEqual(An.min())?jn.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?jn.resolve(null):(Dt()<=W.DEBUG&&Lt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),es(t)),this.vs(e,s,t,Nn(r,Tn)).next(e=>e))})}Ds(e,t){let n=new Sr(rs(e));return t.forEach((t,r)=>{ts(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Dt()<=W.DEBUG&&Lt("QueryEngine","Using full collection scan to execute query:",es(t)),this.ps.getDocumentsMatchingQuery(e,t,Pn.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const La="LocalStore";class Ma{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new _r(nn),this.xs=new ss(e=>Fi(e),Vi),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ya(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function ja(e,t,n,r){return new Ma(e,t,n,r)}async function Ua(e,t){const n=zt(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=gs();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function Fa(e){const t=zt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Va(e,t,n){let r=gs(),i=gs();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=as();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(An.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Lt(La,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{ks:r,qs:i}})}function qa(e,t){const n=zt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=qn),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function za(e,t){const n=zt(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,jn.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new Zo(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Ba(e,t,n){const r=zt(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Fn(e))throw e;Lt(La,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Ha(e,t,n){const r=zt(e);let i=An.min(),s=gs();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=zt(e),i=r.xs.get(n);return void 0!==i?jn.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,Qi(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:An.min(),n?s:gs())).next(e=>(Ga(r,ns(t),e),{documents:e,Qs:s})))}function Ga(e,t,n){let r=e.Os.get(t)||An.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Wa{constructor(){this.activeTargetIds=ys()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ka{constructor(){this.Mo=new Wa,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Wa,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Qa{Oo(e){}shutdown(){}}const Ya="ConnectivityMonitor";class Ja{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Lt(Ya,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Lt(Ya,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Xa=null;function $a(){return null===Xa?Xa=268435456+Math.round(2147483648*Math.random()):Xa++,"0x"+Xa.toString(16)}const Za="RestConnection",el={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tl{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===qr?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=$a(),o=this.zo(e,t.toUriEncodedString());Lt(Za,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,i);const{host:l}=new URL(o),c=_(l);return this.Jo(e,o,a,n,c).then(t=>(Lt(Za,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw jt(Za,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Pt,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=el[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class nl{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const rl="WebChannelConnection";class il extends tl{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=$a();return new Promise((i,o)=>{const a=new bt;a.setWithCredentials(!0),a.listenOnce(_t.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Et.NO_ERROR:const n=a.getResponseJson();Lt(rl,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case Et.TIMEOUT:Lt(rl,"RPC '".concat(e,"' ").concat(s," timed out")),o(new Ht(Bt.DEADLINE_EXCEEDED,"Request time out"));break;case Et.HTTP_ERROR:const r=a.getStatus();if(Lt(rl,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",a.getResponseText()),r>0){var t;let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Bt).indexOf(t)>=0?t:Bt.UNKNOWN}(n.status);o(new Ht(e,n.message))}else o(new Ht(Bt.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ht(Bt.UNAVAILABLE,"Connection failed."));break;default:Ft(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{Lt(rl,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);Lt(rl,"RPC '".concat(e,"' ").concat(s," sending request:"),r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=$a(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ct(),o=It(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Lt(rl,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);this.I_(u);let d=!1,h=!1;const f=new nl({Yo:t=>{h?Lt(rl,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Lt(rl,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Lt(rl,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,wt.EventType.OPEN,()=>{h||(Lt(rl,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,wt.EventType.CLOSE,()=>{h||(h=!0,Lt(rl,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,wt.EventType.ERROR,t=>{h||(h=!0,jt(rl,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new Ht(Bt.UNAVAILABLE,"The operation could not be completed")))}),p(u,wt.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];qt(!!i,16349);const s=i,o=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Lt(rl,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=eo[e];if(void 0!==t)return ro(t)}(t),i=o.message;void 0===n&&(n=Bt.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),h=!0,f.a_(new Ht(n,i)),u.close()}else Lt(rl,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(o,St.STAT_EVENT,t=>{t.stat===xt.PROXY?Lt(rl,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===xt.NOPROXY&&Lt(rl,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function sl(){return"undefined"!=typeof document?document:null}function ol(e){return new So(e,!0)}class al{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Lt("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ll="PersistentStream";class cl{constructor(e,t,n,r,i,s,o,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new al(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===Bt.RESOURCE_EXHAUSTED?(Mt(t.toString()),Mt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Bt.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Ht(Bt.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Lt(ll,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Lt(ll,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ul extends cl{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ft(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(qt(void 0===t||"string"==typeof t,58123),Tr.fromBase64String(t||"")):(qt(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Tr.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Bt.UNKNOWN:ro(e.code);return new Ht(t,e.message||"")}(o);n=new go(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Do(e,r.document.name),s=ko(r.document.updateTime),o=r.document.createTime?ko(r.document.createTime):An.min(),a=new hi({mapValue:{fields:r.document.fields}}),l=pi.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new po(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Do(e,r.document),s=r.readTime?ko(r.readTime):An.min(),o=pi.newNoDocument(i,s),a=r.removedTargetIds||[];n=new po([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Do(e,r.document),s=r.removedTargetIds||[];n=new po([],s,i,null)}else{if(!("filter"in t))return Ft(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Zs(r,i),o=e.targetId;n=new mo(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return An.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?An.min():t.readTime?ko(t.readTime):An.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=jo(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=qi(r)?{documents:qo(e,r)}:{query:zo(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ao(e,t.resumeToken);const r=Io(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(An.min())>0){n.readTime=Co(e,t.snapshotVersion.toTimestamp());const r=Io(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ft(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=jo(this.serializer),t.removeTarget=e,this.q_(t)}}class dl extends cl{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return qt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qt(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){qt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(qt(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?ko(e.updateTime):ko(t);return n.isEqual(An.min())&&(n=ko(t)),new Ds(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=ko(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=jo(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Vo(this.serializer,e))};this.q_(t)}}class hl{}class fl extends hl{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Ht(Bt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Go(e,Ro(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ht(Bt.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Ho(e,Ro(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ht(Bt.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class pl{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(Mt(t),this.aa=!1):Lt("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const ml="RemoteStore";class gl{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Il(this)&&(Lt(ml,"Restarting streams for network reachability change."),await async function(e){const t=zt(e);t.Ea.add(4),await yl(t),t.Ra.set("Unknown"),t.Ea.delete(4),await vl(t)}(this))})}),this.Ra=new pl(n,r)}}async function vl(e){if(Il(e))for(const t of e.da)await t(!0)}async function yl(e){for(const t of e.da)await t(!1)}function bl(e,t){const n=zt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Sl(n)?xl(n):Hl(n).O_()&&_l(n,t))}function wl(e,t){const n=zt(e),r=Hl(n);n.Ia.delete(t),r.O_()&&El(n,t),0===n.Ia.size&&(r.O_()?r.L_():Il(n)&&n.Ra.set("Unknown"))}function _l(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(An.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Hl(e).Y_(t)}function El(e,t){e.Va.Ue(t),Hl(e).Z_(t)}function xl(e){e.Va=new yo({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Hl(e).start(),e.Ra.ua()}function Sl(e){return Il(e)&&!Hl(e).x_()&&e.Ia.size>0}function Il(e){return 0===zt(e).Ea.size}function Cl(e){e.Va=void 0}async function Al(e){e.Ra.set("Online")}async function Tl(e){e.Ia.forEach((t,n)=>{_l(e,t)})}async function kl(e,t){Cl(e),Sl(e)?(e.Ra.ha(t),xl(e)):e.Ra.set("Unknown")}async function Nl(e,t,n){if(e.Ra.set("Online"),t instanceof go&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Lt(ml,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Rl(e,n)}else if(t instanceof po?e.Va.Ze(t):t instanceof mo?e.Va.st(t):e.Va.tt(t),!n.isEqual(An.min()))try{const t=await Fa(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(Tr.EMPTY_BYTE_STRING,r.snapshotVersion)),El(e,t);const i=new Zo(r.target,t,n,r.sequenceNumber);_l(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Lt(ml,"Failed to raise snapshot:",t),await Rl(e,t)}}async function Rl(e,t,n){if(!Fn(t))throw t;e.Ea.add(1),await yl(e),e.Ra.set("Offline"),n||(n=()=>Fa(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Lt(ml,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await vl(e)})}function Pl(e,t){return t().catch(n=>Rl(e,n,t))}async function Ol(e){const t=zt(e),n=Gl(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:qn;for(;Dl(t);)try{const e=await qa(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Ll(t,e)}catch(e){await Rl(t,e)}Ml(t)&&jl(t)}function Dl(e){return Il(e)&&e.Ta.length<10}function Ll(e,t){e.Ta.push(t);const n=Gl(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Ml(e){return Il(e)&&!Gl(e).x_()&&e.Ta.length>0}function jl(e){Gl(e).start()}async function Ul(e){Gl(e).ra()}async function Fl(e){const t=Gl(e);for(const n of e.Ta)t.ea(n.mutations)}async function Vl(e,t,n){const r=e.Ta.shift(),i=Xs.from(r,t,n);await Pl(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Ol(e)}async function ql(e,t){t&&Gl(e).X_&&await async function(e,t){if(function(e){return no(e)&&e!==Bt.ABORTED}(t.code)){const n=e.Ta.shift();Gl(e).B_(),await Pl(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Ol(e)}}(e,t),Ml(e)&&jl(e)}async function zl(e,t){const n=zt(e);n.asyncQueue.verifyOperationInProgress(),Lt(ml,"RemoteStore received new credentials");const r=Il(n);n.Ea.add(3),await yl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await vl(n)}async function Bl(e,t){const n=zt(e);t?(n.Ea.delete(2),await vl(n)):t||(n.Ea.add(2),await yl(n),n.Ra.set("Unknown"))}function Hl(e){return e.ma||(e.ma=function(e,t,n){const r=zt(e);return r.sa(),new ul(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Al.bind(null,e),t_:Tl.bind(null,e),r_:kl.bind(null,e),H_:Nl.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Sl(e)?xl(e):e.Ra.set("Unknown")):(await e.ma.stop(),Cl(e))})),e.ma}function Gl(e){return e.fa||(e.fa=function(e,t,n){const r=zt(e);return r.sa(),new dl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ul.bind(null,e),r_:ql.bind(null,e),ta:Fl.bind(null,e),na:Vl.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Ol(e)):(await e.fa.stop(),e.Ta.length>0&&(Lt(ml,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Wl{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Gt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Wl(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ht(Bt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kl(e,t){if(Mt("AsyncQueue","".concat(t,": ").concat(e)),Fn(e))return new Ht(Bt.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Ql{static emptySet(e){return new Ql(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||pn.comparator(t.key,n.key):(e,t)=>pn.comparator(e.key,t.key),this.keyedMap=cs(),this.sortedSet=new _r(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ql))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ql;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Yl{constructor(){this.ga=new _r(pn.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ft(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Jl{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Jl(e,t,Ql.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$i(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Xl{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class $l{constructor(){this.queries=Zl(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=zt(e),r=n.queries;n.queries=Zl(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Ht(Bt.ABORTED,"Firestore shutting down"))}}function Zl(){return new ss(e=>Zi(e),$i)}async function ec(e,t){const n=zt(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new Xl,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Kl(e,"Initialization of query '".concat(es(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&ic(n)}async function tc(e,t){const n=zt(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nc(e,t){const n=zt(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&ic(n)}function rc(e,t,n){const r=zt(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function ic(e){e.Ca.forEach(e=>{e.next()})}var sc,oc;(oc=sc||(sc={})).Ma="default",oc.Cache="cache";class ac{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Jl(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Jl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==sc.Cache}}class lc{constructor(e){this.key=e}}class cc{constructor(e){this.key=e}}class uc{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=gs(),this.mutatedKeys=gs(),this.eu=rs(e),this.tu=new Ql(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Yl,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=ts(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ft(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const o=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,l=a!==this.Za;return this.Za=a,0!==s.length||l?{snapshot:new Jl(this.query,e.tu,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Yl,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=gs(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new cc(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new lc(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=gs();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Jl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const dc="SyncEngine";class hc{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class fc{constructor(e){this.key=e,this.hu=!1}}class pc{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new ss(e=>Zi(e),$i),this.Iu=new Map,this.Eu=new Set,this.du=new _r(pn.comparator),this.Au=new Map,this.Ru=new Ea,this.Vu={},this.mu=new Map,this.fu=la.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function mc(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Mc(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await vc(r,t,n,!0),i}async function gc(e,t){const n=Mc(e);await vc(n,t,!0,!1)}async function vc(e,t,n,r){const i=await za(e.localStore,Qi(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await yc(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&bl(e.remoteStore,i),a}async function yc(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Ha(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Nc(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const s=await Ha(e.localStore,t,!0),o=new uc(t,s.Qs),a=o.ru(s.documents),l=fo.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Nc(e,n,c.au);const u=new hc(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function bc(e,t,n){const r=zt(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!$i(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ba(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&wl(r.remoteStore,i.targetId),Tc(r,i.targetId)}).catch(Mn)):(Tc(r,i.targetId),await Ba(r.localStore,i.targetId,!0))}async function wc(e,t){const n=zt(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wl(n.remoteStore,r.targetId))}async function _c(e,t){const n=zt(e);try{const e=await function(e,t){const n=zt(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Tr.EMPTY_BYTE_STRING,An.min()).withLastLimboFreeSnapshotVersion(An.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.Pi.updateTargetData(e,c))});let a=as(),l=gs();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Va(e,s,t.documentUpdates).next(e=>{a=e.ks,l=e.qs})),!r.isEqual(An.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return jn.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(qt(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?qt(r.hu,14607):e.removedDocuments.size>0&&(qt(r.hu,42227),r.hu=!1))}),await Oc(n,e,t)}catch(e){await Mn(e)}}function Ec(e,t,n){const r=zt(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=zt(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&ic(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function xc(e,t,n){const r=zt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new _r(pn.comparator);e=e.insert(s,pi.newNoDocument(s,An.min()));const n=gs().add(s),i=new ho(An.min(),new Map,new _r(nn),e,n);await _c(r,i),r.du=r.du.remove(s),r.Au.delete(t),Pc(r)}else await Ba(r.localStore,t,!1).then(()=>Tc(r,t,n)).catch(Mn)}async function Sc(e,t){const n=zt(e),r=t.batch.batchId;try{const e=await function(e,t){const n=zt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=jn.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);qt(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=gs();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Ac(n,r,null),Cc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Oc(n,e)}catch(e){await Mn(e)}}async function Ic(e,t,n){const r=zt(e);try{const e=await function(e,t){const n=zt(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(qt(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Ac(r,t,n),Cc(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Oc(r,e)}catch(n){await Mn(n)}}function Cc(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Ac(e,t,n){const r=zt(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Tc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||kc(e,t)})}function kc(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(wl(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Pc(e))}function Nc(e,t,n){for(const r of n)r instanceof lc?(e.Ru.addReference(r.key,t),Rc(e,r)):r instanceof cc?(Lt(dc,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||kc(e,r.key)):Ft(19791,{wu:r})}function Rc(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Lt(dc,"New document in limbo: "+n),e.Eu.add(r),Pc(e))}function Pc(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new pn(dn.fromString(t)),r=e.fu.next();e.Au.set(r,new fc(n)),e.du=e.du.insert(n,r),bl(e.remoteStore,new Zo(Qi(Hi(n.path)),r,"TargetPurposeLimboResolution",Vn.ce))}}async function Oc(e,t,n){const r=zt(e),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Pa.As(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(e,t){const n=zt(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>jn.forEach(t,t=>jn.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>jn.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Fn(e))throw e;Lt(La,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function Dc(e,t){const n=zt(e);if(!n.currentUser.isEqual(t)){Lt(dc,"User change. New user:",t.toKey());const e=await Ua(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Ht(Bt.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Oc(n,e.Ls)}}function Lc(e,t){const n=zt(e),r=n.Au.get(t);if(r&&r.hu)return gs().add(r.key);{let e=gs();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Mc(e){const t=zt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=_c.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lc.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=xc.bind(null,t),t.Pu.H_=nc.bind(null,t.eventManager),t.Pu.yu=rc.bind(null,t.eventManager),t}function jc(e){const t=zt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Sc.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ic.bind(null,t),t}class Uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ol(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ja(this.persistence,new Da,e.initialUser,this.serializer)}Cu(e){return new Ta(Na.mi,this.serializer)}Du(e){return new Ka}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uc.provider={build:()=>new Uc};class Fc extends Uc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){qt(this.persistence.referenceDelegate instanceof Ra,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new fa(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?aa.withCacheSize(this.cacheSizeBytes):aa.DEFAULT;return new Ta(e=>Ra.mi(e,t),this.serializer)}}class Vc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ec(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Dc.bind(null,this.syncEngine),await Bl(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new $l}createDatastore(e){const t=ol(e.databaseInfo.databaseId),n=function(e){return new il(e)}(e.databaseInfo);return function(e,t,n,r){return new fl(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new gl(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Ec(this.syncEngine,e,0),Ja.v()?new Ja:new Qa)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new pc(e,t,n,r,i,s);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=zt(e);Lt(ml,"RemoteStore shutting down."),t.Ea.add(5),await yl(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Vc.provider={build:()=>new Vc};class qc{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Mt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const zc="FirestoreClient";class Bc{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Rt.UNAUTHENTICATED,this.clientId=tn.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Lt(zc,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Lt(zc,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Kl(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Hc(e,t){e.asyncQueue.verifyOperationInProgress(),Lt(zc,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Ua(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Gc(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Wc(e);Lt(zc,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>zl(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>zl(t.remoteStore,n)),e._onlineComponents=t}async function Wc(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Lt(zc,"Using user provided OfflineComponentProvider");try{await Hc(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Bt.FAILED_PRECONDITION||e.code===Bt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;jt("Error using user provided cache. Falling back to memory cache: "+n),await Hc(e,new Uc)}}else Lt(zc,"Using default OfflineComponentProvider"),await Hc(e,new Fc(void 0));return e._offlineComponents}async function Kc(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Lt(zc,"Using user provided OnlineComponentProvider"),await Gc(e,e._uninitializedComponentsProvider._online)):(Lt(zc,"Using default OnlineComponentProvider"),await Gc(e,new Vc))),e._onlineComponents}function Qc(e){return Kc(e).then(e=>e.syncEngine)}async function Yc(e){const t=await Kc(e),n=t.eventManager;return n.onListen=mc.bind(null,t.syncEngine),n.onUnlisten=bc.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=gc.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=wc.bind(null,t.syncEngine),n}function Jc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Gt;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new qc({next:a=>{s.Nu(),t.enqueueAndForget(()=>tc(e,o));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new Ht(Bt.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new Ht(Bt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new ac(Hi(n.path),s,{includeMetadataChanges:!0,qa:!0});return ec(e,o)}(await Yc(e),e.asyncQueue,t,n,r)),r.promise}function Xc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Gt;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new qc({next:n=>{s.Nu(),t.enqueueAndForget(()=>tc(e,o)),n.fromCache&&"server"===r.source?i.reject(new Ht(Bt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new ac(n,s,{includeMetadataChanges:!0,qa:!0});return ec(e,o)}(await Yc(e),e.asyncQueue,t,n,r)),r.promise}function $c(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Zc=new Map,eu="firestore.googleapis.com",tu=!0;class nu{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ht(Bt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eu,this.ssl=tu}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:tu;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=oa;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<ua)throw new Ht(Bt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Ht(Bt.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$c(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ht(Bt.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Ht(Bt.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Ht(Bt.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ru{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ht(Bt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ht(Bt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nu(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Kt;switch(e.type){case"firstParty":return new Xt(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ht(Bt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Zc.get(e);t&&(Lt("ComponentProvider","Removing Datastore"),Zc.delete(e),t.terminate())}(this),Promise.resolve()}}function iu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=wn(e,ru);const i=_(t),s=e._getSettings(),o=c(c({},s),{},{emulatorOptions:e._getEmulatorOptions()}),a="".concat(t,":").concat(n);i&&(E("https://".concat(a)),I("Firestore",!0)),s.host!==eu&&s.host!==a&&jt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=c(c({},s),{},{host:a,ssl:i,emulatorOptions:r});if(!O(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Rt.MOCK_USER;else{var u;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=c({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[f(JSON.stringify({alg:"none",type:"JWT"})),f(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(u=e._app)||void 0===u?void 0:u.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Ht(Bt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Rt(i)}e._authCredentials=new Qt(new Wt(t,n))}}class su{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new su(this.firestore,e,this._query)}}class ou{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new au(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ou(this.firestore,e,this._key)}toJSON(){return{type:ou._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(xn(t,ou._jsonSchema))return new ou(e,n||null,new pn(dn.fromString(t.referencePath)))}}ou._jsonSchemaVersion="firestore/documentReference/1.0",ou._jsonSchema={type:En("string",ou._jsonSchemaVersion),referencePath:En("string")};class au extends su{constructor(e,t,n){super(e,t,Hi(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ou(this.firestore,null,new pn(e))}withConverter(e){return new au(this.firestore,e,this._path)}}function lu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=V(e),mn("collection","path",t),e instanceof ru){const n=dn.fromString(t,...r);return vn(n),new au(e,null,n)}{if(!(e instanceof ou||e instanceof au))throw new Ht(Bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(dn.fromString(t,...r));return vn(n),new au(e.firestore,null,n)}}function cu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=V(e),1===arguments.length&&(t=tn.newId()),mn("doc","path",t),e instanceof ru){const n=dn.fromString(t,...r);return gn(n),new ou(e,null,new pn(n))}{if(!(e instanceof ou||e instanceof au))throw new Ht(Bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(dn.fromString(t,...r));return gn(n),new ou(e.firestore,e instanceof au?e.converter:null,new pn(n))}}const uu="AsyncQueue";class du{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new al(this,"async_queue_retry"),this._c=()=>{const e=sl();e&&Lt(uu,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=sl();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=sl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Gt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fn(e))throw e;Lt(uu,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Mt("INTERNAL UNHANDLED ERROR: ",hu(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Wl.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Ft(47125,{Pc:hu(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function hu(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class fu extends ru{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new du,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new du(e),this._firestoreClient=void 0,await e}}}function pu(e){if(e._terminated)throw new Ht(Bt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||mu(e),e._firestoreClient}function mu(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Vr(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,$c(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Bc(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class gu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gu(Tr.fromBase64String(e))}catch(e){throw new Ht(Bt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new gu(Tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xn(e,gu._jsonSchema))return gu.fromBase64String(e.bytes)}}gu._jsonSchemaVersion="firestore/bytes/1.0",gu._jsonSchema={type:En("string",gu._jsonSchemaVersion),bytes:En("string")};class vu{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Ht(Bt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class yu{constructor(e){this._methodName=e}}class bu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ht(Bt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ht(Bt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nn(this._lat,e._lat)||nn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bu._jsonSchemaVersion}}static fromJSON(e){if(xn(e,bu._jsonSchema))return new bu(e.latitude,e.longitude)}}bu._jsonSchemaVersion="firestore/geoPoint/1.0",bu._jsonSchema={type:En("string",bu._jsonSchemaVersion),latitude:En("number"),longitude:En("number")};class wu{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:wu._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xn(e,wu._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new wu(e.vectorValues);throw new Ht(Bt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wu._jsonSchemaVersion="firestore/vectorValue/1.0",wu._jsonSchema={type:En("string",wu._jsonSchemaVersion),vectorValues:En("object")};const _u=/^__.*__$/;class Eu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Hs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bs(e,this.data,t,this.fieldTransforms)}}class xu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Hs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Su(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ft(40011,{Ac:e})}}class Iu{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Iu(c(c({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Su(this.Ac)&&_u.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Cu{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ol(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Iu({Ac:e,methodName:t,Dc:n,path:fn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Au(e){const t=e._freezeSettings(),n=ol(e._databaseId);return new Cu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Tu(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);Mu("Data must be an object, but it was:",o,r);const a=Du(r,o);let l,c;if(s.merge)l=new Cr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=ju(t,r,n);if(!o.contains(i))throw new Ht(Bt.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));qu(e,i)||e.push(i)}l=new Cr(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new Eu(new hi(a),l,c)}class ku extends yu{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ku}}function Nu(e,t,n,r){const i=e.Cc(1,t,n);Mu("Data must be an object, but it was:",i,r);const s=[],o=hi.empty();br(r,(e,r)=>{const a=Fu(t,e,n);r=V(r);const l=i.yc(a);if(r instanceof ku)s.push(a);else{const e=Ou(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new Cr(s);return new xu(o,a,i.fieldTransforms)}function Ru(e,t,n,r,i,s){const o=e.Cc(1,t,n),a=[ju(t,r,n)],l=[i];if(s.length%2!=0)throw new Ht(Bt.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)a.push(ju(t,s[h])),l.push(s[h+1]);const c=[],u=hi.empty();for(let h=a.length-1;h>=0;--h)if(!qu(c,a[h])){const e=a[h];let t=l[h];t=V(t);const n=o.yc(e);if(t instanceof ku)c.push(e);else{const r=Ou(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Cr(c);return new xu(u,d,o.fieldTransforms)}function Pu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ou(n,e.Cc(r?4:3,t))}function Ou(e,t){if(Lu(e=V(e)))return Mu("Unsupported field value:",t,e),Du(e,t);if(e instanceof yu)return function(e,t){if(!Su(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Ou(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=V(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return _s(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Cn.fromDate(e);return{timestampValue:Co(t.serializer,n)}}if(e instanceof Cn){const n=new Cn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Co(t.serializer,n)}}if(e instanceof bu)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof gu)return{bytesValue:Ao(t.serializer,e._byteString)};if(e instanceof ou){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:No(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof wu)return function(e,t){return{mapValue:{fields:{[Br]:{stringValue:Wr},[Kr]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return bs(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(bn(e)))}(e,t)}function Du(e,t){const n={};return wr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):br(e,(e,r)=>{const i=Ou(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Lu(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Cn||e instanceof bu||e instanceof gu||e instanceof ou||e instanceof yu||e instanceof wu)}function Mu(e,t,n){if(!Lu(n)||!yn(n)){const r=bn(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function ju(e,t,n){if((t=V(t))instanceof vu)return t._internalPath;if("string"==typeof t)return Fu(e,t);throw Vu("Field path arguments must be of type string or ",e,!1,void 0,n)}const Uu=new RegExp("[~\\*/\\[\\]]");function Fu(e,t,n){if(t.search(Uu)>=0)throw Vu("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new vu(...t.split("."))._internalPath}catch(r){throw Vu("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Vu(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Ht(Bt.INVALID_ARGUMENT,a+e+l)}function qu(e,t){return e.some(e=>e.isEqual(t))}class zu{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ou(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Bu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Bu extends zu{data(){return super.data()}}function Hu(e,t){return"string"==typeof t?Fu(e,t):t instanceof vu?t._internalPath:t._delegate._internalPath}function Gu(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ht(Bt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wu{}class Ku extends Wu{}class Qu extends Ku{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Qu(e,t,n)}_apply(e){const t=this._parse(e);return ed(e._query,t),new su(e.firestore,e.converter,Ji(e._query,t))}_parse(e){const t=Au(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Ht(Bt.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Zu(o,s);const t=[];for(const n of o)t.push($u(r,e,n));a={arrayValue:{values:t}}}else a=$u(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Zu(o,s),a=Pu(n,t,o,"in"===s||"not-in"===s);return _i.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Yu extends Wu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Yu(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Ei.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)ed(n,i),n=Ji(n,i)}(e._query,t),new su(e.firestore,e.converter,Ji(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ju extends Ku{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ju(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Ht(Bt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ht(Bt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yi(t,n)}(e._query,this._field,this._direction);return new su(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new zi(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Xu extends Ku{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Xu(e,t,n)}_apply(e){return new su(e.firestore,e.converter,Xi(e._query,this._limit,this._limitType))}}function $u(e,t,n){if("string"==typeof(n=V(n))){if(""===n)throw new Ht(Bt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wi(t)&&-1!==n.indexOf("/"))throw new Ht(Bt.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(dn.fromString(n));if(!pn.isDocumentKey(r))throw new Ht(Bt.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ri(e,new pn(r))}if(n instanceof ou)return ri(e,n._key);throw new Ht(Bt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(bn(n),"."))}function Zu(e,t){if(!Array.isArray(e)||0===e.length)throw new Ht(Bt.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function ed(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Ht(Bt.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Ht(Bt.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class td{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ft(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return br(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Kr].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>Rr(e.doubleValue));return new wu(n)}convertGeoPoint(e){return new bu(Rr(e.latitude),Rr(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ur(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Fr(e));default:return null}}convertTimestamp(e){const t=Nr(e);return new Cn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=dn.fromString(e);qt($o(n),9688,{name:e});const r=new zr(n.get(1),n.get(3)),i=new pn(n.popFirst(5));return r.isEqual(t)||Mt("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function nd(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class rd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class id extends zu{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new sd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Hu("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ht(Bt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=id._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}id._jsonSchemaVersion="firestore/documentSnapshot/1.0",id._jsonSchema={type:En("string",id._jsonSchemaVersion),bundleSource:En("string","DocumentSnapshot"),bundleName:En("string"),bundle:En("string")};class sd extends id{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class od{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new rd(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new sd(this._firestore,this._userDataWriter,n.key,n,new rd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ht(Bt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new sd(e._firestore,e._userDataWriter,n.doc.key,n.doc,new rd(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new sd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new rd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:ad(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ht(Bt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=od._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tn.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ad(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ft(61501,{type:e})}}od._jsonSchemaVersion="firestore/querySnapshot/1.0",od._jsonSchema={type:En("string",od._jsonSchemaVersion),bundleSource:En("string","QuerySnapshot"),bundleName:En("string"),bundle:En("string")};class ld extends td{constructor(e){super(),this.firestore=e}convertBytes(e){return new gu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ou(this.firestore,null,t)}}function cd(e,t){const n=wn(e.firestore,fu),r=cu(e),i=nd(e.converter,t);return ud(n,[Tu(Au(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ls.exists(!1))]).then(()=>r)}function ud(e,t){return function(e,t){const n=new Gt;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=jc(e);try{const e=await function(e,t){const n=zt(e),r=Cn.now(),i=t.reduce((e,t)=>e.add(t.key),gs());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=as(),l=gs();return n.Ns.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=qs(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Hs(e.key,t,fi(t.value.mapValue),Ls.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:us(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new _r(nn)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Oc(r,e.changes),await Ol(r.remoteStore)}catch(e){const t=Kl(e,"Failed to persist write");n.reject(t)}}(await Qc(e),t,n)),n.promise}(pu(e),t)}function dd(e,t,n){const r=n.docs.get(t._key),i=new ld(e);return new id(e,i,t._key,r,new rd(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;function hd(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Pt=e}(tt),Je(new q("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new fu(new Yt(e.getProvider("auth-internal")),new Zt(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ht(Bt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zr(e.options.projectId,t)}(s,r),s);return i=c({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),it(kt,Nt,e),it(kt,Nt,"esm2020")}();const fd=["providerId"],pd=["uid","auth","stsTokenManager"],md=["providerId","signInMethod"];function gd(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vd=gd,yd=new R("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),bd=new X("@firebase/auth");function wd(e){if(bd.logLevel<=W.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];bd.error("Auth (".concat(tt,"): ").concat(e),...n)}}function _d(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Id(e,...n)}function Ed(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Id(e,...n)}function xd(e,t,n){const r=c(c({},vd()),{},{[t]:n});return new R("auth","Firebase",r).create(t,{appName:e.name})}function Sd(e){return xd(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Id(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return yd.create(e,...n)}function Cd(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Id(t,...r)}}function Ad(e){const t="INTERNAL ASSERTION FAILED: "+e;throw wd(t),new Error(t)}function Td(e,t){e||Ad(t)}function kd(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Nd(){return"http:"===Rd()||"https:"===Rd()}function Rd(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Pd(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Nd()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Od{constructor(e,t){this.shortDelay=e,this.longDelay=t,Td(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(C())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Pd()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Dd(e,t){Td(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Ld{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Ad("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Ad("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Ad("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Md={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},jd=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ud=new Od(3e4,6e4);function Fd(e,t){return e.tenantId&&!t.tenantId?c(c({},t),{},{tenantId:e.tenantId}):t}async function Vd(e,t,n,r){return qd(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=L(c({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=c({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&_(e.emulatorConfig.host)&&(l.credentials="include"),Ld.fetch()(await Bd(e,e.config.apiHost,n,o),l)})}async function qd(e,t,n){e._canInitEmulator=!1;const r=c(c({},Md),t);try{const t=new Gd(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Wd(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Wd(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Wd(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Wd(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw xd(e,a,o);_d(e,a)}}catch(i){if(i instanceof N)throw i;_d(e,"network-request-failed",{message:String(i)})}}async function zd(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Vd(e,t,n,r,i);return"mfaPendingCredential"in s&&_d(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Bd(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,o=s.config.emulator?Dd(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(jd.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function Hd(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Gd{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Ed(this.auth,"network-request-failed")),Ud.get())})}}function Wd(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ed(e,t,r);return i.customData._tokenResponse=n,i}function Kd(e){return void 0!==e&&void 0!==e.enterprise}class Qd{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Hd(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Yd(e,t){return Vd(e,"GET","/v2/recaptchaConfig",Fd(e,t))}async function Jd(e,t){return Vd(e,"POST","/v1/accounts:lookup",t)}function Xd(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function $d(e){return 1e3*Number(e)}function Zd(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return wd("JWT malformed, contained fewer than 3 sections"),null;try{const e=p(n);return e?JSON.parse(e):(wd("Failed to decode base64 JWT payload"),null)}catch(i){return wd("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function eh(e){const t=Zd(e);return Cd(t,"internal-error"),Cd("undefined"!==typeof t.exp,"internal-error"),Cd("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function th(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof N&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class nh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class rh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xd(this.lastLoginAt),this.creationTime=Xd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ih(e){var t;const n=e.auth,r=await e.getIdToken(),i=await th(e,Jd(n,{idToken:r}));Cd(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?sh(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null!==a&&void 0!==a&&a.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new rh(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function sh(e){return e.map(e=>{let{providerId:t}=e,n=hd(e,fd);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class oh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Cd(e.idToken,"internal-error"),Cd("undefined"!==typeof e.idToken,"internal-error"),Cd("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):eh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Cd(0!==e.length,"internal-error");const t=eh(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Cd(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await qd(e,{},async()=>{const n=L({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await Bd(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:o,body:n};return e.emulatorConfig&&_(e.emulatorConfig.host)&&(a.credentials="include"),Ld.fetch()(s,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new oh;return n&&(Cd("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Cd("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Cd("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oh,this.toJSON())}_performRefresh(){return Ad("not implemented")}}function ah(e,t){Cd("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class lh{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=hd(e,pd);this.providerId="firebase",this.proactiveRefresh=new nh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await th(this,this.stsTokenManager.getToken(this.auth,e));return Cd(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=V(e),r=await n.getIdToken(t),i=Zd(r);Cd(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Xd($d(i.auth_time)),issuedAtTime:Xd($d(i.iat)),expirationTime:Xd($d(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=V(e);await ih(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Cd(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>c({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new lh(c(c({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Cd(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ih(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($e(this.auth.app))return Promise.reject(Sd(this.auth));const e=await this.getIdToken();return await th(this,async function(e,t){return Vd(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return c(c({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>c({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,v=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:b,emailVerified:w,isAnonymous:_,providerData:E,stsTokenManager:x}=t;Cd(b&&x,e,"internal-error");const S=oh.fromJSON(this.name,x);Cd("string"===typeof b,e,"internal-error"),ah(d,e.name),ah(h,e.name),Cd("boolean"===typeof w,e,"internal-error"),Cd("boolean"===typeof _,e,"internal-error"),ah(f,e.name),ah(p,e.name),ah(m,e.name),ah(g,e.name),ah(v,e.name),ah(y,e.name);const I=new lh({uid:b,auth:e,email:h,emailVerified:w,displayName:d,isAnonymous:_,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:S,createdAt:v,lastLoginAt:y});return E&&Array.isArray(E)&&(I.providerData=E.map(e=>c({},e))),g&&(I._redirectEventId=g),I}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new oh;r.updateFromServerResponse(t);const i=new lh({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await ih(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Cd(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?sh(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),o=new oh;o.updateFromIdToken(n);const a=new lh({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new rh(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(a,l),a}}const ch=new Map;function uh(e){Td(e instanceof Function,"Expected a class definition");let t=ch.get(e);return t?(Td(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ch.set(e,t),t)}class dh{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}dh.type="NONE";const hh=dh;function fh(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ph{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=fh(this.userKey,r.apiKey,i),this.fullPersistenceKey=fh("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Jd(this.auth,{idToken:e}).catch(()=>{});return t?lh._fromGetAccountInfoResponse(this.auth,t,e):null}return lh._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ph(uh(hh),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||uh(hh);const s=fh(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await Jd(e,{idToken:t}).catch(()=>{});if(!r)break;n=await lh._fromGetAccountInfoResponse(e,r,t)}else n=lh._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(t){}})),new ph(i,e,n)):new ph(i,e,n)}}function mh(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(bh(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(gh(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(_h(t))return"Blackberry";if(Eh(t))return"Webos";if(vh(t))return"Safari";if((t.includes("chrome/")||yh(t))&&!t.includes("edge/"))return"Chrome";if(wh(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function gh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C();return/firefox\//i.test(e)}function vh(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:C()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C();return/crios\//i.test(e)}function bh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C();return/iemobile/i.test(e)}function wh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C();return/android/i.test(e)}function _h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C();return/blackberry/i.test(e)}function Eh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C();return/webos/i.test(e)}function xh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Sh(){return function(){const e=C();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ih(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C();return xh(e)||wh(e)||Eh(e)||_h(e)||/windows phone/i.test(e)||bh(e)}function Ch(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=mh(C());break;case"Worker":t="".concat(mh(C()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(tt,"/").concat(r)}class Ah{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Th{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class kh{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rh(this),this.idTokenSubscription=new Rh(this),this.beforeStateQueue=new Ah(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yd,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=uh(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await ph.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Jd(this,{idToken:e}),n=await lh._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if($e(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,s;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,o=null===(s=n)||void 0===s?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(e);t&&t!==o||null===a||void 0===a||!a.user||(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Cd(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ih(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($e(this.app))return Promise.reject(Sd(this));const t=e?V(e):null;return t&&Cd(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Cd(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $e(this.app)?Promise.reject(Sd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $e(this.app)?Promise.reject(Sd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(uh(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Vd(e,"GET","/v2/passwordPolicy",Fd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Th(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new R("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Vd(e,"POST","/v2/accounts:revokeToken",Fd(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&uh(e)||this._popupRedirectResolver;Cd(t,this,"argument-error"),this.redirectPersistenceManager=await ph.create(this,[uh(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Cd(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Cd(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ch(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if($e(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(bd.logLevel<=W.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];bd.warn("Auth (".concat(tt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Nh(e){return V(e)}class Rh{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new U(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Cd(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ph={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Oh(e){return Ph.loadJS(e)}function Dh(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Lh{constructor(){this.enterprise=new Mh}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Mh{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const jh="NO_RECAPTCHA";class Uh{constructor(e){this.type="recaptcha-enterprise",this.auth=Nh(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Kd(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(jh)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Lh).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Yd(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Qd(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Kd(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ph.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Oh(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Fh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new Uh(e);let o;if(i)o=jh;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const a=c({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Vh(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Fh(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Fh(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("PHONE_PROVIDER")){const i=await Fh(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Fh(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Fh(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function qh(e){const t=Nh(e),n=await Yd(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Qd(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Uh(t).verify()}}function zh(e,t,n){const r=Nh(e);Cd(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),s=Bh(t),{host:o,port:a}=function(e){const t=Bh(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Hh(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Hh(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(s,"//").concat(o).concat(l,"/")},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Cd(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Cd(O(c,r.config.emulator)&&O(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,_(o)?(E("".concat(s,"//").concat(o).concat(l)),I("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Bh(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Hh(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Gh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ad("not implemented")}_getIdTokenResponse(e){return Ad("not implemented")}_linkToIdToken(e,t){return Ad("not implemented")}_getReauthenticationResolver(e){return Ad("not implemented")}}async function Wh(e,t){return Vd(e,"POST","/v1/accounts:signUp",t)}async function Kh(e,t){return zd(e,"POST","/v1/accounts:signInWithPassword",Fd(e,t))}class Qh extends Gh{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Qh(e,t,"password")}static _fromEmailAndCode(e,t){return new Qh(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Vh(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Kh,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return zd(e,"POST","/v1/accounts:signInWithEmailLink",Fd(e,t))}(e,{email:this._email,oobCode:this._password});default:_d(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Vh(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Wh,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return zd(e,"POST","/v1/accounts:signInWithEmailLink",Fd(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:_d(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Yh(e,t){return zd(e,"POST","/v1/accounts:signInWithIdp",Fd(e,t))}class Jh extends Gh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Jh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_d("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=hd(t,md);if(!n||!r)return null;const s=new Jh(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Yh(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Yh(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Yh(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=L(t)}return e}}async function Xh(e,t){return Vd(e,"POST","/v1/accounts:sendVerificationCode",Fd(e,t))}const $h={USER_NOT_FOUND:"user-not-found"};class Zh extends Gh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Zh({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Zh({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return zd(e,"POST","/v1/accounts:signInWithPhoneNumber",Fd(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await zd(e,"POST","/v1/accounts:signInWithPhoneNumber",Fd(e,t));if(n.temporaryProof)throw Wd(e,"account-exists-with-different-credential",n);return n}(e,c({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return zd(e,"POST","/v1/accounts:signInWithPhoneNumber",Fd(e,c(c({},t),{},{operation:"REAUTH"})),$h)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Zh({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ef{constructor(e){var t,n,r,i,s,o;const a=M(j(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Cd(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=M(j(e)).link,n=t?M(j(t)).deep_link_id:null,r=M(j(e)).deep_link_id;return(r?M(j(r)).link:null)||r||n||t||e}(e);try{return new ef(t)}catch(n){return null}}}class tf{constructor(){this.providerId=tf.PROVIDER_ID}static credential(e,t){return Qh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ef.parseLink(t);return Cd(n,"argument-error"),Qh._fromEmailAndCode(e,n.code,n.tenantId)}}tf.PROVIDER_ID="password",tf.EMAIL_PASSWORD_SIGN_IN_METHOD="password",tf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class nf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class rf extends nf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class sf extends rf{constructor(){super("facebook.com")}static credential(e){return Jh._fromParams({providerId:sf.PROVIDER_ID,signInMethod:sf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sf.credentialFromTaggedObject(e)}static credentialFromError(e){return sf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return sf.credential(t.oauthAccessToken)}catch(n){return null}}}sf.FACEBOOK_SIGN_IN_METHOD="facebook.com",sf.PROVIDER_ID="facebook.com";class of extends rf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Jh._fromParams({providerId:of.PROVIDER_ID,signInMethod:of.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return of.credentialFromTaggedObject(e)}static credentialFromError(e){return of.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return of.credential(n,r)}catch(i){return null}}}of.GOOGLE_SIGN_IN_METHOD="google.com",of.PROVIDER_ID="google.com";class af extends rf{constructor(){super("github.com")}static credential(e){return Jh._fromParams({providerId:af.PROVIDER_ID,signInMethod:af.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return af.credentialFromTaggedObject(e)}static credentialFromError(e){return af.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return af.credential(t.oauthAccessToken)}catch(n){return null}}}af.GITHUB_SIGN_IN_METHOD="github.com",af.PROVIDER_ID="github.com";class lf extends rf{constructor(){super("twitter.com")}static credential(e,t){return Jh._fromParams({providerId:lf.PROVIDER_ID,signInMethod:lf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return lf.credentialFromTaggedObject(e)}static credentialFromError(e){return lf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return lf.credential(n,r)}catch(i){return null}}}async function cf(e,t){return zd(e,"POST","/v1/accounts:signUp",Fd(e,t))}lf.TWITTER_SIGN_IN_METHOD="twitter.com",lf.PROVIDER_ID="twitter.com";class uf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await lh._fromIdTokenResponse(e,n,r),s=df(n);return new uf({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=df(n);return new uf({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function df(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class hf extends N{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,hf.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new hf(e,t,n,r)}}function ff(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw hf._fromErrorAndOperation(e,n,t,r);throw n})}async function pf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await th(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return uf._forOperation(e,"link",r)}async function mf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if($e(r.app))return Promise.reject(Sd(r));const i="reauthenticate";try{const s=await th(e,ff(r,i,t,e),n);Cd(s.idToken,r,"internal-error");const o=Zd(s.idToken);Cd(o,r,"internal-error");const{sub:a}=o;return Cd(e.uid===a,r,"user-mismatch"),uf._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&_d(r,"user-mismatch"),s}}async function gf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if($e(e.app))return Promise.reject(Sd(e));const r="signIn",i=await ff(e,r,t),s=await uf._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function vf(e,t){return gf(Nh(e),t)}async function yf(e){const t=Nh(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function bf(e,t){return Vd(e,"POST","/v2/accounts/mfaEnrollment:start",Fd(e,t))}new WeakMap;const wf="__sak";class _f{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wf,"1"),this.storage.removeItem(wf),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ef extends _f{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ih(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Sh()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ef.type="LOCAL";const xf=Ef;function Sf(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function If(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Cf{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=If(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Sf(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=If(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=If(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Sf(n);const i=setInterval(()=>{const e=Sf(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Cf.type="COOKIE";class Af extends _f{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Af.type="SESSION";const Tf=Af;class kf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new kf(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Nf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}kf.receivers=[];class Rf{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=Nf("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Pf(){return window}function Of(){return"undefined"!==typeof Pf().WorkerGlobalScope&&"function"===typeof Pf().importScripts}const Df="firebaseLocalStorageDb",Lf="firebaseLocalStorage",Mf="fbase_key";class jf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Uf(e,t){return e.transaction([Lf],t?"readwrite":"readonly").objectStore(Lf)}function Ff(){const e=indexedDB.open(Df,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Lf,{keyPath:Mf})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Lf)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Df);return new jf(e).toPromise()}(),t(await Ff()))})})}async function Vf(e,t,n){const r=Uf(e,!0).put({[Mf]:t,value:n});return new jf(r).toPromise()}function qf(e,t){const n=Uf(e,!0).delete(t);return new jf(n).toPromise()}class zf{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Ff()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Of()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kf._getInstance(Of()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Rf(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ff();return await Vf(e,wf,"1"),await qf(e,wf),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Vf(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Uf(e,!1).get(t),r=await new jf(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>qf(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Uf(e,!1).getAll();return new jf(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}zf.type="LOCAL";const Bf=zf;function Hf(e,t){return Vd(e,"POST","/v2/accounts/mfaSignIn:start",Fd(e,t))}Dh("rcb"),new Od(3e4,6e4);const Gf="recaptcha";async function Wf(e,t,n){if(!e._getRecaptchaConfig())try{await qh(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Cd("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Vh(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===jh){Cd((null===n||void 0===n?void 0:n.type)===Gf,e,"argument-error");return bf(e,await Kf(e,t,n))}return bf(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;Cd("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Cd(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Vh(e,o,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===jh){Cd((null===n||void 0===n?void 0:n.type)===Gf,e,"argument-error");return Hf(e,await Kf(e,t,n))}return Hf(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Vh(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===jh){Cd((null===n||void 0===n?void 0:n.type)===Gf,e,"argument-error");return Xh(e,await Kf(e,t,n))}return Xh(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Kf(e,t,n){Cd(n.type===Gf,e,"argument-error");const r=await n.verify();Cd("string"===typeof r,e,"argument-error");const i=c({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Qf{constructor(e){this.providerId=Qf.PROVIDER_ID,this.auth=Nh(e)}verifyPhoneNumber(e,t){return Wf(this.auth,e,V(t))}static credential(e,t){return Zh._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Qf.credentialFromTaggedObject(t)}static credentialFromError(e){return Qf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Zh._fromTokenResponse(n,r):null}}function Yf(e,t){return t?uh(t):(Cd(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Qf.PROVIDER_ID="phone",Qf.PHONE_SIGN_IN_METHOD="phone";class Jf extends Gh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yh(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yh(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yh(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Xf(e){return gf(e.auth,new Jf(e),e.bypassAuthState)}function $f(e){const{auth:t,user:n}=e;return Cd(n,t,"internal-error"),mf(n,new Jf(e),e.bypassAuthState)}async function Zf(e){const{auth:t,user:n}=e;return Cd(n,t,"internal-error"),pf(n,new Jf(e),e.bypassAuthState)}class ep{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Xf;case"linkViaPopup":case"linkViaRedirect":return Zf;case"reauthViaPopup":case"reauthViaRedirect":return $f;default:_d(this.auth,"internal-error")}}resolve(e){Td(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Td(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const tp=new Od(2e3,1e4);class np extends ep{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,np.currentPopupAction&&np.currentPopupAction.cancel(),np.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Cd(e,this.auth,"internal-error"),e}async onExecution(){Td(1===this.filter.length,"Popup operations only handle one event");const e=Nf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ed(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ed(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,np.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ed(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,tp.get())};e()}}np.currentPopupAction=null;const rp=new Map;class ip extends ep{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=rp.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ap(t),r=op(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}rp.set(this.auth._key(),e)}return this.bypassAuthState||rp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function sp(e,t){rp.set(e._key(),t)}function op(e){return uh(e._redirectPersistence)}function ap(e){return fh("pendingRedirect",e.config.apiKey,e.name)}async function lp(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if($e(e.app))return Promise.reject(Sd(e));const r=Nh(e),i=Yf(r,t),s=new ip(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class cp{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dp(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!dp(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ed(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(up(e))}saveEventToCache(e){this.cachedEventUids.add(up(e)),this.lastProcessedEventTime=Date.now()}}function up(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function dp(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const hp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fp=/^https?/;async function pp(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Vd(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(mp(r))return}catch(n){}_d(e,"unauthorized-domain")}function mp(e){const t=kd(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!fp.test(n))return!1;if(hp.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const gp=new Od(3e4,6e4);function vp(){const e=Pf().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function yp(e){return new Promise((t,n)=>{var r,i;function s(){vp(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{vp(),n(Ed(e,"network-request-failed"))},timeout:gp.get()})}if(null!==(r=Pf().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Pf().gapi)||void 0===i||!i.load){const t=Dh("iframefcb");return Pf()[t]=()=>{gapi.load?s():n(Ed(e,"network-request-failed"))},Oh("".concat(Ph.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw bp=null,e})}let bp=null;const wp=new Od(5e3,15e3),_p={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ep=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xp(e){const t=e.config;Cd(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Dd(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:tt},i=Ep.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(L(r).slice(1))}async function Sp(e){const t=await function(e){return bp=bp||yp(e),bp}(e),n=Pf().gapi;return Cd(n,e,"internal-error"),t.open({where:document.body,url:xp(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_p,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ed(e,"network-request-failed"),s=Pf().setTimeout(()=>{r(i)},wp.get());function o(){Pf().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const Ip={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Cp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Ap(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=c(c({},Ip),{},{width:r.toString(),height:i.toString(),top:s,left:o}),u=C().toLowerCase();n&&(a=yh(u)?"_blank":n),gh(u)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return xh(arguments.length>0&&void 0!==arguments[0]?arguments[0]:C())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Cp(null);const h=window.open(t||"",a,d);Cd(h,e,"popup-blocked");try{h.focus()}catch(f){}return new Cp(h)}const Tp="__/auth/handler",kp="emulator/auth/handler",Np=encodeURIComponent("fac");async function Rp(e,t,n,r,i,s){Cd(e.config.authDomain,e,"auth-domain-config-required"),Cd(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:tt,eventId:i};if(t instanceof nf){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof rf){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Np,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Tp);return Dd(t,kp)}(e),"?").concat(L(a).slice(1)).concat(c)}const Pp="webStorageSupport";const Op=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tf,this._completeRedirectFn=lp,this._overrideRedirectResult=sp}async _openPopup(e,t,n,r){var i;Td(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Ap(e,await Rp(e,t,n,kd(),r),Nf())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Pf().location.href=e}(await Rp(e,t,n,kd(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Td(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Sp(e),n=new cp(e);return t.register("authEvent",t=>{Cd(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pp,{type:Pp},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Pp];void 0!==i&&t(!!i),_d(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=pp(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ih()||vh()||xh()}};var Dp="@firebase/auth",Lp="1.11.0";class Mp{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Cd(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const jp=b("authIdTokenMaxAge")||300;let Up=null;var Fp;Ph={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ed("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Fp="Browser",Je(new q("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Cd(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Fp,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ch(Fp)},c=new kh(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(uh);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Je(new q("auth-internal",e=>(e=>new Mp(e))(Nh(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),it(Dp,Lp,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Fp)),it(Dp,Lp,"esm2020");const Vp=nt({apiKey:"AIzaSyCaY-oTFu2k1sLdpFktiekoTeA72FSXt2M",authDomain:"english-learning-app-ae0d9.firebaseapp.com",databaseURL:"https://english-learning-app-ae0d9-default-rtdb.firebaseio.com",projectId:"english-learning-app-ae0d9",storageBucket:"english-learning-app-ae0d9.firebasestorage.app",messagingSenderId:"517830954088",appId:"1:517830954088:web:c17fe7c26dc513a75e3fdd"}),qp=function(e,t){const n="object"==typeof e?e:rt(),r="string"==typeof e?e:t||qr,i=Xe(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(e=>{const t=v(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&iu(i,...e)}return i}(Vp),zp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();const t=Xe(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Xe(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(O(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;_d(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Op,persistence:[Bf,xf,Tf]}),r=b("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>jp)return;const r=null===t||void 0===t?void 0:t.token;Up!==r&&(Up=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){V(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){V(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=v("auth");return s&&zh(n,"http://".concat(s)),n}(Vp);var Bp=n(579);const Hp=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(!0),[a,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1);return(0,Bp.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600",children:(0,Bp.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-2xl w-full max-w-md",children:[(0,Bp.jsxs)("div",{className:"text-center mb-8",children:[(0,Bp.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"\ud83d\ude80 English Learning App"}),(0,Bp.jsx)("p",{className:"text-gray-600 mt-2",children:s?"Bienvenido de vuelta":"\xdanete a nosotros"})]}),(0,Bp.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),u(!0),l("");try{s?await function(e,t,n){return $e(e.app)?Promise.reject(Sd(e)):vf(V(e),tf.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&yf(e),t})}(zp,e,n):await async function(e,t,n){if($e(e.app))return Promise.reject(Sd(e));const r=Nh(e),i=Vh(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cf,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&yf(e),t}),o=await uf._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(zp,e,n)}catch(a){l(a.message)}finally{u(!1)}},className:"space-y-4",children:[(0,Bp.jsx)("div",{children:(0,Bp.jsx)("input",{type:"email",placeholder:"Email",value:e,onChange:e=>t(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})}),(0,Bp.jsx)("div",{children:(0,Bp.jsx)("input",{type:"password",placeholder:"Contrase\xf1a",value:n,onChange:e=>i(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})}),a&&(0,Bp.jsx)("div",{className:"text-red-500 text-sm bg-red-50 p-2 rounded",children:a}),(0,Bp.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-blue-500 text-white p-3 rounded-lg font-semibold hover:bg-blue-600 disabled:opacity-50 transition-colors",children:c?"Cargando...":s?"Iniciar Sesi\xf3n":"Registrarse"})]}),(0,Bp.jsx)("div",{className:"text-center mt-6",children:(0,Bp.jsx)("button",{onClick:()=>o(!s),className:"text-blue-500 hover:underline",children:s?"\xbfNo tienes cuenta? Reg\xedstrate":"\xbfYa tienes cuenta? Inicia sesi\xf3n"})})]})})},Gp=(0,r.memo)(e=>{let{question:t,onAnswer:n}=e;const[i,s]=(0,r.useState)(null),[o,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),u=(0,r.useCallback)(()=>{if(null===i||t.isError)return;t.correctAnswer;a(!0),c(!0)},[i,t.isError,t.correctAnswer]),d=(0,r.useCallback)(()=>{const e=i===t.correctAnswer,r=e?t.xpReward||10:3;n(e,r)},[i,t.correctAnswer,t.xpReward,n]);return t.isError?(0,Bp.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-lg max-w-2xl mx-auto",children:(0,Bp.jsxs)("div",{className:"text-center py-8",children:[(0,Bp.jsx)("div",{className:"animate-spin text-4xl mb-4",children:"\u23f3"}),(0,Bp.jsx)("p",{className:"text-gray-600",children:t.question})]})}):(0,Bp.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg max-w-2xl mx-auto",children:[(0,Bp.jsxs)("div",{className:"mb-6",children:[(0,Bp.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:t.question}),t.instruction&&(0,Bp.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:t.instruction})]}),(0,Bp.jsx)("div",{className:"space-y-3 mb-6",children:t.options.map((e,n)=>{let r="w-full p-4 text-left border-2 rounded-lg transition-all duration-200 ";return l?n===t.correctAnswer?r+="border-green-500 bg-green-50 text-green-800":n===i&&i!==t.correctAnswer?r+="border-red-500 bg-red-50 text-red-800":r+="border-gray-200 bg-gray-50 text-gray-500":r+=i===n?"border-blue-500 bg-blue-50 text-blue-800":"border-gray-200 hover:border-gray-300 hover:bg-gray-50",(0,Bp.jsxs)("button",{onClick:()=>!l&&s(n),className:r,disabled:l,children:[(0,Bp.jsxs)("span",{className:"font-medium",children:[String.fromCharCode(65+n),") ",e.replace(/^[A-D]\)\s*/,"")]}),l&&n===t.correctAnswer&&(0,Bp.jsx)("span",{className:"float-right text-green-600",children:"\u2713"}),l&&n===i&&i!==t.correctAnswer&&(0,Bp.jsx)("span",{className:"float-right text-red-600",children:"\u2717"})]},n)})}),o&&(0,Bp.jsxs)("div",{className:"p-4 rounded-lg mb-4 ".concat(i===t.correctAnswer?"bg-green-100 border border-green-300":"bg-red-100 border border-red-300"),children:[(0,Bp.jsxs)("div",{className:"flex items-center mb-2",children:[(0,Bp.jsx)("span",{className:"text-2xl mr-2",children:i===t.correctAnswer?"\ud83c\udf89":"\u274c"}),(0,Bp.jsx)("span",{className:"font-semibold ".concat(i===t.correctAnswer?"text-green-800":"text-red-800"),children:i===t.correctAnswer?"\xa1Correcto! +10 XP":"Incorrecto, pero +3 XP por intentar"})]}),t.explanation&&(0,Bp.jsxs)("p",{className:"text-gray-700 text-sm",children:["\ud83d\udca1 ",(0,Bp.jsx)("strong",{children:"Explicaci\xf3n:"})," ",t.explanation]})]}),(0,Bp.jsx)("div",{className:"flex justify-center",children:l?(0,Bp.jsx)("button",{onClick:d,className:"bg-green-500 text-white px-8 py-3 rounded-full font-semibold hover:bg-green-600 transition-colors",children:"Siguiente Pregunta \u2192"}):(0,Bp.jsx)("button",{onClick:u,disabled:null===i,className:"bg-blue-500 text-white px-8 py-3 rounded-full font-semibold disabled:opacity-50 disabled:cursor-not-allowed hover:bg-blue-600 transition-colors",children:"Enviar Respuesta"})})]})});Gp.displayName="MultipleChoice";const Wp=Gp,Kp=e=>{let{onApiKeySet:t,currentApiKey:n=null}=e;const[i,s]=(0,r.useState)(n||""),[o,a]=(0,r.useState)(n?"ready":"intro"),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),h=()=>{i.trim()&&(a("validating"),(async e=>{c(!0),setTimeout(()=>{e.startsWith("AIza")||e.length>20?(a("success"),t(e)):a("error"),c(!1)},2e3)})(i.trim()))};return"ready"===o&&n?(0,Bp.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border border-green-200 rounded-xl p-6 mb-6",children:(0,Bp.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Bp.jsx)("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center",children:(0,Bp.jsx)("span",{className:"text-2xl",children:"\ud83e\udd16"})}),(0,Bp.jsxs)("div",{className:"flex-1",children:[(0,Bp.jsx)("h3",{className:"text-lg font-semibold text-green-800",children:"IA Personalizada Activa \u2728"}),(0,Bp.jsx)("p",{className:"text-green-700 text-sm",children:"Tu asistente de ingl\xe9s con IA est\xe1 listo para crear lecciones personalizadas"})]}),(0,Bp.jsx)("button",{onClick:()=>a("intro"),className:"text-green-600 hover:text-green-800 text-sm underline",children:"Cambiar API"})]})}):(0,Bp.jsxs)("div",{className:"max-w-2xl mx-auto",children:["intro"===o&&(0,Bp.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[(0,Bp.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-blue-600 p-6 text-white text-center",children:[(0,Bp.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\ude80"}),(0,Bp.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Desbloquea tu IA Personal"}),(0,Bp.jsx)("p",{className:"text-blue-100",children:"Conecta tu Google AI Studio para lecciones infinitas y personalizadas"})]}),(0,Bp.jsxs)("div",{className:"p-8",children:[(0,Bp.jsxs)("div",{className:"space-y-6",children:[(0,Bp.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,Bp.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:(0,Bp.jsx)("span",{className:"text-blue-600 font-bold",children:"1"})}),(0,Bp.jsxs)("div",{children:[(0,Bp.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"Ve a Google AI Studio"}),(0,Bp.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:"Es gratis y solo toma 30 segundos"}),(0,Bp.jsx)("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors text-sm font-medium",children:"Abrir Google AI Studio \u2192"})]})]}),(0,Bp.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,Bp.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:(0,Bp.jsx)("span",{className:"text-purple-600 font-bold",children:"2"})}),(0,Bp.jsxs)("div",{children:[(0,Bp.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"Crea tu API Key"}),(0,Bp.jsx)("p",{className:"text-gray-600 text-sm",children:'Click en "Create API Key" \u2192 Copia la clave que aparece'})]})]}),(0,Bp.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,Bp.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:(0,Bp.jsx)("span",{className:"text-green-600 font-bold",children:"3"})}),(0,Bp.jsxs)("div",{children:[(0,Bp.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"P\xe9gala aqu\xed \u2b07\ufe0f"}),(0,Bp.jsx)("p",{className:"text-gray-600 text-sm",children:"\xa1Y listo! Tu IA personal estar\xe1 configurada"})]})]})]}),(0,Bp.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-100",children:(0,Bp.jsx)("button",{onClick:()=>a("input"),className:"w-full bg-gradient-to-r from-purple-500 to-blue-600 text-white py-3 rounded-xl font-semibold hover:from-purple-600 hover:to-blue-700 transition-all duration-200 transform hover:scale-[1.02]",children:"Ya tengo mi API Key \u2192"})})]})]}),"input"===o&&(0,Bp.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,Bp.jsxs)("div",{className:"text-center mb-8",children:[(0,Bp.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udd11"}),(0,Bp.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Conecta tu IA Personal"}),(0,Bp.jsx)("p",{className:"text-gray-600",children:"Pega tu API key de Google AI Studio aqu\xed"})]}),(0,Bp.jsxs)("div",{className:"space-y-6",children:[(0,Bp.jsxs)("div",{children:[(0,Bp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Google AI Studio API Key"}),(0,Bp.jsxs)("div",{className:"relative",children:[(0,Bp.jsx)("input",{type:u?"text":"password",value:i,onChange:e=>s(e.target.value),onKeyDown:e=>"Enter"===e.key&&i.trim()&&h(),placeholder:"AIzaSyD...tu-api-key-aqu\xed",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition-colors pr-12"}),(0,Bp.jsx)("button",{onClick:()=>d(!u),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:u?"\ud83d\udc41\ufe0f":"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f"})]}),(0,Bp.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Tu API key se guarda localmente en tu navegador. Es 100% privada y segura."})]}),(0,Bp.jsx)("button",{onClick:()=>i.trim()&&h(),disabled:!i.trim(),className:"w-full bg-gradient-to-r from-purple-500 to-blue-600 text-white py-3 rounded-xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed hover:from-purple-600 hover:to-blue-700 transition-all duration-200 transform hover:scale-[1.02]",children:"Conectar mi IA Personal \u2728"})]}),(0,Bp.jsx)("div",{className:"mt-6 text-center",children:(0,Bp.jsx)("button",{onClick:()=>a("intro"),className:"text-gray-500 hover:text-gray-700 text-sm underline",children:"\u2190 Volver a las instrucciones"})})]}),"validating"===o&&(0,Bp.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,Bp.jsx)("div",{className:"animate-spin text-6xl mb-6",children:"\ud83e\udd16"}),(0,Bp.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Conectando con tu IA..."}),(0,Bp.jsx)("p",{className:"text-gray-600 mb-6",children:"Validando tu API key y configurando tu asistente personal"}),(0,Bp.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:(0,Bp.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-blue-600 h-2 rounded-full animate-pulse",style:{width:"60%"}})})]}),"success"===o&&(0,Bp.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,Bp.jsx)("div",{className:"text-6xl mb-6",children:"\ud83c\udf89"}),(0,Bp.jsx)("h2",{className:"text-2xl font-bold text-green-800 mb-2",children:"\xa1Perfecto! IA Conectada"}),(0,Bp.jsx)("p",{className:"text-gray-600 mb-6",children:"Tu asistente personal de ingl\xe9s est\xe1 listo. Ahora tendr\xe1s:"}),(0,Bp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[(0,Bp.jsxs)("div",{className:"bg-green-50 p-4 rounded-xl",children:[(0,Bp.jsx)("div",{className:"text-2xl mb-2",children:"\u221e"}),(0,Bp.jsx)("p",{className:"text-sm font-medium text-green-800",children:"Lecciones Infinitas"})]}),(0,Bp.jsxs)("div",{className:"bg-blue-50 p-4 rounded-xl",children:[(0,Bp.jsx)("div",{className:"text-2xl mb-2",children:"\ud83c\udfaf"}),(0,Bp.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"S\xfaper Personalizadas"})]}),(0,Bp.jsxs)("div",{className:"bg-purple-50 p-4 rounded-xl",children:[(0,Bp.jsx)("div",{className:"text-2xl mb-2",children:"\ud83e\udde0"}),(0,Bp.jsx)("p",{className:"text-sm font-medium text-purple-800",children:"Aprende de tus Errores"})]}),(0,Bp.jsxs)("div",{className:"bg-orange-50 p-4 rounded-xl",children:[(0,Bp.jsx)("div",{className:"text-2xl mb-2",children:"\u26a1"}),(0,Bp.jsx)("p",{className:"text-sm font-medium text-orange-800",children:"Feedback Instant\xe1neo"})]})]}),(0,Bp.jsx)("button",{onClick:()=>a("ready"),className:"w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-3 rounded-xl font-semibold hover:from-green-600 hover:to-blue-600 transition-all duration-200 transform hover:scale-[1.02]",children:"\xa1Empezar a Aprender! \ud83d\ude80"})]}),"error"===o&&(0,Bp.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,Bp.jsx)("div",{className:"text-6xl mb-6",children:"\ud83d\ude15"}),(0,Bp.jsx)("h2",{className:"text-2xl font-bold text-red-800 mb-2",children:"Oops! API Key Inv\xe1lida"}),(0,Bp.jsx)("p",{className:"text-gray-600 mb-6",children:"Parece que hay un problema con tu API key. Vamos a intentarlo de nuevo."}),(0,Bp.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6 text-left",children:[(0,Bp.jsx)("h4",{className:"font-semibold text-red-800 mb-2",children:"Verifica que:"}),(0,Bp.jsxs)("ul",{className:"text-sm text-red-700 space-y-1",children:[(0,Bp.jsx)("li",{children:'\u2713 Tu API key empiece con "AIza"'}),(0,Bp.jsx)("li",{children:"\u2713 La copiaste completa (sin espacios extra)"}),(0,Bp.jsx)("li",{children:"\u2713 La API key est\xe9 activa en Google AI Studio"})]})]}),(0,Bp.jsxs)("div",{className:"space-y-3",children:[(0,Bp.jsx)("button",{onClick:()=>a("input"),className:"w-full bg-gradient-to-r from-red-500 to-pink-600 text-white py-3 rounded-xl font-semibold hover:from-red-600 hover:to-pink-700 transition-all duration-200",children:"Intentar de Nuevo"}),(0,Bp.jsx)("button",{onClick:()=>a("intro"),className:"w-full bg-gray-100 text-gray-700 py-2 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:"Ver Instrucciones Otra Vez"})]})]})]})};class Qp{static async isFirebaseAvailable(){try{const e=new AbortController,t=setTimeout(()=>e.abort(),5e3);await fetch("https://firestore.googleapis.com/",{method:"HEAD",mode:"no-cors",signal:e.signal});return clearTimeout(t),!0}catch(e){return console.warn("\u26a0\ufe0f Firebase no disponible - usando modo offline"),!1}}static saveToLocalStorage(e,t){try{localStorage.setItem("offline_".concat(e),JSON.stringify({data:t,timestamp:Date.now(),synced:!1})),console.log("\ud83d\udcbe Datos guardados localmente:",e)}catch(n){console.error("\u274c Error guardando localmente:",n)}}static getFromLocalStorage(e){try{const t=localStorage.getItem("offline_".concat(e));if(t){return JSON.parse(t).data}return null}catch(t){return console.error("\u274c Error recuperando datos locales:",t),null}}static async syncPendingData(){if(!await this.isFirebaseAvailable())return;console.log("\ud83d\udd04 Sincronizando datos offline...");const e=Object.keys(localStorage).filter(e=>e.startsWith("offline_")&&!e.includes("synced"));for(const n of e)try{this.getFromLocalStorage(n.replace("offline_",""))&&(console.log("\ud83d\udce4 Sincronizando:",n),localStorage.removeItem(n))}catch(t){console.error("\u274c Error sincronizando:",n,t)}}static cleanOldOfflineData(){const e=Date.now()-6048e5;Object.keys(localStorage).filter(e=>e.startsWith("offline_")).forEach(t=>{try{const n=localStorage.getItem(t);if(n){JSON.parse(n).timestamp<e&&(localStorage.removeItem(t),console.log("\ud83e\uddf9 Limpiado dato offline antiguo:",t))}}catch(n){localStorage.removeItem(t)}})}}Qp.cleanOldOfflineData(),setInterval(()=>{Qp.syncPendingData()},3e5);const Yp=3,Jp=1e4;class Xp{static async detectUserLevel(e){console.log("\ud83e\udde0 DETECTANDO NIVEL DE INGL\xc9S DEL USUARIO");try{const t=await this.getUserProfile(e);if(!t||t.learningMetrics.totalExercises<10)return console.log("\ud83d\udcca Insuficientes datos - Iniciando con nivel A1"),"A1";const{overallAccuracy:n,totalExercises:r}=t.learningMetrics,i=Object.values(t.topicMastery),s=i.filter(e=>"mastered"===e.masteryLevel).length,o=i.filter(e=>"good"===e.masteryLevel).length,a=i.length;let l="A1";return n>=.85&&s>=.7*a?l=r>=100?"B2":r>=50?"B1":"A2":n>=.75&&s+o>=.6*a&&(l=r>=50?"A2":"A1"),console.log("\ud83c\udfaf NIVEL DETECTADO: ".concat(l," (Precisi\xf3n: ").concat((100*n).toFixed(1),"%)")),await this.updateUserProfile(e,{detectedLevel:l}),l}catch(t){return console.error("\u274c Error detectando nivel:",t),"A1"}}static async analyzeUserWeaknesses(e){console.log("\ud83d\udd0d ANALIZANDO DEBILIDADES DEL USUARIO");try{const t=await this.getUserProfile(e);if(!t)return[];const n=Object.entries(t.topicMastery).filter(e=>{let[t,n]=e;return"weak"===n.masteryLevel||n.accuracy<.6&&n.exercisesCompleted>=5}).map(e=>{let[t,n]=e;return t}).slice(0,3);return console.log("\ud83d\udcc9 \xc1REAS D\xc9BILES IDENTIFICADAS:",n),n}catch(t){return console.error("\u274c Error analizando debilidades:",t),[]}}static async getPersonalizedRecommendations(e){console.log("\ud83c\udfaf GENERANDO RECOMENDACIONES PERSONALIZADAS");const t=await this.getUserProfile(e);if(!t)return{recommendedTopics:["present simple"],suggestedDifficulty:"A1",focusAreas:["basic grammar"],studyPlan:["Comenzar con conceptos b\xe1sicos"]};const n=await this.analyzeUserWeaknesses(e),r=Object.entries(t.topicMastery).filter(e=>{let[t,n]=e;return"mastered"===n.masteryLevel}).map(e=>{let[t,n]=e;return t});return{recommendedTopics:n.length>0?n:["present simple","past simple"],suggestedDifficulty:t.detectedLevel||t.currentLevel,focusAreas:n,studyPlan:this.generateStudyPlan(t,n,r)}}static async recordExerciseInteraction(e){let t=0;for(;t<Yp;)try{const t=c(c({},e),{},{timestamp:new Date}),n=new Promise((e,t)=>setTimeout(()=>t(new Error("Firebase timeout")),Jp));return await Promise.race([cd(lu(qp,"exercise_interactions"),t),n]),await this.updateLearningProfile(e.userId,t),void console.log("\u2705 Interacci\xf3n registrada:",t.exerciseId)}catch(n){if(t++,console.warn("\u26a0\ufe0f Intento ".concat(t,"/").concat(Yp," fall\xf3:"),n),t>=Yp){console.log("\u26a0\ufe0f Firebase no disponible - usando solo localStorage (app funciona normal)");const t=c(c({},e),{},{timestamp:new Date});return Qp.saveToLocalStorage("interaction_".concat(e.exerciseId,"_").concat(Date.now()),t),void console.log("\ud83d\udcbe Interacci\xf3n guardada offline para sincronizaci\xf3n posterior")}await new Promise(e=>setTimeout(e,1e3*t))}}static async updateLearningProfile(e,t){try{const n=await this.getUserProfile(e)||this.createEmptyProfile(e);n.topicMastery[t.topic]||(n.topicMastery[t.topic]={accuracy:0,exercisesCompleted:0,averageTime:0,lastPracticed:new Date,masteryLevel:"learning"});const r=n.topicMastery[t.topic],i=t.isCorrect?1:0;r.exercisesCompleted+=1,r.accuracy=(r.accuracy*(r.exercisesCompleted-1)+i)/r.exercisesCompleted,r.averageTime=(r.averageTime*(r.exercisesCompleted-1)+t.responseTime)/r.exercisesCompleted,r.lastPracticed=new Date,r.accuracy>=.9&&r.exercisesCompleted>=10?r.masteryLevel="mastered":r.accuracy>=.75&&r.exercisesCompleted>=5?r.masteryLevel="good":r.accuracy<.5&&r.exercisesCompleted>=5?r.masteryLevel="weak":r.masteryLevel="learning",n.learningMetrics.totalExercises+=1,t.isCorrect&&(n.learningMetrics.correctAnswers+=1),n.learningMetrics.overallAccuracy=n.learningMetrics.correctAnswers/n.learningMetrics.totalExercises,!t.isCorrect&&t.errorType&&(n.commonMistakes[t.errorType]||(n.commonMistakes[t.errorType]={frequency:0,lastOccurrence:new Date,examples:[]}),n.commonMistakes[t.errorType].frequency+=1,n.commonMistakes[t.errorType].lastOccurrence=new Date),n.lastUpdated=new Date,await function(e,t,n){e=wn(e,ou);const r=wn(e.firestore,fu),i=nd(e.converter,t,n);return ud(r,[Tu(Au(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ls.none())])}(cu(qp,"user_learning_profiles",e),n),console.log("\ud83d\udcca Perfil actualizado - Precisi\xf3n: ".concat((100*n.learningMetrics.overallAccuracy).toFixed(1),"%"))}catch(n){console.error("\u274c Error actualizando perfil:",n)}}static async getUserProfile(e){try{const r=cu(qp,"user_learning_profiles",e),i=await function(e){e=wn(e,ou);const t=wn(e.firestore,fu);return Jc(pu(t),e._key).then(n=>dd(t,e,n))}(r);if(i.exists()){var t,n;const e=i.data();return c(c({},e),{},{lastUpdated:(null===(t=e.lastUpdated)||void 0===t?void 0:t.toDate())||new Date,createdAt:(null===(n=e.createdAt)||void 0===n?void 0:n.toDate())||new Date})}return null}catch(r){return console.error("\u274c Error obteniendo perfil:",r),null}}static async updateUserProfile(e,t){try{const n=cu(qp,"user_learning_profiles",e);await function(e,t,n){e=wn(e,ou);const r=wn(e.firestore,fu),i=Au(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=V(t))||t instanceof vu?Ru(i,"updateDoc",e._key,t,n,a):Nu(i,"updateDoc",e._key,t),ud(r,[s.toMutation(e._key,Ls.exists(!0))])}(n,c(c({},t),{},{lastUpdated:new Date}))}catch(n){console.error("\u274c Error actualizando perfil:",n)}}static createEmptyProfile(e){return{userId:e,currentLevel:"A1",topicMastery:{},commonMistakes:{},learningMetrics:{totalExercises:0,correctAnswers:0,overallAccuracy:0,studyStreak:0,averageSessionTime:0,preferredStudyTime:"evening",learningVelocity:0},adaptiveSettings:{difficultyPreference:"balanced",explanationDetail:"detailed",repetitionFrequency:"medium",focusAreas:[]},sessionHistory:[],goals:{targetLevel:"B1",dailyGoal:10,weeklyGoal:50},lastUpdated:new Date,createdAt:new Date}}static generateStudyPlan(e,t,n){const r=[];return t.length>0&&(r.push("\ud83c\udfaf Enfocar en \xe1reas d\xe9biles: ".concat(t.join(", "))),r.push("\ud83d\udcda Practicar 15-20 ejercicios diarios de estos temas")),n.length>0&&r.push("\u2705 Mantener fortalezas: ".concat(n.slice(0,2).join(", "))),e.learningMetrics.overallAccuracy<.7&&r.push("\u26a1 Reducir velocidad - enfocarse en precisi\xf3n antes que velocidad"),r.push("\ud83c\udfaf Meta semanal: ".concat(e.goals.weeklyGoal," ejercicios")),r}static async getDetailedAnalytics(e){console.log("\ud83d\udcca GENERANDO ANALYTICS DETALLADOS");try{const n=await this.getUserProfile(e);if(!n)return this.getEmptyAnalytics();const r=function(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Wu&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Yu).length,n=e.filter(e=>e instanceof Qu).length;if(t>1||t>0&&n>0)throw new Ht(Bt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}(lu(qp,"exercise_interactions"),function(e,t,n){const r=t,i=Hu("where",e);return Qu._create(i,r,n)}("userId","==",e),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Hu("orderBy",e);return Ju._create(n,t)}("timestamp","desc"),(_n("limit",t=100),Xu._create("limit",t,"F"))),i=await function(e){e=wn(e,su);const t=wn(e.firestore,fu),n=pu(t),r=new ld(t);return Gu(e._query),Xc(n,e._query).then(n=>new od(t,r,e,n))}(r),s=i.docs.map(e=>e.data());return{weeklyProgress:this.calculateWeeklyProgress(s),topicBreakdown:this.analyzeTopicPerformance(n.topicMastery),errorPatterns:this.analyzeErrorPatterns(n.commonMistakes),learningVelocity:this.calculateLearningVelocity(s),recommendations:await this.getPersonalizedRecommendations(e).then(e=>e.studyPlan)}}catch(n){return console.log("\u26a0\ufe0f Analytics no disponible - usando datos locales"),this.getEmptyAnalytics()}var t}static calculateWeeklyProgress(e){return[]}static analyzeTopicPerformance(e){return Object.entries(e).map(e=>{let[t,n]=e;return{topic:t,accuracy:n.accuracy,exercisesCompleted:n.exercisesCompleted,masteryLevel:n.masteryLevel}})}static analyzeErrorPatterns(e){return Object.entries(e).map(e=>{let[t,n]=e;return{errorType:t,frequency:n.frequency,lastOccurrence:n.lastOccurrence}})}static calculateLearningVelocity(e){if(e.length<2)return 0;const t=new Date,n=new Date(t.getTime()-6048e5);return e.filter(e=>new Date(e.timestamp)>=n).length/7}static getEmptyAnalytics(){return{weeklyProgress:[],topicBreakdown:[],errorPatterns:[],learningVelocity:0,recommendations:["Comenzar con ejercicios b\xe1sicos"]}}}var $p,Zp,em;!function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"}($p||($p={})),function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"}(Zp||(Zp={})),function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"}(em||(em={}));const tm=["user","model","function","system"];var nm,rm,im,sm,om,am,lm,cm;!function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"}(nm||(nm={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(rm||(rm={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(im||(im={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"}(sm||(sm={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"}(om||(om={})),function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"}(am||(am={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"}(lm||(lm={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(cm||(cm={}));class um extends Error{constructor(e){super("[GoogleGenerativeAI Error]: ".concat(e))}}class dm extends um{constructor(e,t){super(e),this.response=t}}class hm extends um{constructor(e,t,n,r){super(e),this.status=t,this.statusText=n,this.errorDetails=r}}class fm extends um{}class pm extends um{}var mm;!function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"}(mm||(mm={}));class gm{constructor(e,t,n,r,i){this.model=e,this.task=t,this.apiKey=n,this.stream=r,this.requestOptions=i}toString(){var e,t;const n=(null===(e=this.requestOptions)||void 0===e?void 0:e.apiVersion)||"v1beta",r=(null===(t=this.requestOptions)||void 0===t?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com";let i="".concat(r,"/").concat(n,"/").concat(this.model,":").concat(this.task);return this.stream&&(i+="?alt=sse"),i}}async function vm(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",function(e){const t=[];return(null===e||void 0===e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("".concat("genai-js","/").concat("0.24.1")),t.join(" ")}(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let r=null===(t=e.requestOptions)||void 0===t?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(i){throw new fm("unable to convert customHeaders value ".concat(JSON.stringify(r)," to Headers: ").concat(i.message))}for(const[e,t]of r.entries()){if("x-goog-api-key"===e)throw new fm("Cannot set reserved header name ".concat(e));if("x-goog-api-client"===e)throw new fm("Header name ".concat(e," can only be set using the apiClient field"));n.append(e,t)}}return n}async function ym(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:fetch;const{url:a,fetchOptions:l}=await async function(e,t,n,r,i,s){const o=new gm(e,t,n,r,s);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},bm(s)),{method:"POST",headers:await vm(o),body:i})}}(e,t,n,r,i,s);return async function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fetch;try{n=await r(e,t)}catch(i){!function(e,t){let n=e;"AbortError"===n.name?(n=new pm("Request aborted when fetching ".concat(t.toString(),": ").concat(e.message)),n.stack=e.stack):e instanceof hm||e instanceof fm||(n=new um("Error fetching from ".concat(t.toString(),": ").concat(e.message)),n.stack=e.stack);throw n}(i,e)}n.ok||await async function(e,t){let n,r="";try{const t=await e.json();r=t.error.message,t.error.details&&(r+=" ".concat(JSON.stringify(t.error.details)),n=t.error.details)}catch(i){}throw new hm("Error fetching from ".concat(t.toString(),": [").concat(e.status," ").concat(e.statusText,"] ").concat(r),e.status,e.statusText,n)}(n,e);return n}(a,l,o)}function bm(e){const t={};if(void 0!==(null===e||void 0===e?void 0:e.signal)||(null===e||void 0===e?void 0:e.timeout)>=0){const n=new AbortController;(null===e||void 0===e?void 0:e.timeout)>=0&&setTimeout(()=>n.abort(),e.timeout),(null===e||void 0===e?void 0:e.signal)&&e.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}function wm(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn("This response had ".concat(e.candidates.length," ")+"candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates."),xm(e.candidates[0]))throw new dm("".concat(Sm(e)),e);return function(e){var t,n,r,i;const s=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const o of null===(i=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===i?void 0:i.parts)o.text&&s.push(o.text),o.executableCode&&s.push("\n```"+o.executableCode.language+"\n"+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&s.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}(e)}if(e.promptFeedback)throw new dm("Text not available. ".concat(Sm(e)),e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn("This response had ".concat(e.candidates.length," ")+"candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates."),xm(e.candidates[0]))throw new dm("".concat(Sm(e)),e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),_m(e)[0]}if(e.promptFeedback)throw new dm("Function call not available. ".concat(Sm(e)),e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn("This response had ".concat(e.candidates.length," ")+"candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates."),xm(e.candidates[0]))throw new dm("".concat(Sm(e)),e);return _m(e)}if(e.promptFeedback)throw new dm("Function call not available. ".concat(Sm(e)),e)},e}function _m(e){var t,n,r,i;const s=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const o of null===(i=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===i?void 0:i.parts)o.functionCall&&s.push(o.functionCall);return s.length>0?s:void 0}const Em=[om.RECITATION,om.SAFETY,om.LANGUAGE];function xm(e){return!!e.finishReason&&Em.includes(e.finishReason)}function Sm(e){var t,n,r;let i="";if(e.candidates&&0!==e.candidates.length||!e.promptFeedback){if(null===(r=e.candidates)||void 0===r?void 0:r[0]){const t=e.candidates[0];xm(t)&&(i+="Candidate was blocked due to ".concat(t.finishReason),t.finishMessage&&(i+=": ".concat(t.finishMessage)))}}else i+="Response was blocked",(null===(t=e.promptFeedback)||void 0===t?void 0:t.blockReason)&&(i+=" due to ".concat(e.promptFeedback.blockReason)),(null===(n=e.promptFeedback)||void 0===n?void 0:n.blockReasonMessage)&&(i+=": ".concat(e.promptFeedback.blockReasonMessage));return i}function Im(e){return this instanceof Im?(this.v=e,this):new Im(e)}function Cm(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){s.push([e,t,n,r])>1||a(e,t)})})}function a(e,t){try{(n=i[e](t)).value instanceof Im?Promise.resolve(n.value.v).then(l,c):u(s[0][2],n)}catch(r){u(s[0][3],r)}var n}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}"function"===typeof SuppressedError&&SuppressedError;const Am=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Tm(e){const t=function(e){const t=e.getReader();return new ReadableStream({start(e){let n="";return r();function r(){return t.read().then(t=>{let{value:i,done:s}=t;if(s)return n.trim()?void e.error(new um("Failed to parse stream")):void e.close();n+=i;let o,a=n.match(Am);for(;a;){try{o=JSON.parse(a[1])}catch(l){return void e.error(new um('Error parsing JSON response: "'.concat(a[1],'"')))}e.enqueue(o),n=n.substring(a[0].length),a=n.match(Am)}return r()}).catch(e=>{let t=e;throw t.stack=e.stack,t="AbortError"===t.name?new pm("Request aborted when reading from the stream"):new um("Error reading from the stream"),t})}}})}(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))),[n,r]=t.tee();return{stream:Nm(n),response:km(r)}}async function km(e){const t=[],n=e.getReader();for(;;){const{done:e,value:r}=await n.read();if(e)return wm(Rm(t));t.push(r)}}function Nm(e){return Cm(this,arguments,function*(){const t=e.getReader();for(;;){const{value:e,done:n}=yield Im(t.read());if(n)break;yield yield Im(wm(e))}})}function Rm(e){const t=e[e.length-1],n={promptFeedback:null===t||void 0===t?void 0:t.promptFeedback};for(const r of e){if(r.candidates){let e=0;for(const t of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[e]||(n.candidates[e]={index:e}),n.candidates[e].citationMetadata=t.citationMetadata,n.candidates[e].groundingMetadata=t.groundingMetadata,n.candidates[e].finishReason=t.finishReason,n.candidates[e].finishMessage=t.finishMessage,n.candidates[e].safetyRatings=t.safetyRatings,t.content&&t.content.parts){n.candidates[e].content||(n.candidates[e].content={role:t.content.role||"user",parts:[]});const r={};for(const i of t.content.parts)i.text&&(r.text=i.text),i.functionCall&&(r.functionCall=i.functionCall),i.executableCode&&(r.executableCode=i.executableCode),i.codeExecutionResult&&(r.codeExecutionResult=i.codeExecutionResult),0===Object.keys(r).length&&(r.text=""),n.candidates[e].content.parts.push(r)}e++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}async function Pm(e,t,n,r){return Tm(await ym(t,mm.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),r))}async function Om(e,t,n,r){const i=await ym(t,mm.GENERATE_CONTENT,e,!1,JSON.stringify(n),r);return{response:wm(await i.json())}}function Dm(e){if(null!=e)return"string"===typeof e?{role:"system",parts:[{text:e}]}:e.text?{role:"system",parts:[e]}:e.parts?e.role?e:{role:"system",parts:e.parts}:void 0}function Lm(e){let t=[];if("string"===typeof e)t=[{text:e}];else for(const n of e)"string"===typeof n?t.push({text:n}):t.push(n);return function(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,i=!1;for(const s of e)"functionResponse"in s?(n.parts.push(s),i=!0):(t.parts.push(s),r=!0);if(r&&i)throw new um("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new um("No content is provided for sending chat message.");if(r)return t;return n}(t)}function Mm(e){let t;if(e.contents)t=e;else{t={contents:[Lm(e)]}}return e.systemInstruction&&(t.systemInstruction=Dm(e.systemInstruction)),t}const jm=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Um={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Fm(e){var t;if(void 0===e.candidates||0===e.candidates.length)return!1;const n=null===(t=e.candidates[0])||void 0===t?void 0:t.content;if(void 0===n)return!1;if(void 0===n.parts||0===n.parts.length)return!1;for(const r of n.parts){if(void 0===r||0===Object.keys(r).length)return!1;if(void 0!==r.text&&""===r.text)return!1}return!0}const Vm="SILENT_ERROR";class qm{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.model=t,this.params=n,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null===n||void 0===n?void 0:n.history)&&(!function(e){let t=!1;for(const n of e){const{role:e,parts:r}=n;if(!t&&"user"!==e)throw new um("First content should be with role 'user', got ".concat(e));if(!tm.includes(e))throw new um("Each item should include role field. Got ".concat(e," but valid roles are: ").concat(JSON.stringify(tm)));if(!Array.isArray(r))throw new um("Content should have 'parts' property with an array of Parts");if(0===r.length)throw new um("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const t of r)for(const e of jm)e in t&&(i[e]+=1);const s=Um[e];for(const t of jm)if(!s.includes(t)&&i[t]>0)throw new um("Content with role '".concat(e,"' can't contain '").concat(t,"' part"));t=!0}}(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r,i,s,o,a;await this._sendPromise;const l=Lm(e),c={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(i=this.params)||void 0===i?void 0:i.tools,toolConfig:null===(s=this.params)||void 0===s?void 0:s.toolConfig,systemInstruction:null===(o=this.params)||void 0===o?void 0:o.systemInstruction,cachedContent:null===(a=this.params)||void 0===a?void 0:a.cachedContent,contents:[...this._history,l]},u=Object.assign(Object.assign({},this._requestOptions),t);let d;return this._sendPromise=this._sendPromise.then(()=>Om(this._apiKey,this.model,c,u)).then(e=>{var t;if(Fm(e.response)){this._history.push(l);const n=Object.assign({parts:[],role:"model"},null===(t=e.response.candidates)||void 0===t?void 0:t[0].content);this._history.push(n)}else{const t=Sm(e.response);t&&console.warn("sendMessage() was unsuccessful. ".concat(t,". Inspect response object for details."))}d=e}).catch(e=>{throw this._sendPromise=Promise.resolve(),e}),await this._sendPromise,d}async sendMessageStream(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r,i,s,o,a;await this._sendPromise;const l=Lm(e),c={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(i=this.params)||void 0===i?void 0:i.tools,toolConfig:null===(s=this.params)||void 0===s?void 0:s.toolConfig,systemInstruction:null===(o=this.params)||void 0===o?void 0:o.systemInstruction,cachedContent:null===(a=this.params)||void 0===a?void 0:a.cachedContent,contents:[...this._history,l]},u=Object.assign(Object.assign({},this._requestOptions),t),d=Pm(this._apiKey,this.model,c,u);return this._sendPromise=this._sendPromise.then(()=>d).catch(e=>{throw new Error(Vm)}).then(e=>e.response).then(e=>{if(Fm(e)){this._history.push(l);const t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{const t=Sm(e);t&&console.warn("sendMessageStream() was unsuccessful. ".concat(t,". Inspect response object for details."))}}).catch(e=>{e.message!==Vm&&console.error(e)}),d}}class zm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model="models/".concat(t.model),this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=Dm(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const r=Mm(e),i=Object.assign(Object.assign({},this._requestOptions),t);return Om(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},r),i)}async generateContentStream(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const r=Mm(e),i=Object.assign(Object.assign({},this._requestOptions),t);return Pm(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},r),i)}startChat(e){var t;return new qm(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},e),this._requestOptions)}async countTokens(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=function(e,t){var n;let r={model:null===t||void 0===t?void 0:t.model,generationConfig:null===t||void 0===t?void 0:t.generationConfig,safetySettings:null===t||void 0===t?void 0:t.safetySettings,tools:null===t||void 0===t?void 0:t.tools,toolConfig:null===t||void 0===t?void 0:t.toolConfig,systemInstruction:null===t||void 0===t?void 0:t.systemInstruction,cachedContent:null===(n=null===t||void 0===t?void 0:t.cachedContent)||void 0===n?void 0:n.name,contents:[]};const i=null!=e.generateContentRequest;if(e.contents){if(i)throw new fm("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(i)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{const t=Lm(e);r.contents=[t]}return{generateContentRequest:r}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){return(await ym(t,mm.COUNT_TOKENS,e,!1,JSON.stringify(n),r)).json()}(this.apiKey,this.model,n,r)}async embedContent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=function(e){if("string"===typeof e||Array.isArray(e))return{content:Lm(e)};return e}(e),r=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){return(await ym(t,mm.EMBED_CONTENT,e,!1,JSON.stringify(n),r)).json()}(this.apiKey,this.model,n,r)}async batchEmbedContents(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){const i=n.requests.map(e=>Object.assign(Object.assign({},e),{model:t}));return(await ym(t,mm.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:i}),r)).json()}(this.apiKey,this.model,e,n)}}class Bm{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new um("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new zm(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new fm("Cached content must contain a `name` field.");if(!e.model)throw new fm("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const s of r)if((null===t||void 0===t?void 0:t[s])&&e[s]&&(null===t||void 0===t?void 0:t[s])!==e[s]){if("model"===s){if((t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue}throw new fm('Different value for "'.concat(s,'" specified in modelParams')+" (".concat(t[s],") and cachedContent (").concat(e[s],")"))}const i=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new zm(this.apiKey,i,n)}}class Hm{constructor(e){this.genAI=void 0,this.genAI=new Bm(e)}async generateMultipleChoiceExercise(e){const t=[{type:"VOCABULARIO",instruction:"What does this English word mean?",format:"English word \u2192 Spanish options",example:"What does 'stream' mean in 'I stream Netflix'? \u2192 A) transmitir B) r\xedo C) correr D) gritar"},{type:"GRAM\xc1TICA",instruction:"Complete the sentence with the correct option",format:"English sentence with blank \u2192 English grammar options",example:"I _____ working from home since 2020. \u2192 A) have been B) am C) was D) will be"},{type:"TRADUCCI\xd3N",instruction:"Select the correct English translation",format:"Spanish phrase \u2192 English translation options",example:"How do you say 'me gusta tu post' in English? \u2192 A) I like your post B) I love your post C) I want your post D) I see your post"},{type:"COMPRENSI\xd3N",instruction:"Read the text and answer the question",format:"Short English text \u2192 English comprehension question",example:"Text: 'Ana is in a Zoom meeting with her team. She has been working remotely since 2020.' Question: Has Ana finished the Zoom meeting? \u2192 A) No, she's still in it B) Yes, she finished C) She never started D) She's starting now"}][e.exerciseNumber%4],n=["usando apps de delivery como Uber Eats","subiendo stories a Instagram","trabajando remotamente en videollamadas","viendo series en Netflix y plataformas streaming","haciendo videos para TikTok","comprando online en Amazon","chateando por WhatsApp con amigos","dejando reviews en Google Maps","pidiendo taxi por apps como Uber","haciendo posts en redes sociales"],r=n[Math.floor(Math.random()*n.length)],i="Eres un profesor de ingl\xe9s experto. Crea un ejercicio de tipo ".concat(t.type," para estudiantes hispanohablantes de nivel ").concat(e.level,".\n\nCONTEXTO OBLIGATORIO: ").concat(r,"\nTEMA: ").concat(e.topic,"\n\nINSTRUCCIONES CR\xcdTICAS:\n\ud83c\uddec\ud83c\udde7 PREGUNTA e INSTRUCCI\xd3N deben estar en INGL\xc9S (es una app para aprender ingl\xe9s)\n\ud83c\uddea\ud83c\uddf8 SOLO la explicaci\xf3n debe estar en ESPA\xd1OL PERFECTO\n\ud83c\udfaf Tipo de ejercicio: ").concat(t.type,"\n\ud83d\udcf1 Usar vocabulario moderno del contexto: ").concat(r,"\n\ud83d\udc76 Explicaci\xf3n para principiantes absolutos en espa\xf1ol\n\u274c PROHIBIDO generar preguntas en espa\xf1ol (excepto para ejercicios de traducci\xf3n)\n\nFORMATO REQUERIDO:\n").concat(t.format,"\n\nEJEMPLO ESPEC\xcdFICO:\n").concat(t.example,'\n\n           ESTRUCTURA DE RESPUESTA (JSON v\xe1lido):\n           {\n             "question": "[Para COMPRENSI\xd3N: incluir texto completo + pregunta. Para otros: solo pregunta]",\n             "instruction": "').concat(t.instruction,'",\n             "options": ["opci\xf3n 1", "opci\xf3n 2", "opci\xf3n 3", "opci\xf3n 4"],\n             "correctAnswer": 0,\n             "explanation": "\ud83c\udfaf EXPLICACI\xd3N COMPLETA EN ESPA\xd1OL: [Explicaci\xf3n detallada de por qu\xe9 es correcta, con ejemplos adicionales, todo en espa\xf1ol perfecto para principiantes]"\n           }\n\n           IMPORTANTE: \n           \ud83c\uddec\ud83c\udde7 IDIOMA DE PREGUNTAS:\n           - PREGUNTA: Siempre en INGL\xc9S (es una app para aprender ingl\xe9s)\n           - INSTRUCCI\xd3N: Siempre en INGL\xc9S (usar las definidas arriba)\n           - OPCIONES: Depende del tipo (ingl\xe9s para gram\xe1tica/comprensi\xf3n, espa\xf1ol para vocabulario)\n           \n           \ud83c\uddea\ud83c\uddf8 IDIOMA DE EXPLICACIONES:\n           - La explicaci\xf3n DEBE empezar con un emoji y estar completamente en espa\xf1ol\n           - Incluir ejemplos adicionales en espa\xf1ol\n           - Explicar por qu\xe9 las otras opciones est\xe1n mal\n           - Usar un tono amigable y pedag\xf3gico\n           \n           \ud83d\udccb FORMATO:\n           - Las opciones NO deben tener letras A), B), C), D)\n           - Solo la palabra/frase directa\n           - El componente agregar\xe1 las letras autom\xe1ticamente\n           \n           \u26a0\ufe0f CR\xcdTICO PARA COMPRENSI\xd3N:\n           - Si es tipo COMPRENSI\xd3N, la pregunta DEBE incluir el texto completo a leer\n           - Formato: "Text: \'Ana is in a Zoom meeting with her team...\' Question: Has Ana finished the meeting?"\n           - NO generar solo la pregunta sin el texto de contexto\n\n           Responde SOLO el JSON, sin texto adicional:');try{const n=this.genAI.getGenerativeModel({model:"gemini-1.5-flash",generationConfig:{temperature:.9,topP:.8,maxOutputTokens:1024}});console.log("\ud83e\udd16 GENERANDO EJERCICIO CON EXPLICACI\xd3N EN ESPA\xd1OL"),console.log("\ud83d\udcdd Tipo:",t.type,"| Contexto:",r);const o=(await n.generateContent(i)).response.text();console.log("\u2705 RESPUESTA IA COMPLETA:",o);const a=o.match(/\{[\s\S]*\}/);if(!a)throw new Error("No JSON found in AI response");let l;try{l=JSON.parse(a[0])}catch(s){throw console.error("JSON Parse Error:",s),new Error("Invalid JSON from AI")}if(l.explanation&&l.explanation.length>20){const t=["es","la","el","un","una","con","por","para","que","de","del","en","se","y","o","pero","cuando","como","donde","porque","usamos","correcto","incorrecto","significa","ejemplo"],n=l.explanation.toLowerCase();t.filter(e=>n.includes(" "+e+" ")||n.startsWith(e+" ")).length<3&&(console.warn("\u26a0\ufe0f EXPLICACI\xd3N POSIBLEMENTE EN INGL\xc9S - FORZANDO ESPA\xd1OL"),l.explanation="\ud83c\udfaf NIVEL ".concat(e.level,": La respuesta correcta es la opci\xf3n ").concat(String.fromCharCode(65+l.correctAnswer),". Esta estructura es muy com\xfan en ingl\xe9s moderno, especialmente cuando ").concat(r.toLowerCase(),". Recuerda practicar este tipo de expresiones para sonar m\xe1s natural en ingl\xe9s."))}if(!l.question||!l.options||!Array.isArray(l.options)||4!==l.options.length)throw new Error("Invalid exercise structure from AI");const c=l.correctAnswer||0,u=l.options[c],d=[...l.options];for(let e=d.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[d[e],d[t]]=[d[t],d[e]]}const h=d.findIndex(e=>e===u);return{question:l.question,instruction:l.instruction||t.instruction,options:d,correctAnswer:h,explanation:l.explanation||"Respuesta correcta: ".concat(u),xpReward:10}}catch(o){throw console.error("\ud83d\udea8 ERROR GENERANDO EJERCICIO:",o),new Error("La IA no pudo generar ejercicio. Error: ".concat(o instanceof Error?o.message:String(o)))}}getExampleForType(e,t){return{VOCABULARY:"\"What does 'swipe' mean in '".concat(t,"'?\" \u2192 A) deslizar \u2713 B) tocar C) presionar D) escribir"),GRAMMAR:'"I ____ '.concat(t,' every day." \u2192 A) have been doing \u2713 B) am doing C) did D) will do'),TRANSLATION:"\"\xbfC\xf3mo se dice 'me encanta esto' when ".concat(t,'?" \u2192 A) I love this \u2713 B) I like this C) I want this D) I need this'),COMPREHENSION:'"Sarah was '.concat(t,' when her phone died. What happened?" \u2192 A) Her phone died \u2713 B) She was happy C) She was working D) She was sleeping')}[e]||"Example for ".concat(e," in context of ").concat(t)}}const Gm=[{id:"ps_01",level:"A1",topic:"present simple",question:"She _____ coffee every morning.",instruction:"Completa con Present Simple",options:["drink","drinks","drinking","drank"],correctAnswer:1,explanation:"\ud83d\udc76 PARA PRINCIPIANTES: En ingl\xe9s, cuando hablamos de otra persona (he=\xe9l, she=ella, it=eso), a\xf1adimos -S al final del verbo.\n\n\ud83d\udde3\ufe0f EJEMPLO DIARIO:\n\u2705 'She drinks coffee' = 'Ella bebe caf\xe9' (CORRECTO)\n\u274c 'She drink coffee' = Incorrecto (le falta la -s)\n\n\ud83d\udcdd F\xd3RMULA SIMPLE:\n\u2022 Yo/T\xfa/Nosotros \u2192 verbo normal (I drink, You drink, We drink)\n\u2022 \xc9l/Ella/Eso \u2192 verbo + S (He drinks, She drinks, It drinks)\n\n\ud83d\udca1 TRUCO: Si puedes decir '\xe9l' o 'ella' antes del verbo, a\xf1ade -S",xpReward:10},{id:"ps_02",level:"A1",topic:"present simple",question:"Do you _____ English at school?",instruction:"Completa la pregunta",options:["studies","study","studying","studied"],correctAnswer:1,explanation:"\ud83d\udc76 PARA PRINCIPIANTES: Cuando hacemos preguntas en ingl\xe9s, usamos DO o DOES como ayudantes.\n\n\ud83e\udd14 \xbfC\xd3MO FUNCIONA?\n\u2705 'Do you study English?' = '\xbfEstudias ingl\xe9s?' (CORRECTO)\n\u274c 'Do you studies English?' = Incorrecto (con DO nunca pongas -s al verbo)\n\n\ud83d\udccb REGLA F\xc1CIL:\n\u2022 Con I/You/We/They \u2192 DO + verbo normal\n\u2022 Con He/She/It \u2192 DOES + verbo normal (sin -s)\n\n\ud83d\udca1 TRUCO: DO y DOES ya hacen el trabajo de la -s, por eso el verbo va normal",xpReward:10},{id:"ps_03",level:"A1",topic:"present simple",question:"My brother _____ work on Sundays.",instruction:"Forma negativa",options:["don't","doesn't","isn't","aren't"],correctAnswer:1,explanation:"\ud83c\udfaf REGLA: Para negar en Present Simple con tercera persona singular usamos DOESN'T\n\n\u2705 'He doesn't work' - Correcto\n\u274c 'He don't work' - Incorrecto\n\n\ud83d\udca1 ESTRUCTURA: I/You/We/They + don't | He/She/It + doesn't",xpReward:10},{id:"ps_04",level:"A1",topic:"present simple",question:"Where _____ your parents live?",instruction:"Completa la pregunta",options:["does","do","are","is"],correctAnswer:1,explanation:"Con 'parents' (plural) usamos 'do'",xpReward:10},{id:"pp_01",level:"A2",topic:"present perfect",question:"I _____ never _____ sushi before.",instruction:"Completa con Present Perfect",options:["have / eat","have / eaten","has / eaten","had / eaten"],correctAnswer:1,explanation:"\ud83d\udc76 PARA PRINCIPIANTES: Present Perfect es como decir 'he hecho algo' en espa\xf1ol, pero sin decir cu\xe1ndo exactamente.\n\n\ud83d\udd50 \xbfCU\xc1NDO USARLO?\n\u2705 'I have never eaten sushi' = 'Nunca he comido sushi' (en mi vida, no s\xe9 cu\xe1ndo)\n\u274c 'I never ate sushi' = Incorrecto para experiencias de vida\n\n\ud83d\udd27 \xbfC\xd3MO SE HACE?\nHAVE/HAS + verbo en participio (comido, visto, hecho)\n\u2022 I/You/We/They \u2192 HAVE + participio\n\u2022 He/She/It \u2192 HAS + participio\n\n\ud83d\udcd6 PARTICIPIOS COMUNES:\n\u2022 eat \u2192 eaten (comido)\n\u2022 see \u2192 seen (visto)\n\u2022 go \u2192 gone (ido)\n\u2022 do \u2192 done (hecho)\n\n\ud83d\udca1 TRUCO: Si en espa\xf1ol dices 'he...' o 'has...', usa Present Perfect",xpReward:10},{id:"pp_02",level:"A2",topic:"present perfect",question:"_____ you ever _____ to Japan?",instruction:"Pregunta en Present Perfect",options:["Did / go","Have / been","Do / go","Are / going"],correctAnswer:1,explanation:"\ud83c\udfaf REGLA: Para preguntar sobre EXPERIENCIAS DE VIDA usamos HAVE YOU EVER + PARTICIPIO\n\n\u2705 'Have you ever been to Japan?' - Experiencia\n\u274c 'Did you ever go to Japan?' - Incorrecto para experiencias\n\n\ud83d\udca1 EVER = alguna vez en tu vida\n\ud83c\udf1f BEEN = participio de BE (go\u2192went\u2192gone, be\u2192was/were\u2192been)",xpReward:10},{id:"pp_03",level:"A2",topic:"present perfect",question:"She _____ here since 2020.",instruction:"Completa la oraci\xf3n",options:["lives","is living","has lived","lived"],correctAnswer:2,explanation:"\ud83c\udfe0 SITUACI\xd3N REAL: Ella vive aqu\xed desde 2020 y TODAV\xcdA vive aqu\xed ahora.\n\n\ud83d\udd11 PALABRA CLAVE: 'SINCE' (desde)\n\u2022 SINCE + fecha espec\xedfica = Present Perfect SIEMPRE\n\u2022 SINCE 2020, SINCE Monday, SINCE January\n\n\u2705 CORRECTO: 'She HAS LIVED here since 2020'\n= Ella ha vivido aqu\xed desde 2020 (y sigue viviendo)\n\n\u274c INCORRECTO:\n\u2022 'She lives' = Solo presente, no menciona cu\xe1ndo empez\xf3\n\u2022 'She is living' = Temporal, no permanente\n\u2022 'She lived' = Pasado terminado, ya no vive ah\xed\n\n\ud83d\udca1 TRUCO F\xc1CIL:\n\xbfVes SINCE? \u2192 Usa HAS/HAVE + participio pasado\n\xbfVes FOR? \u2192 Tambi\xe9n Present Perfect\n\n\ud83c\udfaf M\xc1S EJEMPLOS:\n\u2022 I have worked here since 2019\n\u2022 They have been married since 2015\n\u2022 We have lived in Spain since last year",xpReward:10},{id:"pp_04",level:"A2",topic:"present perfect",question:"We _____ just _____ dinner.",instruction:"Acci\xf3n reci\xe9n completada",options:["are / eating","have / eaten","did / eat","will / eat"],correctAnswer:1,explanation:"Para acciones reci\xe9n completadas: have just eaten",xpReward:10},{id:"prep_01",level:"A2",topic:"prepositions",question:"The meeting is _____ Monday _____ 3 PM.",instruction:"Preposiciones de tiempo",options:["in / in","on / at","at / on","in / at"],correctAnswer:1,explanation:"\ud83c\udfaf REGLA: Preposiciones de TIEMPO tienen patrones espec\xedficos\n\n\u2705 ON Monday (d\xedas espec\xedficos)\n\u2705 AT 3 PM (horas exactas)\n\u274c IN Monday, ON 3 PM\n\n\ud83d\udca1 RECUERDA:\n\ud83d\udcc5 ON: d\xedas, fechas (Monday, January 1st)\n\ud83d\udd50 AT: horas exactas (3 PM, midnight)\n\ud83d\udcc6 IN: meses, a\xf1os, estaciones (July, 2024, summer)",xpReward:10},{id:"prep_02",level:"A2",topic:"prepositions",question:"She's waiting _____ the bus stop _____ her friend.",instruction:"Preposiciones de lugar y compa\xf1\xeda",options:["at / with","in / for","on / to","by / from"],correctAnswer:0,explanation:"'At' para lugares espec\xedficos, 'with' para compa\xf1\xeda",xpReward:10},{id:"prep_03",level:"A2",topic:"prepositions",question:"I'm interested _____ learning more _____ this topic.",instruction:"Preposiciones con adjetivos",options:["in / about","on / of","at / for","with / to"],correctAnswer:0,explanation:"'Interested in' y 'about' para temas",xpReward:10},{id:"prep_04",level:"A2",topic:"prepositions",question:"The book is _____ the table, next _____ the lamp.",instruction:"Preposiciones de lugar",options:["in / of","on / to","at / with","under / by"],correctAnswer:1,explanation:"'On' para superficies, 'to' para proximidad",xpReward:10},{id:"adv_01",level:"A2",topic:"adverbs",question:"She speaks English _____.",instruction:"Adverbio de modo",options:["fluent","fluently","fluency","more fluent"],correctAnswer:1,explanation:"Para describir c\xf3mo hace algo usamos el adverbio: fluently",xpReward:10},{id:"adv_02",level:"A2",topic:"adverbs",question:"He _____ goes to the gym on weekends.",instruction:"Adverbio de frecuencia",options:["usual","usually","more usual","most usual"],correctAnswer:1,explanation:"Adverbio de frecuencia: usually (normalmente)",xpReward:10},{id:"adv_03",level:"A2",topic:"adverbs",question:"Drive _____ in the rain.",instruction:"Adverbio de modo",options:["careful","carefully","more careful","care"],correctAnswer:1,explanation:"Para describir c\xf3mo conducir: carefully (cuidadosamente)",xpReward:10},{id:"adv_04",level:"A2",topic:"adverbs",question:"I _____ understand this grammar rule.",instruction:"Adverbio de grado",options:["complete","completely","completion","completed"],correctAnswer:1,explanation:"Para intensificar 'understand': completely",xpReward:10},{id:"past_01",level:"A1",topic:"past simple",question:"Yesterday I _____ to the cinema with my friends.",instruction:"Pasado simple",options:["go","went","gone","going"],correctAnswer:1,explanation:"Pasado irregular de 'go' es 'went'",xpReward:10},{id:"past_02",level:"A1",topic:"past simple",question:"She _____ her homework last night.",instruction:"Pasado simple - verbo regular",options:["finish","finished","finishing","finishes"],correctAnswer:1,explanation:"Verbos regulares a\xf1aden -ed: finished",xpReward:10},{id:"past_03",level:"A1",topic:"past simple",question:"_____ you _____ the movie?",instruction:"Pregunta en pasado simple",options:["Do / like","Did / like","Did / liked","Were / like"],correctAnswer:1,explanation:"Preguntas en pasado: Did + infinitivo",xpReward:10},{id:"past_04",level:"A1",topic:"past simple",question:"They _____ not _____ the test yesterday.",instruction:"Negativo en pasado simple",options:["do / pass","did / passed","did / pass","were / pass"],correctAnswer:2,explanation:"Negativo en pasado: did not + infinitivo",xpReward:10},{id:"past_05",level:"A1",topic:"past simple",question:"We _____ pizza for dinner last Friday.",instruction:"Verbo irregular en pasado",options:["eat","ate","eaten","eating"],correctAnswer:1,explanation:"El pasado de 'eat' es 'ate'",xpReward:10},{id:"past_06",level:"A1",topic:"past simple",question:"My brother _____ a new car last month.",instruction:"Verbo irregular",options:["buy","buyed","bought","buying"],correctAnswer:2,explanation:"El pasado de 'buy' es 'bought'",xpReward:10},{id:"past_07",level:"A1",topic:"past simple",question:"_____ she _____ to the party?",instruction:"Pregunta en pasado",options:["Does / come","Did / come","Did / came","Was / come"],correctAnswer:1,explanation:"Preguntas en pasado: Did + infinitivo sin 'to'",xpReward:10},{id:"past_08",level:"A1",topic:"past simple",question:"The children _____ in the park yesterday.",instruction:"Verbo irregular",options:["play","played","run","ran"],correctAnswer:3,explanation:"El pasado de 'run' es 'ran'",xpReward:10},{id:"past_09",level:"A1",topic:"past simple",question:"I _____ my keys this morning.",instruction:"Verbo irregular",options:["lose","losed","lost","losing"],correctAnswer:2,explanation:"El pasado de 'lose' es 'lost'",xpReward:10},{id:"past_10",level:"A1",topic:"past simple",question:"_____ it _____ yesterday?",instruction:"Pregunta sobre el clima",options:["Did / rain","Did / rained","Was / rain","Does / rain"],correctAnswer:0,explanation:"Para preguntas en pasado simple: Did + infinitivo",xpReward:10},{id:"past_11",level:"A1",topic:"past simple",question:"She _____ a beautiful song at the concert.",instruction:"Verbo irregular",options:["sing","sang","sung","singing"],correctAnswer:1,explanation:"El pasado de 'sing' es 'sang'",xpReward:10},{id:"past_12",level:"A1",topic:"past simple",question:"We _____ our grandparents last weekend.",instruction:"Verbo irregular",options:["visit","visited","see","saw"],correctAnswer:3,explanation:"El pasado de 'see' es 'saw' (ver a alguien)",xpReward:10},{id:"ps_05",level:"A1",topic:"present simple",question:"My father _____ to work by car every day.",instruction:"Tercera persona singular",options:["go","goes","going","went"],correctAnswer:1,explanation:"Con tercera persona singular a\xf1adimos -es: goes",xpReward:10},{id:"ps_06",level:"A1",topic:"present simple",question:"_____ you _____ coffee or tea?",instruction:"Pregunta con 'prefer'",options:["Do / prefer","Does / prefer","Are / prefer","Do / prefers"],correctAnswer:0,explanation:"Con 'you' usamos 'Do' + infinitivo",xpReward:10},{id:"ps_07",level:"A1",topic:"present simple",question:"Children _____ milk for strong bones.",instruction:"Verbo 'need'",options:["needs","need","needing","needed"],correctAnswer:1,explanation:"Con plural no a\xf1adimos -s: need",xpReward:10},{id:"ps_08",level:"A1",topic:"present simple",question:"She _____ her teeth twice a day.",instruction:"Rutina diaria",options:["brush","brushs","brushes","brushing"],correctAnswer:2,explanation:"Verbos terminados en -sh a\xf1aden -es: brushes",xpReward:10},{id:"ps_09",level:"A1",topic:"present simple",question:"_____ your sister _____ in this city?",instruction:"Pregunta con 'live'",options:["Do / live","Does / live","Does / lives","Is / live"],correctAnswer:1,explanation:"Con tercera persona: Does + infinitivo",xpReward:10},{id:"ps_10",level:"A1",topic:"present simple",question:"We _____ TV in the evening.",instruction:"Verbo 'watch'",options:["watch","watches","watching","watched"],correctAnswer:0,explanation:"Con 'we' usamos la forma base: watch",xpReward:10},{id:"ps_11",level:"A1",topic:"present simple",question:"The sun _____ in the east.",instruction:"Hecho general",options:["rise","rises","rising","rose"],correctAnswer:1,explanation:"Hechos generales con tercera persona: rises",xpReward:10},{id:"ps_12",level:"A1",topic:"present simple",question:"I _____ like spicy food.",instruction:"Negativo con 'I'",options:["don't","doesn't","am not","not"],correctAnswer:0,explanation:"Con 'I' usamos 'don't' para negar",xpReward:10},{id:"pp_05",level:"A2",topic:"present perfect",question:"They _____ _____ three movies this week.",instruction:"Tiempo completado recientemente",options:["have / see","have / seen","has / seen","had / seen"],correctAnswer:1,explanation:"Con 'they': have + participio pasado (seen)",xpReward:10},{id:"pp_06",level:"A2",topic:"present perfect",question:"_____ you _____ your homework yet?",instruction:"Pregunta con 'yet'",options:["Did / finish","Have / finished","Do / finish","Are / finishing"],correctAnswer:1,explanation:"Con 'yet' usamos Present Perfect: Have you finished",xpReward:10},{id:"pp_07",level:"A2",topic:"present perfect",question:"He _____ _____ his job for five years.",instruction:"Duraci\xf3n hasta ahora",options:["has / have","has / had","have / had","is / having"],correctAnswer:1,explanation:"Para duraci\xf3n hasta el presente: has had",xpReward:10},{id:"pp_08",level:"A2",topic:"present perfect",question:"We _____ not _____ from him lately.",instruction:"Negativo en Present Perfect",options:["have / hear","have / heard","has / heard","did / hear"],correctAnswer:1,explanation:"Negativo: have not + participio pasado (heard)",xpReward:10},{id:"pp_09",level:"A2",topic:"present perfect",question:"She _____ already _____ dinner.",instruction:"Con 'already'",options:["has / eat","has / eaten","have / eaten","is / eating"],correctAnswer:1,explanation:"Con 'already' y tercera persona: has eaten",xpReward:10},{id:"pp_10",level:"A2",topic:"present perfect",question:"_____ they ever _____ to Europe?",instruction:"Experiencia de vida",options:["Did / travel","Have / traveled","Do / travel","Are / traveling"],correctAnswer:1,explanation:"Para experiencias: Have they ever traveled",xpReward:10},{id:"prep_05",level:"A2",topic:"prepositions",question:"The conference is _____ July _____ the convention center.",instruction:"Mes y lugar",options:["in / at","on / in","at / on","in / on"],correctAnswer:0,explanation:"'In' para meses, 'at' para lugares espec\xedficos",xpReward:10},{id:"prep_06",level:"A2",topic:"prepositions",question:"She arrived _____ the airport _____ time.",instruction:"Lugar y tiempo",options:["at / on","in / in","to / at","at / in"],correctAnswer:0,explanation:"'At' para lugares espec\xedficos, 'on time' = puntual",xpReward:10},{id:"prep_07",level:"A2",topic:"prepositions",question:"We're going _____ vacation _____ December.",instruction:"Actividad y mes",options:["on / in","in / on","to / at","for / in"],correctAnswer:0,explanation:"'On vacation' (de vacaciones), 'in' para meses",xpReward:10},{id:"prep_08",level:"A2",topic:"prepositions",question:"The cat is hiding _____ the bed.",instruction:"Posici\xf3n",options:["under","above","between","through"],correctAnswer:0,explanation:"'Under' significa debajo de algo",xpReward:10},{id:"prep_09",level:"A2",topic:"prepositions",question:"I'm thinking _____ changing my job.",instruction:"Preposici\xf3n con 'thinking'",options:["of","about","in","for"],correctAnswer:1,explanation:"'Thinking about' = considerar algo",xpReward:10},{id:"prep_10",level:"A2",topic:"prepositions",question:"The meeting starts _____ 9 AM _____ Monday.",instruction:"Hora y d\xeda",options:["at / on","in / in","on / at","at / in"],correctAnswer:0,explanation:"'At' para horas exactas, 'on' para d\xedas",xpReward:10},{id:"adv_05",level:"A2",topic:"adverbs",question:"She _____ arrives late to work.",instruction:"Adverbio de frecuencia",options:["never","always","sometimes","often"],correctAnswer:0,explanation:"'Never' significa nunca llega tarde",xpReward:10},{id:"adv_06",level:"A2",topic:"adverbs",question:"He solved the problem _____.",instruction:"Adverbio de modo",options:["quick","quickly","quickness","more quick"],correctAnswer:1,explanation:"Para describir c\xf3mo hizo algo: quickly",xpReward:10},{id:"adv_07",level:"A2",topic:"adverbs",question:"We _____ go to the beach in summer.",instruction:"Frecuencia",options:["frequent","frequently","more frequent","most frequent"],correctAnswer:1,explanation:"Adverbio de frecuencia: frequently",xpReward:10},{id:"adv_08",level:"A2",topic:"adverbs",question:"She speaks _____ than her brother.",instruction:"Comparativo de adverbios",options:["softly","softer","more softly","most softly"],correctAnswer:2,explanation:"Comparativo de adverbios largos: more softly",xpReward:10},{id:"adv_09",level:"A2",topic:"adverbs",question:"The train arrived _____ on time.",instruction:"Adverbio de grado",options:["exact","exactly","more exact","most exact"],correctAnswer:1,explanation:"Para intensificar 'on time': exactly",xpReward:10},{id:"adv_10",level:"A2",topic:"adverbs",question:"They worked _____ to finish the project.",instruction:"Adverbio de modo",options:["hard","hardly","harder","hardest"],correctAnswer:0,explanation:"'Hard' como adverbio significa con esfuerzo",xpReward:10}];function Wm(e){const t=e.options.map(e=>e.replace(/^[A-D]\)\s*/,"").trim()),n=t[e.correctAnswer],r=[...t].sort(()=>Math.random()-.5),i=r.findIndex(e=>e===n);return c(c({},e),{},{options:r,correctAnswer:i})}class Km{static async generateSmartExercise(e){if(console.log("\ud83e\udd16 FORZANDO GENERACI\xd3N DE IA - NO M\xc1S EST\xc1TICOS"),!e.apiKey)throw new Error("\ud83d\udea8 API KEY REQUERIDA - No se permiten ejercicios est\xe1ticos");let t=0;for(;t<10;){t++,console.log("\ud83d\udd04 INTENTO ".concat(t,"/").concat(10," - FORZANDO IA"));try{const t=await this.generateAIExercise(e);if(t)return console.log("\u2705 EJERCICIO GENERADO POR IA - \xc9XITO!"),t}catch(n){console.warn("\u26a0\ufe0f IA fall\xf3 intento ".concat(t,":"),n)}await new Promise(e=>setTimeout(e,1e3))}throw new Error("\ud83d\udea8 IA COMPLETAMENTE FALLIDA despu\xe9s de 10 intentos")}static async generateAIExercise(e){try{const t=new Hm(e.apiKey),n=await Xp.getUserProfile(e.userId),r=this.selectIntelligentTopic(e,n),i={level:e.userLevel,topic:r,exerciseNumber:e.sessionNumber,userWeaknesses:e.weakTopics||[],userStrengths:e.strengths||[],previousErrors:e.previousErrors||[],completedLessons:(null===n||void 0===n?void 0:n.learningMetrics.totalExercises)||0,currentAccuracy:(null===n||void 0===n?void 0:n.learningMetrics.overallAccuracy)||0,preferredDifficulty:e.preferredDifficulty||"medium",focusAreas:this.identifyFocusAreas(e,n)};console.log("\ud83c\udfaf CONTEXTO IA:",i);const s=await t.generateMultipleChoiceExercise(i);return Wm({id:"ai_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),question:s.question,instruction:s.instruction||"Selecciona la respuesta correcta",options:s.options,correctAnswer:s.correctAnswer,explanation:this.enhanceExplanation(s.explanation,e.userLevel),xpReward:this.calculateXPReward(e.userLevel,"medium"),topic:r,level:e.userLevel,source:"ai",difficulty:e.preferredDifficulty||"medium",learningFocus:i.focusAreas})}catch(t){return console.error("\u274c Error generando ejercicio IA:",t),null}}static async generateCuratedExercise(e){const t=await Xp.getUserProfile(e.userId),n=this.selectIntelligentTopic(e,t),r=JSON.parse(localStorage.getItem("used_exercises_".concat(e.userLevel))||"[]"),i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;console.log("\ud83c\udfaf BUSCANDO EJERCICIOS \xdaNICOS:"),console.log("\ud83d\udcca Nivel:",e,"| Tema:",t),console.log("\ud83d\udeab Ya usados:",n.length,"ejercicios");let i=Gm.filter(r=>r.level===e&&r.topic===t&&!n.includes(r.id));if(console.log("\ud83d\udcdd Ejercicios disponibles para",t+":",i.length),i.length<r){console.log("\u26a0\ufe0f No suficientes ejercicios del tema, expandiendo a nivel",e);const r=Gm.filter(t=>t.level===e&&!n.includes(t.id)).filter(e=>e.topic!==t);i=[...i,...r],console.log("\ud83d\udcc8 Total disponibles en nivel:",i.length)}i.length<r&&(console.log("\ud83d\udd04 Reiniciando pool - permitiendo ejercicios m\xe1s antiguos"),i=Gm.filter(t=>t.level===e));const s=[...i].sort(()=>Math.random()-.5).slice(0,r);return console.log("\u2705 EJERCICIOS SELECCIONADOS:",s.map(e=>e.id)),s}(e.userLevel,n,r,1);if(0===i.length)throw new Error("\ud83d\udea8 No hay ejercicios disponibles y no se permiten ejercicios est\xe1ticos");const s=i[0],o=Wm({id:s.id,question:s.question,instruction:s.instruction,options:s.options,correctAnswer:s.correctAnswer,explanation:this.enhanceExplanation(s.explanation,e.userLevel),xpReward:s.xpReward,topic:s.topic,level:s.level,source:"curated",difficulty:this.determineDifficulty(s,e.userLevel),learningFocus:[s.topic]});return console.log("\ud83d\udcda EJERCICIO CURADO SELECCIONADO:",o.id),o}static selectIntelligentTopic(e,t){if(e.weakTopics&&e.weakTopics.length>0)return e.weakTopics[Math.floor(Math.random()*e.weakTopics.length)];if(null!==t&&void 0!==t&&t.topicMastery){const e=Object.entries(t.topicMastery).filter(e=>{let[t,n]=e;return"weak"===n.masteryLevel||n.accuracy<.6}).map(e=>{let[t,n]=e;return t});if(e.length>0)return e[Math.floor(Math.random()*e.length)]}const n={A1:["present simple","past simple","basic vocabulary"],A2:["present perfect","prepositions","adverbs"],B1:["conditionals","passive voice","modal verbs"],B2:["subjunctive","advanced grammar","idioms"]},r=n[e.userLevel]||n.A2;return r[Math.floor(Math.random()*r.length)]}static identifyFocusAreas(e,t){const n=[];if(e.weakTopics&&n.push(...e.weakTopics),null!==t&&void 0!==t&&t.commonMistakes){const e=Object.keys(t.commonMistakes).sort((e,n)=>t.commonMistakes[n].frequency-t.commonMistakes[e].frequency).slice(0,2);n.push(...e)}const r={A1:["basic grammar","simple tenses","vocabulary"],A2:["intermediate grammar","prepositions","perfect tenses"],B1:["complex structures","conditionals","passive voice"],B2:["advanced grammar","nuanced meanings","idiomatic expressions"]};return n.push(...r[e.userLevel]||r.A2),Array.from(new Set(n))}static enhanceExplanation(e,t){if(e.includes("\ud83c\udfaf")||e.includes("\u2705"))return e;const n={A1:{prefix:"\ud83d\udc76 NIVEL B\xc1SICO - ",suffix:"\n\n\ud83d\udca1 CONSEJO: Practica esta estructura varias veces para memorizarla."},A2:{prefix:"\ud83d\udcda NIVEL ELEMENTAL - ",suffix:"\n\n\ud83c\udfaf RECUERDA: Este tipo de ejercicio es com\xfan en ex\xe1menes b\xe1sicos."},B1:{prefix:"\ud83c\udf93 NIVEL INTERMEDIO - ",suffix:"\n\n\u26a1 AVANZADO: Intenta crear tus propias oraciones con esta estructura."},B2:{prefix:"\ud83c\udfc6 NIVEL AVANZADO - ",suffix:"\n\n\ud83c\udf1f EXPERTO: Esta estructura es clave para la fluidez natural."}},r=n[t]||n.A2;return"".concat(r.prefix).concat(e).concat(r.suffix)}static calculateXPReward(e,t){const n={A1:8,A2:10,B1:12,B2:15}[e]||10,r={easy:.8,medium:1,hard:1.3}[t]||1;return Math.round(n*r)}static determineDifficulty(e,t){return e.level===t?"medium":e.level<t?"easy":"hard"}}class Qm{static getUsedExercises(e){try{const t="used_exercises_".concat(e),n=localStorage.getItem(t);return n?JSON.parse(n):[]}catch(t){return console.error("Error obteniendo ejercicios usados:",t),[]}}static markExerciseAsUsed(e,t){try{const n=this.getUsedExercises(e);if(!n.includes(t)){n.push(t);const r="used_exercises_".concat(e);localStorage.setItem(r,JSON.stringify(n)),console.log("\u2705 EJERCICIO MARCADO COMO USADO: ".concat(t," (Total: ").concat(n.length,")"))}}catch(n){console.error("Error marcando ejercicio:",n)}}static isExerciseUsed(e,t){return this.getUsedExercises(e).includes(t)}static cleanupIfNeeded(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;const n=this.getUsedExercises(e);if(n.length>t){const r=n.slice(-t),i="used_exercises_".concat(e);localStorage.setItem(i,JSON.stringify(r)),console.log("\ud83e\uddf9 LIMPIEZA: Manteniendo ".concat(r.length," ejercicios m\xe1s recientes"))}}static getUsageStats(e){const t=this.getUsedExercises(e);return{totalUsed:t.length,recentlyUsed:t.slice(-10),canReset:t.length>30}}static resetUsedExercises(e){const t="used_exercises_".concat(e);localStorage.removeItem(t),console.log("\ud83d\udd04 RESET COMPLETO: Ejercicios usados para nivel ".concat(e))}static debugUsedExercises(e){const t=this.getUsedExercises(e);console.log("\ud83d\udd0d DEBUG EJERCICIOS USADOS (".concat(e,"):"),t)}}class Ym{static calculateLevelProgress(e){const t=this.LEVEL_REQUIREMENTS[e.currentLevel];if(!t)return{canLevelUp:!1,progressPercentage:100,missingRequirements:[],nextLevel:e.currentLevel,motivationalMessage:"\xa1Has alcanzado el nivel m\xe1ximo actual!"};const n=[];let r=[];const i=Math.max(e.accuracy,...e.recentSessions,0),s=Math.min(i/t.accuracy,1);if(r.push(s),i<t.accuracy){const e=Math.round(100*(t.accuracy-i));n.push("Mejorar precisi\xf3n en ".concat(e,"%"))}const o=Math.min(e.totalExercises/t.totalExercises,1);if(r.push(o),e.totalExercises<t.totalExercises){const r=t.totalExercises-e.totalExercises;n.push("Completar ".concat(r," ejercicios m\xe1s"))}const a=Math.min(e.xp/t.minXP,1);if(r.push(a),e.xp<t.minXP){const r=t.minXP-e.xp;n.push("Ganar ".concat(r," XP m\xe1s"))}const l=e.recentSessions.filter(e=>e>=.6),c=Math.min(l.length/t.consistentSessions,1);if(r.push(c),l.length<t.consistentSessions){const e=t.consistentSessions-l.length;n.push("".concat(e," sesiones m\xe1s con 60%+ precisi\xf3n"))}const u=r.reduce((e,t)=>e+t,0)/r.length,d="level_progress_".concat(e.currentLevel),h=parseFloat(localStorage.getItem(d)||"0"),f=Math.max(u,h);f>h&&localStorage.setItem(d,f.toString());const p=Math.round(100*f),m=0===n.length,g=this.getNextLevel(e.currentLevel);let v="";return v=m?"\ud83c\udf89 \xa1LISTO PARA SUBIR A ".concat(g,"! Complete una sesi\xf3n m\xe1s para subir oficialmente."):p>80?"\ud83d\udd25 \xa1MUY CERCA! Solo te falta: ".concat(n[0]):p>60?"\ud83d\udcaa \xa1Excelente progreso! Sigue as\xed. Te falta: ".concat(n.slice(0,2).join(", ")):p>=100*h?"\ud83c\udf1f \xa1Progreso positivo! Enf\xf3cate en: ".concat(n[0]):"\ud83d\udcaa \xa1Tu progreso se mantiene! Una sesi\xf3n mala no borra tu avance anterior.",{canLevelUp:m,progressPercentage:p,missingRequirements:n,nextLevel:g,motivationalMessage:v}}static getNextLevel(e){const t=["A1","A2","B1","B2","C1"],n=t.indexOf(e);return t[n+1]||e}static createLevelUpCelebration(e){return{A2:{title:"\ud83c\udf89 \xa1FELICIDADES! Ahora eres nivel A2",message:"Ya no eres principiante absoluto. Puedes mantener conversaciones b\xe1sicas en ingl\xe9s.",rewards:["\u2705 Ejercicios A2 desbloqueados","\ud83c\udfaf Nuevos temas: Present Perfect, Preposiciones","\u2b50 +50 XP Bonus por subir de nivel","\ud83c\udfc6 Insignia 'Elementary English'"],nextGoals:["Aprender Present Perfect","Dominar preposiciones b\xe1sicas","Alcanzar 70% precisi\xf3n","Completar 10 sesiones A2"],color:"from-blue-400 to-purple-600",emoji:"\ud83c\udf1f"},B1:{title:"\ud83c\udfc6 \xa1INCRE\xcdBLE! Ahora eres nivel B1",message:"\xa1Nivel intermedio! Ya puedes ver pel\xedculas en ingl\xe9s con subt\xedtulos.",rewards:["\u2705 Ejercicios B1 desbloqueados","\ud83c\udfaf Temas avanzados: Condicionales, Voz Pasiva","\u2b50 +100 XP Bonus","\ud83c\udfc6 Insignia 'Intermediate Speaker'"],nextGoals:["Dominar condicionales","Aprender voz pasiva","75% precisi\xf3n consistente","Ver contenido en ingl\xe9s"],color:"from-emerald-400 to-teal-600",emoji:"\ud83d\ude80"}}[e]||{title:"\ud83c\udf1f \xa1Nivel ".concat(e," Alcanzado!"),message:"\xa1Excelente progreso en tu aprendizaje de ingl\xe9s!",rewards:["\u2b50 Bonus XP","\ud83c\udfaf Nuevos desaf\xedos"],nextGoals:["Continuar mejorando"],color:"from-purple-400 to-pink-600",emoji:"\ud83c\udf8a"}}static resetProgressForLevel(e){const t="level_progress_".concat(e);localStorage.removeItem(t),console.log("\ud83d\udd04 Progreso reseteado para nivel ".concat(e))}static ensureMinimumProgress(e,t){const n="level_progress_".concat(e);parseFloat(localStorage.getItem(n)||"0")<t&&(localStorage.setItem(n,t.toString()),console.log("\u2705 Progreso ajustado a m\xednimo ".concat(100*t,"% para ").concat(e)))}}Ym.LEVEL_REQUIREMENTS={A1:{accuracy:.65,totalExercises:40,consistentSessions:3,minXP:300},A2:{accuracy:.7,totalExercises:80,consistentSessions:4,minXP:700},B1:{accuracy:.75,totalExercises:120,consistentSessions:5,minXP:1200}};const Jm={A1:[{id:"a1_vocab_001",level:"A1",type:"vocabulary",difficulty:"beginner",question:"What does 'hello' mean?",instruction:"Selecciona el significado en espa\xf1ol",options:["hola","adi\xf3s","gracias","perd\xf3n"],correctAnswer:0,explanation:"\ud83c\udfaf 'Hello' es la forma m\xe1s com\xfan de saludar en ingl\xe9s. Es como decir 'hola' en espa\xf1ol.",topic:"greetings",skills:["basic_vocabulary"]},{id:"a1_vocab_002",level:"A1",type:"vocabulary",difficulty:"beginner",question:"What does 'water' mean?",instruction:"Selecciona el significado",options:["agua","fuego","tierra","aire"],correctAnswer:0,explanation:"\ud83c\udfaf 'Water' significa 'agua'. Es una palabra b\xe1sica muy importante.",topic:"basic_nouns",skills:["basic_vocabulary"]},{id:"a1_vocab_003",level:"A1",type:"vocabulary",difficulty:"beginner",question:"What does 'cat' mean?",instruction:"Selecciona la traducci\xf3n",options:["gato","perro","p\xe1jaro","pez"],correctAnswer:0,explanation:"\ud83c\udfaf 'Cat' significa 'gato'. Es una de las primeras palabras que aprendemos sobre animales.",topic:"animals",skills:["basic_vocabulary"]},{id:"a1_vocab_004",level:"A1",type:"vocabulary",difficulty:"beginner",question:"What does 'book' mean?",instruction:"Selecciona el significado",options:["libro","mesa","silla","ventana"],correctAnswer:0,explanation:"\ud83c\udfaf 'Book' significa 'libro'. Objeto fundamental para aprender.",topic:"objects",skills:["basic_vocabulary"]},{id:"a1_vocab_005",level:"A1",type:"vocabulary",difficulty:"beginner",question:"What does 'red' mean?",instruction:"Selecciona el color",options:["rojo","azul","verde","amarillo"],correctAnswer:0,explanation:"\ud83c\udfaf 'Red' significa 'rojo'. Los colores son vocabulario b\xe1sico esencial.",topic:"colors",skills:["basic_vocabulary"]},{id:"a1_gram_001",level:"A1",type:"grammar",difficulty:"beginner",question:"I _____ a student.",instruction:"Completa con verbo TO BE",options:["am","is","are","be"],correctAnswer:0,explanation:"\ud83c\udfaf Con 'I' (yo) usamos 'am'. Es la forma m\xe1s b\xe1sica del verbo ser/estar: I am = yo soy/estoy.",topic:"verb_to_be",skills:["verb_to_be"]},{id:"a1_gram_002",level:"A1",type:"grammar",difficulty:"beginner",question:"She _____ my friend.",instruction:"Completa con TO BE",options:["am","is","are","be"],correctAnswer:1,explanation:"\ud83c\udfaf Con 'She' (ella) usamos 'is'. Recuerda: I am, You are, He/She/It is.",topic:"verb_to_be",skills:["verb_to_be"]},{id:"a1_gram_003",level:"A1",type:"grammar",difficulty:"beginner",question:"We _____ happy.",instruction:"Completa con TO BE",options:["am","is","are","be"],correctAnswer:2,explanation:"\ud83c\udfaf Con 'We' (nosotros) usamos 'are'. Plural siempre usa 'are'.",topic:"verb_to_be",skills:["verb_to_be"]},{id:"a1_gram_004",level:"A1",type:"grammar",difficulty:"beginner",question:"This _____ a dog.",instruction:"Completa con TO BE",options:["am","is","are","be"],correctAnswer:1,explanation:"\ud83c\udfaf 'This' (esto/este) es singular, por lo tanto usamos 'is'.",topic:"verb_to_be",skills:["verb_to_be"]},{id:"a1_trans_001",level:"A1",type:"translation",difficulty:"beginner",question:"\xbfC\xf3mo se dice 'gracias' en ingl\xe9s?",instruction:"Selecciona la traducci\xf3n",options:["thank you","please","excuse me","sorry"],correctAnswer:0,explanation:"\ud83c\udfaf 'Thank you' significa 'gracias'. Es una expresi\xf3n de cortes\xeda b\xe1sica.",topic:"politeness",skills:["basic_vocabulary"]},{id:"a1_trans_002",level:"A1",type:"translation",difficulty:"beginner",question:"\xbfC\xf3mo se dice 'casa' en ingl\xe9s?",instruction:"Selecciona la traducci\xf3n",options:["house","car","tree","road"],correctAnswer:0,explanation:"\ud83c\udfaf 'House' significa 'casa'. Lugar donde vivimos.",topic:"places",skills:["basic_vocabulary"]},{id:"a1_num_001",level:"A1",type:"vocabulary",difficulty:"beginner",question:"What number is 'three'?",instruction:"Selecciona el n\xfamero",options:["3","13","30","33"],correctAnswer:0,explanation:"\ud83c\udfaf 'Three' es el n\xfamero 3. Los n\xfameros b\xe1sicos son fundamentales.",topic:"numbers",skills:["basic_vocabulary"]},{id:"a1_num_002",level:"A1",type:"vocabulary",difficulty:"beginner",question:"What number is 'ten'?",instruction:"Selecciona el n\xfamero",options:["10","1","100","2"],correctAnswer:0,explanation:"\ud83c\udfaf 'Ten' es el n\xfamero 10. Base del sistema decimal.",topic:"numbers",skills:["basic_vocabulary"]}],A2:[{id:"a2_gram_001",level:"A2",type:"grammar",difficulty:"elementary",question:"I _____ _____ English for two years.",instruction:"Completa con Present Perfect",options:["have studied","has studied","am studying","studied"],correctAnswer:0,explanation:"\ud83c\udfaf Present Perfect con 'for + tiempo': have studied. Indica experiencia que contin\xfaa hasta ahora.",topic:"present_perfect",skills:["present_perfect"]},{id:"a2_gram_002",level:"A2",type:"grammar",difficulty:"elementary",question:"She _____ _____ to Paris three times.",instruction:"Completa con Present Perfect",options:["have been","has been","is being","was"],correctAnswer:1,explanation:"\ud83c\udfaf Con 'She' usamos 'has been'. Present Perfect para experiencias de vida.",topic:"present_perfect",skills:["present_perfect"]},{id:"a2_gram_003",level:"A2",type:"grammar",difficulty:"elementary",question:"We _____ _____ our homework yet.",instruction:"Present Perfect con 'yet'",options:["haven't finished","hasn't finished","don't finish","didn't finish"],correctAnswer:0,explanation:"\ud83c\udfaf 'Yet' se usa con Present Perfect negativo. Haven't finished = no hemos terminado a\xfan.",topic:"present_perfect",skills:["present_perfect"]},{id:"a2_vocab_001",level:"A2",type:"vocabulary",difficulty:"elementary",question:"What does 'excited' mean?",instruction:"Selecciona el significado",options:["emocionado","triste","enojado","cansado"],correctAnswer:0,explanation:"\ud83c\udfaf 'Excited' significa 'emocionado'. Se usa para expresar entusiasmo por algo.",topic:"emotions",skills:["intermediate_vocabulary"]},{id:"a2_vocab_002",level:"A2",type:"vocabulary",difficulty:"elementary",question:"What does 'disappointed' mean?",instruction:"Selecciona la emoci\xf3n",options:["decepcionado","feliz","sorprendido","confundido"],correctAnswer:0,explanation:"\ud83c\udfaf 'Disappointed' significa 'decepcionado'. Cuando algo no cumple nuestras expectativas.",topic:"emotions",skills:["intermediate_vocabulary"]},{id:"a2_vocab_003",level:"A2",type:"vocabulary",difficulty:"elementary",question:"What does 'exhausted' mean?",instruction:"Selecciona el significado",options:["agotado","energ\xe9tico","relajado","nervioso"],correctAnswer:0,explanation:"\ud83c\udfaf 'Exhausted' significa 'agotado'. M\xe1s fuerte que 'tired' (cansado).",topic:"emotions",skills:["intermediate_vocabulary"]},{id:"a2_gram_004",level:"A2",type:"grammar",difficulty:"elementary",question:"The meeting is _____ Monday _____ 3 PM.",instruction:"Preposiciones de tiempo",options:["on / at","in / on","at / in","in / at"],correctAnswer:0,explanation:"\ud83c\udfaf 'On' para d\xedas espec\xedficos, 'at' para horas exactas. On Monday at 3 PM es correcto.",topic:"prepositions",skills:["prepositions"]},{id:"a2_gram_005",level:"A2",type:"grammar",difficulty:"elementary",question:"I was born _____ 1995 _____ December.",instruction:"Preposiciones de tiempo",options:["in / in","on / in","at / on","in / on"],correctAnswer:0,explanation:"\ud83c\udfaf 'In' para a\xf1os y meses. In 1995 in December es correcto.",topic:"prepositions",skills:["prepositions"]},{id:"a2_gram_006",level:"A2",type:"grammar",difficulty:"elementary",question:"The book is _____ the table.",instruction:"Preposici\xf3n de lugar",options:["on","in","at","by"],correctAnswer:0,explanation:"\ud83c\udfaf 'On' para superficies. El libro est\xe1 sobre la mesa.",topic:"prepositions",skills:["prepositions"]},{id:"a2_gram_007",level:"A2",type:"grammar",difficulty:"elementary",question:"Yesterday I _____ to the movies.",instruction:"Pasado simple",options:["went","go","have gone","going"],correctAnswer:0,explanation:"\ud83c\udfaf 'Went' es el pasado de 'go'. Para acciones terminadas en el pasado.",topic:"past_simple",skills:["past_simple"]},{id:"a2_gram_008",level:"A2",type:"grammar",difficulty:"elementary",question:"She _____ her keys last night.",instruction:"Pasado simple",options:["lost","lose","has lost","losing"],correctAnswer:0,explanation:"\ud83c\udfaf 'Lost' es el pasado de 'lose'. Acci\xf3n espec\xedfica en el pasado.",topic:"past_simple",skills:["past_simple"]},{id:"a2_conv_001",level:"A2",type:"vocabulary",difficulty:"elementary",question:"How do you respond to 'How are you?'",instruction:"Respuesta apropiada",options:["I'm fine, thank you","Yes, please","You're welcome","Excuse me"],correctAnswer:0,explanation:"\ud83c\udfaf 'I'm fine, thank you' es la respuesta est\xe1ndar a '\xbfC\xf3mo est\xe1s?'",topic:"basic_conversation",skills:["basic_conversation"]},{id:"a2_conv_002",level:"A2",type:"vocabulary",difficulty:"elementary",question:"What do you say when you meet someone for the first time?",instruction:"Saludo formal",options:["Nice to meet you","See you later","Take care","What's up"],correctAnswer:0,explanation:"\ud83c\udfaf 'Nice to meet you' es el saludo est\xe1ndar cuando conoces a alguien.",topic:"basic_conversation",skills:["basic_conversation"]}],B1:[{id:"b1_gram_001",level:"B1",type:"grammar",difficulty:"intermediate",question:"If I _____ time, I _____ help you.",instruction:"Completa el condicional",options:["have / will","had / would","have / would","will have / will"],correctAnswer:0,explanation:"\ud83c\udfaf First Conditional: If + present, will + infinitive. Para situaciones reales futuras.",topic:"conditionals",skills:["conditionals"]},{id:"b1_gram_002",level:"B1",type:"grammar",difficulty:"intermediate",question:"If I _____ rich, I _____ travel around the world.",instruction:"Second conditional",options:["was / would","were / would","am / will","were / will"],correctAnswer:1,explanation:"\ud83c\udfaf Second Conditional: If + past, would + infinitive. 'Were' se usa con todos los sujetos en condicionales.",topic:"conditionals",skills:["conditionals"]},{id:"b1_gram_003",level:"B1",type:"grammar",difficulty:"intermediate",question:"If she _____ harder, she _____ the exam.",instruction:"Third conditional",options:["had studied / would have passed","studied / would pass","studies / will pass","has studied / would pass"],correctAnswer:0,explanation:"\ud83c\udfaf Third Conditional: If + past perfect, would have + past participle. Para situaciones hipot\xe9ticas del pasado.",topic:"conditionals",skills:["conditionals"]},{id:"b1_gram_004",level:"B1",type:"grammar",difficulty:"intermediate",question:"The house _____ _____ by my grandfather in 1950.",instruction:"Completa con voz pasiva",options:["was built","is built","has built","will build"],correctAnswer:0,explanation:"\ud83c\udfaf Voz pasiva en pasado: was/were + participio. 'Was built' = fue construida.",topic:"passive_voice",skills:["passive_voice"]},{id:"b1_gram_005",level:"B1",type:"grammar",difficulty:"intermediate",question:"English _____ _____ all over the world.",instruction:"Voz pasiva presente",options:["is spoken","speaks","has spoken","was spoken"],correctAnswer:0,explanation:"\ud83c\udfaf Voz pasiva presente: is/are + participio. 'Is spoken' = se habla.",topic:"passive_voice",skills:["passive_voice"]},{id:"b1_gram_006",level:"B1",type:"grammar",difficulty:"intermediate",question:"The project _____ _____ _____ next month.",instruction:"Voz pasiva futuro",options:["will be completed","will complete","is completing","has completed"],correctAnswer:0,explanation:"\ud83c\udfaf Voz pasiva futuro: will be + participio. 'Will be completed' = ser\xe1 completado.",topic:"passive_voice",skills:["passive_voice"]},{id:"b1_vocab_001",level:"B1",type:"vocabulary",difficulty:"intermediate",question:"What does 'achieve' mean?",instruction:"Selecciona el significado m\xe1s preciso",options:["lograr","intentar","comenzar","terminar"],correctAnswer:0,explanation:"\ud83c\udfaf 'Achieve' significa 'lograr' o 'conseguir'. Implica completar un objetivo exitosamente.",topic:"advanced_vocabulary",skills:["advanced_vocabulary"]},{id:"b1_vocab_002",level:"B1",type:"vocabulary",difficulty:"intermediate",question:"What does 'appreciate' mean?",instruction:"Selecciona el significado",options:["apreciar/valorar","criticar","ignorar","rechazar"],correctAnswer:0,explanation:"\ud83c\udfaf 'Appreciate' significa 'apreciar' o 'valorar'. Reconocer el valor de algo.",topic:"advanced_vocabulary",skills:["advanced_vocabulary"]},{id:"b1_vocab_003",level:"B1",type:"vocabulary",difficulty:"intermediate",question:"What does 'significant' mean?",instruction:"Selecciona el significado",options:["significativo/importante","peque\xf1o","com\xfan","temporal"],correctAnswer:0,explanation:"\ud83c\udfaf 'Significant' significa 'significativo' o 'importante'. Algo que tiene gran impacto.",topic:"advanced_vocabulary",skills:["advanced_vocabulary"]},{id:"b1_gram_007",level:"B1",type:"grammar",difficulty:"intermediate",question:"I wish I _____ speak French fluently.",instruction:"Completa con 'wish'",options:["could","can","will","would"],correctAnswer:0,explanation:"\ud83c\udfaf 'I wish I could' expresa un deseo sobre una habilidad. Could = pudiera.",topic:"advanced_grammar",skills:["advanced_grammar"]},{id:"b1_gram_008",level:"B1",type:"grammar",difficulty:"intermediate",question:"He acts _____ he knows everything.",instruction:"Completa la comparaci\xf3n",options:["as if","like","such as","as well as"],correctAnswer:0,explanation:"\ud83c\udfaf 'As if' se usa para comparaciones hipot\xe9ticas. Como si supiera todo.",topic:"advanced_grammar",skills:["advanced_grammar"]},{id:"b1_conv_001",level:"B1",type:"comprehension",difficulty:"intermediate",question:"What's the best response to 'I'm having trouble with this project'?",instruction:"Respuesta emp\xe1tica",options:["Would you like me to help you with it?","That's your problem","I don't care","Good luck"],correctAnswer:0,explanation:"\ud83c\udfaf Ofrecer ayuda es la respuesta m\xe1s emp\xe1tica y apropiada socialmente.",topic:"fluent_conversation",skills:["fluent_conversation"]}],B2:[{id:"b2_gram_001",level:"B2",type:"grammar",difficulty:"advanced",question:"I suggest that he _____ the meeting.",instruction:"Completa con subjuntivo",options:["attends","attend","attended","attending"],correctAnswer:1,explanation:"\ud83c\udfaf Despu\xe9s de 'suggest that' usamos subjuntivo: verbo base sin 'to'. 'Attend' es correcto.",topic:"subjunctive",skills:["advanced_grammar"]},{id:"b2_gram_002",level:"B2",type:"grammar",difficulty:"advanced",question:"It's important that she _____ on time.",instruction:"Subjuntivo despu\xe9s de 'important that'",options:["is","be","was","being"],correctAnswer:1,explanation:"\ud83c\udfaf Despu\xe9s de expresiones de importancia usamos subjuntivo: 'be' sin conjugar.",topic:"subjunctive",skills:["advanced_grammar"]},{id:"b2_gram_003",level:"B2",type:"grammar",difficulty:"advanced",question:"I demand that the report _____ finished by Friday.",instruction:"Subjuntivo con 'demand'",options:["is","be","was","will be"],correctAnswer:1,explanation:"\ud83c\udfaf Despu\xe9s de 'demand that' usamos subjuntivo: 'be' en forma base.",topic:"subjunctive",skills:["advanced_grammar"]},{id:"b2_vocab_001",level:"B2",type:"vocabulary",difficulty:"advanced",question:"'Break the ice' means:",instruction:"Selecciona el significado idiom\xe1tico",options:["romper el hielo socialmente","romper hielo literalmente","enojarse mucho","hacer fr\xedo"],correctAnswer:0,explanation:"\ud83c\udfaf 'Break the ice' es una expresi\xf3n idiom\xe1tica que significa iniciar una conversaci\xf3n o romper la tensi\xf3n social.",topic:"idioms",skills:["native_patterns"]},{id:"b2_vocab_002",level:"B2",type:"vocabulary",difficulty:"advanced",question:"'Spill the beans' means:",instruction:"Expresi\xf3n idiom\xe1tica",options:["revelar un secreto","cocinar frijoles","hacer un desastre","perder dinero"],correctAnswer:0,explanation:"\ud83c\udfaf 'Spill the beans' significa revelar un secreto o informaci\xf3n confidencial.",topic:"idioms",skills:["native_patterns"]},{id:"b2_vocab_003",level:"B2",type:"vocabulary",difficulty:"advanced",question:"'Hit the nail on the head' means:",instruction:"Significado idiom\xe1tico",options:["dar en el clavo/acertar exactamente","construir algo","lastimarse","ser violento"],correctAnswer:0,explanation:"\ud83c\udfaf 'Hit the nail on the head' significa acertar exactamente o dar en el clavo.",topic:"idioms",skills:["native_patterns"]},{id:"b2_comp_001",level:"B2",type:"comprehension",difficulty:"advanced",question:"Based on the context 'The CEO's decision was unprecedented, given the company's conservative history,' what does 'unprecedented' likely mean?",instruction:"Deduce el significado por contexto",options:["sin precedente","predecible","conservador","hist\xf3rico"],correctAnswer:0,explanation:"\ud83c\udfaf 'Unprecedented' = sin precedente. El contexto indica algo nunca antes hecho en una empresa conservadora.",topic:"context_clues",skills:["nuanced_expressions"]},{id:"b2_comp_002",level:"B2",type:"comprehension",difficulty:"advanced",question:"In 'Her argument was quite compelling,' what does 'compelling' suggest?",instruction:"Significado por contexto",options:["convincente/persuasivo","confuso","aburrido","agresivo"],correctAnswer:0,explanation:"\ud83c\udfaf 'Compelling' significa convincente o persuasivo. Un argumento que te hace creer o actuar.",topic:"context_clues",skills:["nuanced_expressions"]},{id:"b2_comp_003",level:"B2",type:"comprehension",difficulty:"advanced",question:"What does 'meticulous' mean in 'She was meticulous in her research'?",instruction:"Vocabulario avanzado",options:["meticuloso/muy detallado","r\xe1pido","descuidado","creativo"],correctAnswer:0,explanation:"\ud83c\udfaf 'Meticulous' significa meticuloso, muy cuidadoso y detallado en el trabajo.",topic:"advanced_vocabulary",skills:["advanced_vocabulary"]},{id:"b2_nat_001",level:"B2",type:"vocabulary",difficulty:"advanced",question:"What does 'I'm swamped' mean?",instruction:"Expresi\xf3n coloquial",options:["estoy muy ocupado","estoy mojado","estoy perdido","estoy enfermo"],correctAnswer:0,explanation:"\ud83c\udfaf 'I'm swamped' es una expresi\xf3n coloquial que significa 'estoy muy ocupado' o 'tengo demasiado trabajo'.",topic:"native_expressions",skills:["native_patterns"]},{id:"b2_nat_002",level:"B2",type:"vocabulary",difficulty:"advanced",question:"What does 'piece of cake' mean?",instruction:"Expresi\xf3n idiom\xe1tica",options:["muy f\xe1cil","postre","algo roto","trabajo duro"],correctAnswer:0,explanation:"\ud83c\udfaf 'Piece of cake' significa algo muy f\xe1cil de hacer. Como decir 'pan comido' en espa\xf1ol.",topic:"native_expressions",skills:["native_patterns"]},{id:"b2_nat_003",level:"B2",type:"vocabulary",difficulty:"advanced",question:"What does 'under the weather' mean?",instruction:"Expresi\xf3n sobre salud",options:["sentirse enfermo","estar afuera","tener fr\xedo","estar triste"],correctAnswer:0,explanation:"\ud83c\udfaf 'Under the weather' significa sentirse un poco enfermo o indispuesto.",topic:"native_expressions",skills:["native_patterns"]},{id:"b2_nuance_001",level:"B2",type:"comprehension",difficulty:"advanced",question:"Which sounds more polite: 'I want coffee' or 'I'd like some coffee'?",instruction:"Matices de cortes\xeda",options:["I'd like some coffee","I want coffee","Both are equally polite","Neither is polite"],correctAnswer:0,explanation:"\ud83c\udfaf 'I'd like' es m\xe1s cort\xe9s que 'I want'. Los matices de cortes\xeda son importantes en ingl\xe9s.",topic:"politeness_levels",skills:["nuanced_expressions"]},{id:"b2_nuance_002",level:"B2",type:"comprehension",difficulty:"advanced",question:"What's the difference between 'slim' and 'skinny'?",instruction:"Matices de vocabulario",options:["slim es m\xe1s positivo que skinny","son exactamente iguales","skinny es m\xe1s positivo","no hay diferencia"],correctAnswer:0,explanation:"\ud83c\udfaf 'Slim' es m\xe1s positivo (delgado de manera atractiva) mientras que 'skinny' puede ser negativo (demasiado delgado).",topic:"word_connotations",skills:["nuanced_expressions"]}]};class Xm{static getUniqueExercisesForLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;const r=Jm[e]||[],i=r.filter(e=>!t.includes(e.id));if(i.length<n){console.log("\ud83d\udd04 RESETEAR EJERCICIOS PARA NIVEL ".concat(e," - Disponibles: ").concat(i.length));return[...r].sort(()=>Math.random()-.5).slice(0,n)}return i.sort(()=>Math.random()-.5).slice(0,n)}static markExercisesAsUsed(e,t){const n="used_level_exercises_".concat(e),r=JSON.parse(localStorage.getItem(n)||"[]").concat(t),i=Array.from(new Set(r)).slice(-50);localStorage.setItem(n,JSON.stringify(i)),console.log("\u2705 EJERCICIOS MARCADOS COMO USADOS (".concat(e,"): ").concat(t.length))}static getUsedExerciseIds(e){const t="used_level_exercises_".concat(e);return JSON.parse(localStorage.getItem(t)||"[]")}static resetUsedExercises(e){const t="used_level_exercises_".concat(e);localStorage.removeItem(t),console.log("\ud83e\uddf9 EJERCICIOS USADOS LIMPIADOS PARA NIVEL ".concat(e))}}const $m=e=>{let{apiKey:t,userProgress:n,onSessionComplete:i,onExit:s,userId:o}=e;const[a,l]=(0,r.useState)(1),[u]=(0,r.useState)(8),[d,h]=(0,r.useState)(null),[f,p]=(0,r.useState)(!1),[m]=(0,r.useState)("session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))),[g,v]=(0,r.useState)([]),[y,b]=(0,r.useState)(0),[w,_]=(0,r.useState)(0),[E,x]=(0,r.useState)(!1),[S,I]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{if(console.log("\ud83e\udde0 INICIANDO SESI\xd3N DE IA INTELIGENTE"),n.userId)try{const e=await Xp.analyzeUserWeaknesses(n.userId);v(e),console.log("\ud83d\udcc9 DEBILIDADES IDENTIFICADAS:",e)}catch(e){console.warn("\u26a0\ufe0f Error obteniendo debilidades:",e)}if(!t)return console.error("\ud83d\udea8 NO HAY API KEY - REDIRIGIR A CONFIGURACI\xd3N"),void alert("\u26a0\ufe0f Necesitas configurar tu API Key de Google AI para usar ejercicios con IA. Ve a Configuraci\xf3n.");console.log("\ud83d\udd11 API KEY DISPONIBLE - FORZANDO IA"),await A(1)})()},[n.level,n.userId]);const C=e=>({id:e.id,question:e.question,instruction:e.instruction,options:e.options,correctAnswer:e.correctAnswer,explanation:e.explanation,xpReward:"B2"===e.level?15:"B1"===e.level?12:10,topic:e.topic,level:e.level,source:"curated",difficulty:e.difficulty,learningFocus:e.skills}),A=async e=>{p(!0);try{console.log("\ud83c\udfaf GENERANDO EJERCICIO ".concat(e,"/8 PARA NIVEL ").concat(n.level));try{const e=await(async()=>{console.log("\ud83c\udfaf GENERANDO EJERCICIO PARA NIVEL ".concat(n.level));const e=Xm.getUsedExerciseIds(n.level),t=Xm.getUniqueExercisesForLevel(n.level,e,1);if(0===t.length){console.log("\u26a0\ufe0f NO HAY EJERCICIOS DISPONIBLES - RESETEANDO"),Xm.resetUsedExercises(n.level);const e=Xm.getUniqueExercisesForLevel(n.level,[],1);if(0===e.length)throw new Error("No hay ejercicios disponibles para este nivel");return C(e[0])}const r=t[0];return Xm.markExercisesAsUsed(n.level,[r.id]),console.log("\u2705 EJERCICIO SELECCIONADO:",{id:r.id,level:r.level,type:r.type,difficulty:r.difficulty,topic:r.topic}),C(r)})();if(e)return h(e),void I(e.topic)}catch(r){console.warn("\u26a0\ufe0f Error con ejercicios de nivel, intentando IA:",r)}if(t)try{const r=await Km.generateSmartExercise({userId:n.userId||"anonymous",userLevel:n.level,apiKey:t,sessionNumber:e,weakTopics:g,strengths:n.strengths||[],preferredDifficulty:"medium"});return h(r),void I(r.topic)}catch(r){console.warn("\u26a0\ufe0f IA fall\xf3, usando ejercicio de emergencia:",r)}const i=N(n.level);h(i),I(i.topic)}finally{p(!1)}};(0,r.useEffect)(()=>{a>1&&a<=u&&A(a)},[a]);const T=(0,r.useCallback)(async(e,t,r,i)=>{if(e&&b(e=>e+1),_(e=>e+t),d&&n.userId)try{await Xp.recordExerciseInteraction({exerciseId:d.id,userId:n.userId,topic:d.topic||S,level:n.level,isCorrect:e,responseTime:i||5,selectedAnswer:r||0,correctAnswer:d.correctAnswer,hintsUsed:0,confidence:e?"high":"low",sessionId:m,errorType:e?void 0:"".concat(d.topic,"_error")}),console.log("\ud83d\udcca INTERACCI\xd3N REGISTRADA EN FIREBASE")}catch(s){console.error("\u274c Error registrando interacci\xf3n:",s)}d&&Qm.markExerciseAsUsed(n.level,d.id),setTimeout(()=>{a>=u?k():l(e=>e+1)},200)},[a,u,d,n.level,n.userId,S,m]),k=(0,r.useCallback)(()=>{if(E)return;const e=y/u,t="recent_sessions_".concat(o||"anonymous"),r=[...JSON.parse(localStorage.getItem(t)||"[]"),e].slice(-10);localStorage.setItem(t,JSON.stringify(r));const s=Ym.calculateLevelProgress({currentLevel:n.level,accuracy:Math.max(n.accuracy,e),totalExercises:8*(n.completedLessons+1),xp:n.xp+w,recentSessions:r});console.log("\ud83d\udcca NIVEL PROGRESS:",s);const a=s.canLevelUp&&s.nextLevel!==n.level,l={exercisesCompleted:u,correctAnswers:y,totalAnswers:u,accuracy:e,xpEarned:w,levelUp:a,newLevel:a?s.nextLevel:n.level,levelProgress:s,sessionData:{topicsStudied:[S],averageResponseTime:5,difficulty:n.level,timestamp:(new Date).toISOString()}};x(!0);const d=c(c({},n),{},{accuracy:Math.max(n.accuracy,e),completedLessons:n.completedLessons+1,xp:n.xp+w,level:a?s.nextLevel:n.level,lastSession:{date:(new Date).toISOString(),accuracy:e,xpEarned:w,exercisesCompleted:u,topicsStudied:[S]},levelProgress:s});localStorage.setItem("user_progress",JSON.stringify(d)),setTimeout(()=>{i(l)},3e3)},[E,y,u,w,n,S,i]),N=e=>{const t=[{question:"What do you usually have for breakfast?",options:["Coffee and toast","Nothing","Cereal","Fruit"],correctAnswer:0,explanation:"\ud83c\udfaf Una pregunta com\xfan sobre h\xe1bitos alimenticios. 'Usually' indica rutina.",topic:"daily routines"},{question:"How often do you exercise?",options:["Every day","Never","Sometimes","Once a week"],correctAnswer:2,explanation:"\ud83c\udfaf 'How often' pregunta sobre frecuencia. 'Sometimes' es una respuesta com\xfan.",topic:"frequency"},{question:"Where do you work?",options:["In an office","At home","In a store","I don't work"],correctAnswer:1,explanation:"\ud83c\udfaf 'Where do you work?' pregunta sobre ubicaci\xf3n laboral.",topic:"work"},{question:"What's your favorite movie genre?",options:["Action","Comedy","Drama","Horror"],correctAnswer:1,explanation:"\ud83c\udfaf 'Favorite' significa favorito. Los g\xe9neros de pel\xedculas son vocabulario \xfatil.",topic:"entertainment"}],n=t[Math.floor(Math.random()*t.length)];return{id:"emergency_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),question:n.question,instruction:"Selecciona la respuesta m\xe1s apropiada",options:n.options,correctAnswer:n.correctAnswer,explanation:n.explanation,xpReward:8,topic:n.topic,level:e,source:"emergency",difficulty:"medium",learningFocus:[n.topic]}};if(E){const e=y/u*100;return(0,Bp.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center py-8",children:(0,Bp.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full mx-4 text-center",children:[(0,Bp.jsx)("div",{className:"text-6xl mb-6",children:e>=80?"\ud83c\udf89":e>=60?"\ud83d\udc4d":"\ud83d\udcaa"}),(0,Bp.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"\xa1Sesi\xf3n Completada!"}),(0,Bp.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,Bp.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Bp.jsx)("span",{className:"text-gray-600",children:"Ejercicios:"}),(0,Bp.jsxs)("span",{className:"font-bold text-purple-600",children:[u,"/",u]})]}),(0,Bp.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Bp.jsx)("span",{className:"text-gray-600",children:"Correctas:"}),(0,Bp.jsxs)("span",{className:"font-bold text-green-600",children:[y,"/",u]})]}),(0,Bp.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Bp.jsx)("span",{className:"text-gray-600",children:"Precisi\xf3n:"}),(0,Bp.jsxs)("span",{className:"font-bold text-blue-600",children:[e.toFixed(0),"%"]})]}),(0,Bp.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Bp.jsx)("span",{className:"text-gray-600",children:"XP:"}),(0,Bp.jsxs)("span",{className:"font-bold text-yellow-600",children:["+",w]})]})]}),(0,Bp.jsx)("button",{onClick:()=>i({exercisesCompleted:u,correctAnswers:y,accuracy:y/u,xpEarned:w}),className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 rounded-xl font-semibold",children:"Continuar"})]})})}const R=a/u*100;return(0,Bp.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,Bp.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,Bp.jsxs)("div",{className:"mb-8",children:[(0,Bp.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Bp.jsx)("button",{onClick:s,className:"text-gray-600 hover:text-gray-800",children:"\u2190 Salir"}),(0,Bp.jsxs)("div",{className:"text-center",children:[(0,Bp.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\ud83e\udd16 Sesi\xf3n de Aprendizaje Inteligente"}),(0,Bp.jsxs)("p",{className:"text-gray-600",children:[S," \u2022 Nivel ",n.level," \u2022 IA Personalizada"]})]}),(0,Bp.jsxs)("div",{className:"text-right",children:[(0,Bp.jsx)("p",{className:"text-sm text-gray-600",children:"XP"}),(0,Bp.jsxs)("p",{className:"font-bold text-green-600",children:["+",w]})]})]}),(0,Bp.jsx)("div",{className:"bg-gray-200 rounded-full h-3 mb-4",children:(0,Bp.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-500",style:{width:"".concat(R,"%")}})}),(0,Bp.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,Bp.jsxs)("span",{children:["Ejercicio ",a," de ",u]}),(0,Bp.jsxs)("span",{children:["Correctas: ",y]})]})]}),f?(0,Bp.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[(0,Bp.jsx)("div",{className:"animate-bounce text-4xl mb-4",children:"\ud83e\udd16"}),(0,Bp.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"IA Generando Ejercicio Personalizado..."}),(0,Bp.jsx)("p",{className:"text-gray-600 mb-4",children:"Analizando tu nivel y debilidades para crear el ejercicio perfecto"}),(0,Bp.jsxs)("div",{className:"flex justify-center space-x-1 mt-4",children:[(0,Bp.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),(0,Bp.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,Bp.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]}):d?(0,Bp.jsx)("div",{className:"relative",children:(0,Bp.jsx)(Wp,{question:d,onAnswer:T})}):(0,Bp.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[(0,Bp.jsx)("div",{className:"text-4xl mb-4",children:"\u26a0\ufe0f"}),(0,Bp.jsx)("p",{className:"text-gray-600",children:"No hay ejercicios disponibles"})]}),(0,Bp.jsxs)("div",{className:"mt-6 grid grid-cols-4 gap-4",children:[(0,Bp.jsxs)("div",{className:"bg-white p-4 rounded-xl text-center",children:[(0,Bp.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:a}),(0,Bp.jsx)("div",{className:"text-sm text-gray-600",children:"Actual"})]}),(0,Bp.jsxs)("div",{className:"bg-white p-4 rounded-xl text-center",children:[(0,Bp.jsx)("div",{className:"text-2xl font-bold text-green-600",children:y}),(0,Bp.jsx)("div",{className:"text-sm text-gray-600",children:"Correctas"})]}),(0,Bp.jsxs)("div",{className:"bg-white p-4 rounded-xl text-center",children:[(0,Bp.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:Math.max(0,a-1-y)}),(0,Bp.jsx)("div",{className:"text-sm text-gray-600",children:"Incorrectas"})]}),(0,Bp.jsxs)("div",{className:"bg-white p-4 rounded-xl text-center",children:[(0,Bp.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:["+",w]}),(0,Bp.jsx)("div",{className:"text-sm text-gray-600",children:"XP"})]})]})]})})},Zm="gemini_api_key",eg=e=>{let{newLevel:t,onClose:n}=e;const[i,s]=(0,r.useState)(!0),o=Ym.createLevelUpCelebration(t);return(0,r.useEffect)(()=>{const e=setTimeout(()=>{n()},12e3);return()=>clearTimeout(e)},[n]),(0,Bp.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:[i&&(0,Bp.jsx)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(50)].map((e,t)=>(0,Bp.jsx)("div",{className:"absolute animate-bounce text-2xl",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%"),animationDelay:"".concat(2*Math.random(),"s"),animationDuration:"".concat(2+2*Math.random(),"s")},children:["\ud83c\udf89","\u2b50","\ud83c\udfc6","\ud83c\udf8a","\ud83c\udf1f"][Math.floor(5*Math.random())]},t))}),(0,Bp.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[(0,Bp.jsxs)("div",{className:"bg-gradient-to-r ".concat(o.color," p-6 text-white text-center rounded-t-3xl"),children:[(0,Bp.jsx)("div",{className:"text-6xl mb-4 animate-bounce",children:o.emoji}),(0,Bp.jsx)("h1",{className:"text-2xl font-bold mb-2",children:o.title}),(0,Bp.jsxs)("p",{className:"text-blue-100 font-medium",children:["Level ",t," Unlocked!"]})]}),(0,Bp.jsxs)("div",{className:"p-6",children:[(0,Bp.jsx)("div",{className:"bg-blue-50 rounded-xl p-4 mb-6",children:(0,Bp.jsx)("p",{className:"text-gray-700 text-center",children:o.message})}),(0,Bp.jsxs)("div",{className:"mb-6",children:[(0,Bp.jsx)("h3",{className:"font-bold text-gray-800 mb-3 flex items-center",children:"\ud83c\udf81 \xa1Recompensas Desbloqueadas!"}),(0,Bp.jsx)("div",{className:"space-y-2",children:o.rewards.map((e,t)=>(0,Bp.jsx)("div",{className:"flex items-center p-2 bg-green-50 rounded-lg border border-green-200",children:(0,Bp.jsx)("span",{className:"text-green-600 font-medium text-sm",children:e})},t))})]}),(0,Bp.jsxs)("div",{className:"mb-6",children:[(0,Bp.jsx)("h3",{className:"font-bold text-gray-800 mb-3 flex items-center",children:"\ud83c\udfaf Pr\xf3ximos Objetivos"}),(0,Bp.jsx)("div",{className:"grid grid-cols-1 gap-2",children:o.nextGoals.map((e,t)=>(0,Bp.jsxs)("div",{className:"flex items-center p-2 bg-orange-50 rounded-lg border border-orange-200",children:[(0,Bp.jsx)("span",{className:"w-6 h-6 rounded-full bg-orange-200 flex items-center justify-center text-xs font-bold text-orange-800 mr-3",children:t+1}),(0,Bp.jsx)("span",{className:"text-orange-700 text-sm",children:e})]},t))})]}),(0,Bp.jsxs)("div",{className:"flex gap-3",children:[(0,Bp.jsx)("button",{onClick:n,className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-xl font-semibold hover:bg-gray-200 transition-colors",children:"Ver Dashboard"}),(0,Bp.jsx)("button",{onClick:()=>{s(!1),n()},className:"flex-1 bg-gradient-to-r ".concat(o.color," text-white py-3 rounded-xl font-semibold hover:shadow-lg transition-all transform hover:scale-105"),children:"\ud83d\ude80 \xa1Seguir Aprendiendo!"})]})]})]})]})};class tg{static calculateRealProgress(e){const t=this.LEVEL_REQUIREMENTS[e.currentLevel];if(!t)return{canLevelUp:!0,progressPercentage:100,nextLevel:"C1",requirements:{correctAnswers:{current:999,needed:999,completed:!0},sessions:{current:999,needed:999,completed:!0},accuracy:{current:1,needed:1,completed:!0},xp:{current:9999,needed:9999,completed:!0}},motivationalMessage:"\ud83c\udfc6 \xa1Eres un experto! Has completado todos los niveles disponibles."};const n={current:e.totalCorrectAnswers,needed:t.minCorrectAnswers,completed:e.totalCorrectAnswers>=t.minCorrectAnswers},r={current:e.sessionsA1+e.sessionsA2+e.sessionsB1+e.sessionsB2,needed:t.minSessions,completed:e.sessionsA1+e.sessionsA2+e.sessionsB1+e.sessionsB2>=t.minSessions},i={current:e.overallAccuracy,needed:t.minAccuracy,completed:e.overallAccuracy>=t.minAccuracy},s={current:e.totalXP,needed:t.xpRequired,completed:e.totalXP>=t.xpRequired},o=n.completed&&r.completed&&i.completed&&s.completed,a=[Math.min(n.current/n.needed,1),Math.min(r.current/r.needed,1),Math.min(i.current/i.needed,1),Math.min(s.current/s.needed,1)],l=a.reduce((e,t)=>e+t,0)/a.length,c=Math.round(100*l),u=["A1","A2","B1","B2","C1"],d=u.indexOf(e.currentLevel),h=u[d+1]||"C1";let f="";return f=o?"\ud83c\udf89 \xa1LISTO PARA ".concat(h,"! Completa una sesi\xf3n m\xe1s para subir de nivel oficialmente."):c>=90?"\ud83d\udd25 \xa1S\xfaper cerca! Solo un poquito m\xe1s y subir\xe1s de nivel.":c>=75?"\ud83d\udcaa \xa1Excelente progreso! Est\xe1s en el camino correcto.":c>=50?"\ud83c\udf1f \xa1Vas muy bien! Sigue practicando consistentemente.":"\ud83d\ude80 \xa1Cada ejercicio te acerca m\xe1s a tu objetivo!",{canLevelUp:o,progressPercentage:c,nextLevel:h,requirements:{correctAnswers:n,sessions:r,accuracy:i,xp:s},motivationalMessage:f}}static levelUp(e){const t=["A1","A2","B1","B2","C1"],n=t.indexOf(e.currentLevel),r=t[Math.min(n+1,t.length-1)],i=this.LEVEL_REQUIREMENTS[r];return c(c({},e),{},{currentLevel:r,unlockedSkills:[...e.unlockedSkills,...(null===i||void 0===i?void 0:i.skillsUnlocked)||[]],progressToNext:0})}static updateProgress(e,t){const n=e.totalCorrectAnswers+t.correctAnswers,r=e.totalExercises+t.totalAnswers,i=n/r,s="sessions".concat(t.level),o=c(c({},e),{},{totalCorrectAnswers:n,totalExercises:r,overallAccuracy:i,totalXP:e.totalXP+t.xpEarned,[s]:e[s]+1,lastActive:new Date}),a=this.calculateRealProgress(o);return o.progressToNext=a.progressPercentage,o}static loadUserProgress(e){const t=localStorage.getItem("real_progress_".concat(e));if(t){const e=JSON.parse(t);return c(c({},e),{},{lastActive:new Date(e.lastActive)})}return{userId:e,currentLevel:"A1",totalCorrectAnswers:0,totalExercises:0,overallAccuracy:0,totalXP:0,sessionsA1:0,sessionsA2:0,sessionsB1:0,sessionsB2:0,unlockedSkills:["basic_vocabulary"],progressToNext:0,lastActive:new Date,streak:1}}static saveUserProgress(e){localStorage.setItem("real_progress_".concat(e.userId),JSON.stringify(e))}}tg.LEVEL_REQUIREMENTS={A1:{minCorrectAnswers:50,minSessions:6,minAccuracy:.6,xpRequired:400,skillsUnlocked:["basic_vocabulary","present_simple","verb_to_be"]},A2:{minCorrectAnswers:120,minSessions:15,minAccuracy:.65,xpRequired:1e3,skillsUnlocked:["present_perfect","past_simple","prepositions","basic_conversation"]},B1:{minCorrectAnswers:250,minSessions:30,minAccuracy:.7,xpRequired:2200,skillsUnlocked:["conditionals","passive_voice","advanced_grammar","fluent_conversation"]},B2:{minCorrectAnswers:500,minSessions:60,minAccuracy:.75,xpRequired:4500,skillsUnlocked:["advanced_vocabulary","nuanced_expressions","native_patterns"]}};class ng{static hashExerciseContent(e){const t=e.options.map(e=>e.replace(/^[A-D]\)\s*/,"").trim()),n="".concat(e.question.trim(),"_").concat(t.join("_"),"_").concat(e.correctAnswer);let r=0;for(let s=0;s<n.length;s++){r=(r<<5)-r+n.charCodeAt(s),r&=r}const i=Math.abs(r).toString(36).slice(0,16);return console.log("\ud83d\udd22 HASH GENERADO:",{question:e.question.trim(),cleanOptions:t,content:n.substring(0,100)+"...",hash:i}),i}static isContentRepeated(e,t){const n=this.hashExerciseContent(e),r=this.getUsedHashes(t),i=r.includes(n);return console.log("\ud83d\udd0d VERIFICANDO REPETICI\xd3N:",{hash:n,level:t,totalHashesUsados:r.length,isRepeated:i,hashesExistentes:r}),i}static markContentAsUsed(e,t){const n=this.hashExerciseContent(e),r=this.getUsedHashes(t);if(r.includes(n))console.log("\u26a0\ufe0f HASH YA EXIST\xcdA:",{hash:n,level:t});else{r.push(n);const i="content_hashes_".concat(t);localStorage.setItem(i,JSON.stringify(r)),console.log("\u2705 CONTENT HASH GUARDADO:",{hash:n,level:t,totalHashes:r.length,key:i,question:e.question.substring(0,50)+"..."})}}static getUsedHashes(e){const t="content_hashes_".concat(e),n=localStorage.getItem(t),r=n?JSON.parse(n):[];return console.log("\ud83d\udccb HASHES RECUPERADOS:",{level:e,key:t,totalHashes:r.length,hashes:r}),r}static removeSpecificQuestion(e,t){const n={question:e,options:["dummy","dummy","dummy","dummy"],correctAnswer:0},r=this.hashExerciseContent(n),i=this.getUsedHashes(t).filter(e=>e!==r);localStorage.setItem("content_hashes_".concat(t),JSON.stringify(i)),console.log("\ud83d\uddd1\ufe0f HASH ESPEC\xcdFICO ELIMINADO:",{hashToRemove:r,level:t})}static clearAllHashes(){["A1","A2","B1","B2"].forEach(e=>{localStorage.removeItem("content_hashes_".concat(e)),localStorage.removeItem("used_exercises_".concat(e))}),console.log("\ud83e\uddf9 TODOS LOS HASHES LIMPIADOS")}}const rg=e=>{var t;let{user:n}=e;const[i,s]=(0,r.useState)(!1),[o,a]=(0,r.useState)(!1),[l,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)({level:"A2",xp:850,accuracy:.75,completedLessons:3,weakAreas:["present perfect","prepositions"],strengths:["basic vocabulary","verb to be"],streak:7}),[f,p]=(0,r.useState)(tg.loadUserProgress(n.uid)),{apiKey:m,hasApiKey:g,saveApiKey:v}=(()=>{const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{try{const e=localStorage.getItem(Zm);e&&t(e)}catch(e){console.error("Error loading API key:",e)}finally{i(!1)}},[]),{apiKey:e,hasApiKey:Boolean(e),isLoading:n,saveApiKey:e=>{try{localStorage.setItem(Zm,e),t(e)}catch(n){console.error("Error saving API key:",n)}},removeApiKey:()=>{try{localStorage.removeItem(Zm),t(null)}catch(e){console.error("Error removing API key:",e)}}}})(),[y,b]=(0,r.useState)(""),[w,_]=(0,r.useState)(null),[E,x]=(0,r.useState)(null),[S,I]=(0,r.useState)(!1),[C,A]=(0,r.useState)(!1),[T,k]=(0,r.useState)("");(0,r.useEffect)(()=>{localStorage.getItem("cleaned_uber_question")||(ng.removeSpecificQuestion("Has Sof\xeda ordered food using Uber Eats today?",d.level),localStorage.setItem("cleaned_uber_question","true"),console.log("\ud83e\uddf9 Pregunta problem\xe1tica de Uber Eats eliminada del cache"));localStorage.getItem("cleanup_done")||(console.log("\u2705 Cleanup ejecutado - manteniendo hashes para anti-repetici\xf3n"),localStorage.setItem("cleanup_done","true"));const e=localStorage.getItem("user_progress");e&&h(JSON.parse(e))},[]),(0,r.useEffect)(()=>{localStorage.getItem("migrated_to_real_system")||(console.log("\u2705 Migrado al sistema de niveles real - el progreso nunca bajar\xe1"),localStorage.setItem("migrated_to_real_system","true"))},[]),(0,r.useEffect)(()=>{(async()=>{if(null!==n&&void 0!==n&&n.uid){I(!0);try{console.log("\ud83e\udde0 INICIALIZANDO SISTEMA INTELIGENTE");const e=await Xp.detectUserLevel(n.uid);b(e);const t=await Xp.getPersonalizedRecommendations(n.uid);_(t);const r=await Xp.getDetailedAnalytics(n.uid);x(r),console.log("\u2705 Sistema inteligente inicializado")}catch(e){console.error("\u274c Error inicializando sistema inteligente:",e)}finally{I(!1)}}})()},[null===n||void 0===n?void 0:n.uid]);const N=e=>{h(e),localStorage.setItem("user_progress",JSON.stringify(e))},R={id:1,question:"What is the correct form of Present Perfect?",options:["I have been to London","I have go to London","I has been to London","I have went to London"],correctAnswer:0,explanation:"Present Perfect uses 'have/has + past participle'. 'Been' is the past participle of 'be'."},P=(e,t)=>{const n=c(c({},d),{},{xp:d.xp+t});N(n),setTimeout(()=>{s(!1)},1e3)},O=e=>{console.log("\ud83d\udcca SESI\xd3N COMPLETADA:",e);const t=c(c({},d),{},{xp:d.xp+e.xpEarned,accuracy:(d.accuracy+e.accuracy)/2,completedLessons:d.completedLessons+1,level:e.levelUp?e.newLevel:d.level});N(t);const n=tg.updateProgress(f,{correctAnswers:e.correctAnswers,totalAnswers:e.totalAnswers,xpEarned:e.xpEarned,level:f.currentLevel});let r=n,i=!1;tg.calculateRealProgress(n).canLevelUp&&!e.levelUpTriggered&&(r=tg.levelUp(n),i=!0,console.log("\ud83c\udf89 LEVEL UP! Nuevo nivel: ".concat(r.currentLevel))),tg.saveUserProgress(r),p(r),a(!1),i&&(k(r.currentLevel),A(!0))},D=e=>{v(e),u(!1)};return l?(0,Bp.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50 py-8",children:(0,Bp.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,Bp.jsx)("div",{className:"mb-6",children:(0,Bp.jsx)("button",{onClick:()=>u(!1),className:"flex items-center text-gray-600 hover:text-gray-800 mb-4",children:"\u2190 Volver al Dashboard"})}),(0,Bp.jsx)(Kp,{onApiKeySet:D,currentApiKey:m})]})}):o?(0,Bp.jsx)($m,{apiKey:m,userProgress:c(c({},d),{},{userId:n.uid}),onSessionComplete:O,onExit:()=>a(!1)}):i?(0,Bp.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,Bp.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,Bp.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,Bp.jsxs)("div",{children:[(0,Bp.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\ud83d\udcda Lecci\xf3n B\xe1sica"}),(0,Bp.jsxs)("p",{className:"text-gray-600",children:["XP: ",d.xp]})]}),(0,Bp.jsx)("button",{onClick:()=>s(!1),className:"text-gray-600 hover:text-gray-800",children:"\u2190 Volver"})]}),(0,Bp.jsx)(Wp,{question:R,onAnswer:P})]})}):(0,Bp.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Bp.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,Bp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Bp.jsxs)("div",{className:"flex justify-between h-16",children:[(0,Bp.jsx)("div",{className:"flex items-center",children:(0,Bp.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"\ud83d\ude80 English Learning App"})}),(0,Bp.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Bp.jsxs)("div",{className:"text-right",children:[(0,Bp.jsxs)("p",{className:"text-gray-700 font-medium",children:[null===(t=n.email)||void 0===t?void 0:t.split("@")[0],"! \ud83d\udc4b"]}),(0,Bp.jsxs)("p",{className:"text-xs text-gray-500",children:["Nivel ",d.level," \u2022 ",d.completedLessons," ","lecciones"]})]}),(0,Bp.jsx)("button",{onClick:()=>{!function(e){V(e).signOut()}(zp)},className:"bg-red-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-600 transition-colors",children:"Salir"})]})]})})}),(0,Bp.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,Bp.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,Bp.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,Bp.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"\xa1Bienvenido a tu Dashboard! \ud83c\udf89"}),y&&(0,Bp.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Bp.jsxs)("div",{className:"bg-blue-100 text-blue-700 px-4 py-2 rounded-full text-sm font-semibold",children:["\ud83e\udde0 Nivel IA: ",y]}),w&&(0,Bp.jsx)("div",{className:"bg-green-100 text-green-700 px-4 py-2 rounded-full text-sm font-semibold",children:"\ud83c\udfaf Sistema Inteligente Activo"})]})]}),(()=>{const e=tg.calculateRealProgress(f);return(0,Bp.jsxs)("div",{className:"rounded-2xl p-6 mb-8 border-2 ".concat(e.canLevelUp?"bg-gradient-to-r from-green-50 to-emerald-50 border-green-300":"bg-gradient-to-r from-blue-50 to-purple-50 border-blue-300"),children:[(0,Bp.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Bp.jsxs)("div",{children:[(0,Bp.jsxs)("h3",{className:"text-xl font-bold ".concat(e.canLevelUp?"text-green-800":"text-blue-800"),children:["\ud83d\udcc8 Progreso hacia ",e.nextLevel]}),(0,Bp.jsx)("p",{className:"text-sm ".concat(e.canLevelUp?"text-green-700":"text-blue-700"),children:e.motivationalMessage})]}),(0,Bp.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Bp.jsxs)("div",{className:"text-center",children:[(0,Bp.jsx)("div",{className:"bg-white px-4 py-2 rounded-full shadow-sm border",children:(0,Bp.jsx)("span",{className:"font-bold text-lg text-gray-800",children:f.currentLevel})}),(0,Bp.jsx)("span",{className:"text-xs text-gray-600 mt-1 block",children:"Actual"})]}),(0,Bp.jsx)("div",{className:"text-2xl",children:"\u2192"}),(0,Bp.jsxs)("div",{className:"text-center",children:[(0,Bp.jsx)("div",{className:"px-4 py-2 rounded-full shadow-sm border-2 ".concat(e.canLevelUp?"bg-green-500 text-white border-green-600":"bg-gray-100 text-gray-600 border-gray-300"),children:(0,Bp.jsx)("span",{className:"font-bold text-lg",children:e.nextLevel})}),(0,Bp.jsx)("span",{className:"text-xs text-gray-600 mt-1 block",children:"Siguiente"})]})]})]}),(0,Bp.jsxs)("div",{className:"mb-4",children:[(0,Bp.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Bp.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Progreso General"}),(0,Bp.jsxs)("span",{className:"text-sm font-bold text-gray-800",children:[e.progressPercentage,"%"]})]}),(0,Bp.jsx)("div",{className:"bg-gray-200 rounded-full h-4 overflow-hidden",children:(0,Bp.jsx)("div",{className:"h-4 rounded-full transition-all duration-1000 ".concat(e.canLevelUp?"bg-gradient-to-r from-green-400 to-green-500":"bg-gradient-to-r from-blue-400 to-purple-500"),style:{width:"".concat(e.progressPercentage,"%")},children:e.progressPercentage>10&&(0,Bp.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,Bp.jsxs)("span",{className:"text-white text-xs font-bold",children:[e.progressPercentage,"%"]})})})})]}),(0,Bp.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[(0,Bp.jsxs)("div",{className:"p-3 rounded-lg ".concat(e.requirements.correctAnswers.completed?"bg-green-100":"bg-gray-100"),children:[(0,Bp.jsx)("div",{className:"text-xs text-gray-600",children:"Respuestas Correctas"}),(0,Bp.jsxs)("div",{className:"font-bold",children:[e.requirements.correctAnswers.current,"/",e.requirements.correctAnswers.needed]}),e.requirements.correctAnswers.completed&&(0,Bp.jsx)("span",{className:"text-green-600 text-xs",children:"\u2713"})]}),(0,Bp.jsxs)("div",{className:"p-3 rounded-lg ".concat(e.requirements.sessions.completed?"bg-green-100":"bg-gray-100"),children:[(0,Bp.jsx)("div",{className:"text-xs text-gray-600",children:"Sesiones"}),(0,Bp.jsxs)("div",{className:"font-bold",children:[e.requirements.sessions.current,"/",e.requirements.sessions.needed]}),e.requirements.sessions.completed&&(0,Bp.jsx)("span",{className:"text-green-600 text-xs",children:"\u2713"})]}),(0,Bp.jsxs)("div",{className:"p-3 rounded-lg ".concat(e.requirements.accuracy.completed?"bg-green-100":"bg-gray-100"),children:[(0,Bp.jsx)("div",{className:"text-xs text-gray-600",children:"Precisi\xf3n"}),(0,Bp.jsxs)("div",{className:"font-bold",children:[Math.round(100*e.requirements.accuracy.current),"%"]}),e.requirements.accuracy.completed&&(0,Bp.jsx)("span",{className:"text-green-600 text-xs",children:"\u2713"})]}),(0,Bp.jsxs)("div",{className:"p-3 rounded-lg ".concat(e.requirements.xp.completed?"bg-green-100":"bg-gray-100"),children:[(0,Bp.jsx)("div",{className:"text-xs text-gray-600",children:"XP Total"}),(0,Bp.jsx)("div",{className:"font-bold",children:e.requirements.xp.current}),e.requirements.xp.completed&&(0,Bp.jsx)("span",{className:"text-green-600 text-xs",children:"\u2713"})]})]}),e.canLevelUp?(0,Bp.jsxs)("div",{className:"bg-green-100 rounded-lg p-4",children:[(0,Bp.jsx)("h4",{className:"font-semibold text-green-800 mb-2 flex items-center",children:"\ud83c\udf89 \xa1Listo para subir de nivel!"}),(0,Bp.jsxs)("p",{className:"text-green-700 text-sm mb-3",children:["Has cumplido todos los requisitos. Completa una sesi\xf3n m\xe1s para subir oficialmente a ",e.nextLevel,"."]}),(0,Bp.jsxs)("button",{onClick:()=>a(!0),className:"bg-green-500 text-white px-6 py-2 rounded-full font-semibold hover:bg-green-600 transition-colors shadow-lg",children:["\ud83d\ude80 \xa1SUBIR A ",e.nextLevel," AHORA!"]})]}):(0,Bp.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,Bp.jsxs)("h4",{className:"font-semibold text-blue-800 mb-2",children:["\ud83d\udccb Contin\xfaa progresando hacia ",e.nextLevel]}),(0,Bp.jsx)("p",{className:"text-blue-700 text-sm",children:"Sigue practicando para mejorar en todas las \xe1reas. \xa1Cada sesi\xf3n cuenta!"})]})]})})(),g?(0,Bp.jsx)(Kp,{onApiKeySet:D,currentApiKey:m}):(0,Bp.jsx)("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-100 border-2 border-orange-200 rounded-xl p-6 mb-8",children:(0,Bp.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Bp.jsx)("div",{className:"w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center",children:(0,Bp.jsx)("span",{className:"text-2xl",children:"\u26a1"})}),(0,Bp.jsxs)("div",{className:"flex-1",children:[(0,Bp.jsx)("h3",{className:"text-lg font-semibold text-orange-800 mb-1",children:"\xa1Desbloquea tu Superpoder IA! \ud83e\udd16"}),(0,Bp.jsx)("p",{className:"text-orange-700 text-sm mb-3",children:"Conecta tu Google AI Studio para sesiones personalizadas infinitas"}),(0,Bp.jsx)("button",{onClick:()=>u(!0),className:"bg-orange-500 text-white px-6 py-2 rounded-full font-semibold hover:bg-orange-600 transition-colors text-sm",children:"Configurar IA Personal \u2192"})]})]})}),w&&!S&&(0,Bp.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6 mb-8 border-2 border-purple-200",children:[(0,Bp.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:["\ud83e\udd16 Recomendaciones Personalizadas",(0,Bp.jsx)("span",{className:"ml-2 bg-purple-100 text-purple-700 text-xs px-2 py-1 rounded-full",children:"IA"})]}),(0,Bp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Bp.jsxs)("div",{className:"bg-white rounded-xl p-4",children:[(0,Bp.jsx)("h4",{className:"font-semibold text-gray-700 mb-2",children:"\ud83c\udfaf Temas Recomendados"}),(0,Bp.jsx)("div",{className:"flex flex-wrap gap-2",children:w.recommendedTopics.map((e,t)=>(0,Bp.jsx)("span",{className:"bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm",children:e},t))})]}),(0,Bp.jsxs)("div",{className:"bg-white rounded-xl p-4",children:[(0,Bp.jsx)("h4",{className:"font-semibold text-gray-700 mb-2",children:"\ud83d\udcda Plan de Estudio"}),(0,Bp.jsx)("ul",{className:"text-sm text-gray-600 space-y-1",children:w.studyPlan.slice(0,3).map((e,t)=>(0,Bp.jsxs)("li",{className:"flex items-start",children:[(0,Bp.jsx)("span",{className:"text-green-500 mr-2",children:"\u2022"}),e]},t))})]})]})]}),(0,Bp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,Bp.jsx)("div",{className:"bg-white overflow-hidden shadow-lg rounded-xl border border-gray-100",children:(0,Bp.jsx)("div",{className:"p-6",children:(0,Bp.jsxs)("div",{className:"flex items-center",children:[(0,Bp.jsx)("div",{className:"flex-shrink-0",children:(0,Bp.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,Bp.jsx)("span",{className:"text-2xl",children:"\u2b50"})})}),(0,Bp.jsx)("div",{className:"ml-4 w-0 flex-1",children:(0,Bp.jsxs)("dl",{children:[(0,Bp.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"XP Total"}),(0,Bp.jsx)("dd",{className:"text-2xl font-bold text-blue-600",children:d.xp})]})})]})})}),(0,Bp.jsx)("div",{className:"bg-white overflow-hidden shadow-lg rounded-xl border border-gray-100",children:(0,Bp.jsx)("div",{className:"p-6",children:(0,Bp.jsxs)("div",{className:"flex items-center",children:[(0,Bp.jsx)("div",{className:"flex-shrink-0",children:(0,Bp.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:(0,Bp.jsx)("span",{className:"text-2xl",children:"\ud83c\udfaf"})})}),(0,Bp.jsx)("div",{className:"ml-4 w-0 flex-1",children:(0,Bp.jsxs)("dl",{children:[(0,Bp.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Precisi\xf3n"}),(0,Bp.jsxs)("dd",{className:"text-2xl font-bold text-green-600",children:[Math.round(100*d.accuracy),"%"]})]})})]})})}),(0,Bp.jsx)("div",{className:"bg-white overflow-hidden shadow-lg rounded-xl border border-gray-100",children:(0,Bp.jsx)("div",{className:"p-6",children:(0,Bp.jsxs)("div",{className:"flex items-center",children:[(0,Bp.jsx)("div",{className:"flex-shrink-0",children:(0,Bp.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center",children:(0,Bp.jsx)("span",{className:"text-2xl",children:"\ud83d\udd25"})})}),(0,Bp.jsx)("div",{className:"ml-4 w-0 flex-1",children:(0,Bp.jsxs)("dl",{children:[(0,Bp.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Racha"}),(0,Bp.jsxs)("dd",{className:"text-2xl font-bold text-orange-500",children:[d.streak," d\xedas"]})]})})]})})}),(0,Bp.jsx)("div",{className:"bg-white overflow-hidden shadow-lg rounded-xl border border-gray-100",children:(0,Bp.jsx)("div",{className:"p-6",children:(0,Bp.jsxs)("div",{className:"flex items-center",children:[(0,Bp.jsx)("div",{className:"flex-shrink-0",children:(0,Bp.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:(0,Bp.jsx)("span",{className:"text-2xl",children:"\ud83d\udcda"})})}),(0,Bp.jsx)("div",{className:"ml-4 w-0 flex-1",children:(0,Bp.jsxs)("dl",{children:[(0,Bp.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Lecciones"}),(0,Bp.jsx)("dd",{className:"text-2xl font-bold text-purple-600",children:d.completedLessons})]})})]})})})]}),(0,Bp.jsx)("div",{className:"bg-gradient-to-br from-blue-500 via-purple-600 to-blue-700 rounded-2xl p-8 text-white shadow-xl",children:(0,Bp.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Bp.jsxs)("div",{className:"flex-1",children:[(0,Bp.jsx)("h3",{className:"text-2xl font-bold mb-2",children:"Contin\xfaa Aprendiendo \ud83d\ude80"}),(0,Bp.jsx)("p",{className:"text-blue-100 mb-4",children:"\xbfListo para tu pr\xf3xima sesi\xf3n personalizada?"}),(0,Bp.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,Bp.jsx)("button",{onClick:()=>s(!0),className:"bg-white text-blue-600 px-6 py-3 rounded-full font-semibold hover:bg-blue-50 transition-colors shadow-lg",children:"\ud83d\udcda Lecci\xf3n R\xe1pida"}),g&&(0,Bp.jsx)("button",{onClick:()=>a(!0),className:"bg-purple-500 text-white px-6 py-3 rounded-full font-semibold hover:bg-purple-600 transition-colors shadow-lg border-2 border-purple-300",children:"\ud83e\udd16 Sesi\xf3n IA (8 ejercicios)"})]}),g&&(0,Bp.jsx)("p",{className:"text-blue-200 text-xs",children:"\u2728 Sesi\xf3n adaptativa con dificultad inteligente"})]}),(0,Bp.jsx)("div",{className:"hidden md:block",children:(0,Bp.jsx)("div",{className:"text-6xl opacity-20",children:"\ud83d\udcda"})})]})}),(0,Bp.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Bp.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,Bp.jsxs)("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[(0,Bp.jsx)("span",{className:"text-2xl mr-2",children:"\ud83d\udcaa"}),"\xc1reas a Mejorar"]}),(0,Bp.jsx)("div",{className:"space-y-2",children:d.weakAreas.map((e,t)=>(0,Bp.jsx)("div",{className:"bg-orange-50 px-3 py-2 rounded-lg text-sm text-orange-800 capitalize",children:e},t))})]}),(0,Bp.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,Bp.jsxs)("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[(0,Bp.jsx)("span",{className:"text-2xl mr-2",children:"\u2b50"}),"Fortalezas"]}),(0,Bp.jsx)("div",{className:"space-y-2",children:d.strengths.map((e,t)=>(0,Bp.jsx)("div",{className:"bg-green-50 px-3 py-2 rounded-lg text-sm text-green-800 capitalize",children:e},t))})]})]})]})}),C&&(0,Bp.jsx)(eg,{newLevel:T,onClose:()=>{A(!1),k("")}})]})};const ig=function(){const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{const e=function(e,t,n,r){return V(e).onAuthStateChanged(t,n,r)}(zp,e=>{t(e),i(!1)});return()=>e()},[]),n?(0,Bp.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,Bp.jsx)("div",{className:"text-2xl",children:"Cargando... \ud83d\ude80"})}):(0,Bp.jsx)("div",{className:"min-h-screen bg-gray-50",children:e?(0,Bp.jsx)(rg,{user:e}):(0,Bp.jsx)(Hp,{})})},sg=document.getElementById("root");i.createRoot(sg).render((0,Bp.jsx)(r.StrictMode,{children:(0,Bp.jsx)(ig,{})}))})();
//# sourceMappingURL=main.d57df38a.js.map